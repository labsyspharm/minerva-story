var MinervaStory=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=41)}([function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var r=n(36),i=n(37),a=n(38);function o(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(o()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=c.prototype:(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return u(this,t,e,n)}function u(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);c.TYPED_ARRAY_SUPPORT?(t=e).__proto__=c.prototype:t=h(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),i=(t=s(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(c.isBuffer(e)){var n=0|d(e.length);return 0===(t=s(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?s(t,0):h(t,e);if("Buffer"===e.type&&a(e.data))return h(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function f(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e){if(f(e),t=s(t,e<0?0:0|d(e)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|d(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function d(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function p(t,e){if(c.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return V(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(t).length;default:if(r)return V(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return k(this,e,n);case"utf8":case"utf-8":return T(this,e,n);case"ascii":return M(this,e,n);case"latin1":case"binary":return E(this,e,n);case"base64":return S(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function v(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=c.from(e,r)),c.isBuffer(e))return 0===e.length?-1:y(t,e,n,r,i);if("number"==typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,r,i){var a,o=1,s=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,s/=2,c/=2,n/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){var f=-1;for(a=n;a<s;a++)if(u(t,a)===u(e,-1===f?0:a-f)){if(-1===f&&(f=a),a-f+1===c)return f*o}else-1!==f&&(a-=a-f),f=-1}else for(n+c>s&&(n=s-c),a=n;a>=0;a--){for(var l=!0,h=0;h<c;h++)if(u(t,a+h)!==u(e,h)){l=!1;break}if(l)return a}return-1}function b(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=e.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(e.substr(2*o,2),16);if(isNaN(s))return o;t[n+o]=s}return o}function w(t,e,n,r){return z(V(e,t.length-n),t,n,r)}function _(t,e,n,r){return z(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function x(t,e,n,r){return _(t,e,n,r)}function C(t,e,n,r){return z(H(e),t,n,r)}function A(t,e,n,r){return z(function(t,e){for(var n,r,i,a=[],o=0;o<t.length&&!((e-=2)<0);++o)n=t.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(e,t.length-n),t,n,r)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function T(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var a,o,s,c,u=t[i],f=null,l=u>239?4:u>223?3:u>191?2:1;if(i+l<=n)switch(l){case 1:u<128&&(f=u);break;case 2:128==(192&(a=t[i+1]))&&(c=(31&u)<<6|63&a)>127&&(f=c);break;case 3:a=t[i+1],o=t[i+2],128==(192&a)&&128==(192&o)&&(c=(15&u)<<12|(63&a)<<6|63&o)>2047&&(c<55296||c>57343)&&(f=c);break;case 4:a=t[i+1],o=t[i+2],s=t[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(c=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&c<1114112&&(f=c)}null===f?(f=65533,l=1):f>65535&&(f-=65536,r.push(f>>>10&1023|55296),f=56320|1023&f),r.push(f),i+=l}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}e.Buffer=c,e.SlowBuffer=function(t){+t!=t&&(t=0);return c.alloc(+t)},e.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=o(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,n){return u(null,t,e,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,n){return function(t,e,n,r){return f(e),e<=0?s(t,e):void 0!==n?"string"==typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},c.allocUnsafe=function(t){return l(null,t)},c.allocUnsafeSlow=function(t){return l(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,a=Math.min(n,r);i<a;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=c.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(!c.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},c.byteLength=p,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?T(this,0,t):g.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,n,r,i){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(e>>>=0),s=Math.min(a,o),u=this.slice(r,i),f=t.slice(e,n),l=0;l<s;++l)if(u[l]!==f[l]){a=u[l],o=f[l];break}return a<o?-1:o<a?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return v(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return v(this,t,e,n,!1)},c.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return _(this,t,e,n);case"latin1":case"binary":return x(this,t,e,n);case"base64":return C(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function M(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function E(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function k(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=e;a<n;++a)i+=L(t[a]);return i}function U(t,e,n){for(var r=t.slice(e,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function D(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function P(t,e,n,r,i,a){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function I(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,a=Math.min(t.length-n,2);i<a;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function N(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,a=Math.min(t.length-n,4);i<a;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function R(t,e,n,r,i,a){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(t,e,n,r,a){return a||R(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,a){return a||R(t,0,n,8),i.write(t,e,n,r,52,8),n+8}c.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=c.prototype;else{var i=e-t;n=new c(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+t]}return n},c.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||D(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r},c.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||D(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},c.prototype.readUInt8=function(t,e){return e||D(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||D(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||D(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||D(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||D(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||D(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},c.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||D(t,e,this.length);for(var r=e,i=1,a=this[t+--r];r>0&&(i*=256);)a+=this[t+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*e)),a},c.prototype.readInt8=function(t,e){return e||D(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||D(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){e||D(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return e||D(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||D(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||D(t,4,this.length),i.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||D(t,4,this.length),i.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||D(t,8,this.length),i.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||D(t,8,this.length),i.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||P(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[e]=255&t;++a<n&&(i*=256);)this[e+a]=t/i&255;return e+n},c.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||P(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[e+i]=255&t;--i>=0&&(a*=256);)this[e+i]=t/a&255;return e+n},c.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):N(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):N(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);P(this,t,e,n,i-1,-i)}var a=0,o=1,s=0;for(this[e]=255&t;++a<n&&(o*=256);)t<0&&0===s&&0!==this[e+a-1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+n},c.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);P(this,t,e,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[e+a]=255&t;--a>=0&&(o*=256);)t<0&&0===s&&0!==this[e+a+1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):N(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):N(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,n){return B(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return B(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,a=r-n;if(this===t&&n<e&&e<r)for(i=a-1;i>=0;--i)t[i+e]=this[i+n];else if(a<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+a),e);return a},c.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var a;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(a=e;a<n;++a)this[a]=t;else{var o=c.isBuffer(t)?t:V(new c(t,r).toString()),s=o.length;for(a=0;a<n-e;++a)this[a+e]=o[a%s]}return this};var O=/[^+\/0-9A-Za-z-_]/g;function L(t){return t<16?"0"+t.toString(16):t.toString(16)}function V(t,e){var n;e=e||1/0;for(var r=t.length,i=null,a=[],o=0;o<r;++o){if((n=t.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;a.push(n)}else if(n<2048){if((e-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function H(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(O,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(35))},function(t,e,n){var r;t.exports=(r=r||function(t,e){var n=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),r={},i=r.lib={},a=i.Base={extend:function(t){var e=n(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},o=i.WordArray=a.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||c).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,i=t.sigBytes;if(this.clamp(),r%4)for(var a=0;a<i;a++){var o=n[a>>>2]>>>24-a%4*8&255;e[r+a>>>2]|=o<<24-(r+a)%4*8}else for(a=0;a<i;a+=4)e[r+a>>>2]=n[a>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=a.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n,r=[],i=function(e){e=e;var n=987654321,r=4294967295;return function(){var i=((n=36969*(65535&n)+(n>>16)&r)<<16)+(e=18e3*(65535&e)+(e>>16)&r)&r;return i/=4294967296,(i+=.5)*(t.random()>.5?1:-1)}},a=0;a<e;a+=4){var s=i(4294967296*(n||t.random()));n=987654071*s(),r.push(4294967296*s()|0)}return new o.init(r,e)}}),s=r.enc={},c=s.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var a=e[i>>>2]>>>24-i%4*8&255;r.push((a>>>4).toString(16)),r.push((15&a).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new o.init(n,e/2)}},u=s.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var a=e[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(a))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new o.init(n,e)}},f=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(u.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return u.parse(unescape(encodeURIComponent(t)))}},l=i.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=f.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,r=n.words,i=n.sigBytes,a=this.blockSize,s=i/(4*a),c=(s=e?t.ceil(s):t.max((0|s)-this._minBufferSize,0))*a,u=t.min(4*c,i);if(c){for(var f=0;f<c;f+=a)this._doProcessBlock(r,f);var l=r.splice(0,c);n.sigBytes-=u}return new o.init(l,u)},clone:function(){var t=a.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),h=(i.Hasher=l.extend({cfg:a.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new h.HMAC.init(t,n).finalize(e)}}}),r.algo={});return r}(Math),r)},,function(t,e,n){var r,i;
/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */!function(a){if(void 0===(i="function"==typeof(r=a)?r.call(e,n,e,t):r)||(t.exports=i),!0,t.exports=a(),!!0){var o=window.Cookies,s=window.Cookies=a();s.noConflict=function(){return window.Cookies=o,s}}}((function(){function t(){for(var t=0,e={};t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function e(t){return t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function i(){}function a(e,n,a){if("undefined"!=typeof document){"number"==typeof(a=t({path:"/"},i.defaults,a)).expires&&(a.expires=new Date(1*new Date+864e5*a.expires)),a.expires=a.expires?a.expires.toUTCString():"";try{var o=JSON.stringify(n);/^[\{\[]/.test(o)&&(n=o)}catch(t){}n=r.write?r.write(n,e):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in a)a[c]&&(s+="; "+c,!0!==a[c]&&(s+="="+a[c].split(";")[0]));return document.cookie=e+"="+n+s}}function o(t,n){if("undefined"!=typeof document){for(var i={},a=document.cookie?document.cookie.split("; "):[],o=0;o<a.length;o++){var s=a[o].split("="),c=s.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=e(s[0]);if(c=(r.read||r)(c,u)||e(c),n)try{c=JSON.parse(c)}catch(t){}if(i[u]=c,t===u)break}catch(t){}}return t?i[t]:i}}return i.set=a,i.get=function(t){return o(t,!1)},i.getJSON=function(t){return o(t,!0)},i.remove=function(e,n){a(e,"",t(n,{expires:-1}))},i.defaults={},i.withConverter=n,i}((function(){}))}))},,function(t,e,n){var r;t.exports=(r=n(1),n(12),n(39),r.HmacSHA256)},,,,,,,function(t,e,n){var r;t.exports=(r=n(1),function(t){var e=r,n=e.lib,i=n.WordArray,a=n.Hasher,o=e.algo,s=[],c=[];!function(){function e(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0}function n(t){return 4294967296*(t-(0|t))|0}for(var r=2,i=0;i<64;)e(r)&&(i<8&&(s[i]=n(t.pow(r,.5))),c[i]=n(t.pow(r,1/3)),i++),r++}();var u=[],f=o.SHA256=a.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],f=n[5],l=n[6],h=n[7],d=0;d<64;d++){if(d<16)u[d]=0|t[e+d];else{var p=u[d-15],g=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,m=u[d-2],v=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;u[d]=g+u[d-7]+v+u[d-16]}var y=r&i^r&a^i&a,b=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),w=h+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&f^~s&l)+c[d]+u[d];h=l,l=f,f=s,s=o+w|0,o=a,a=i,i=r,r=w+(b+y)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+a|0,n[3]=n[3]+o|0,n[4]=n[4]+s|0,n[5]=n[5]+f|0,n[6]=n[6]+l|0,n[7]=n[7]+h|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=t.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=a.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=a._createHelper(f),e.HmacSHA256=a._createHmacHelper(f)}(Math),r.SHA256)},function(t,e,n){var r,i,a;t.exports=(a=n(1),i=(r=a).lib.WordArray,r.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp();for(var i=[],a=0;a<n;a+=3)for(var o=(e[a>>>2]>>>24-a%4*8&255)<<16|(e[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|e[a+2>>>2]>>>24-(a+2)%4*8&255,s=0;s<4&&a+.75*s<n;s++)i.push(r.charAt(o>>>6*(3-s)&63));var c=r.charAt(64);if(c)for(;i.length%4;)i.push(c);return i.join("")},parse:function(t){var e=t.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var a=0;a<n.length;a++)r[n.charCodeAt(a)]=a}var o=n.charAt(64);if(o){var s=t.indexOf(o);-1!==s&&(e=s)}return function(t,e,n){for(var r=[],a=0,o=0;o<e;o++)if(o%4){var s=n[t.charCodeAt(o-1)]<<o%4*2,c=n[t.charCodeAt(o)]>>>6-o%4*2;r[a>>>2]|=(s|c)<<24-a%4*8,a++}return i.create(r,a)}(t,e,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},a.enc.Base64)},function(t,e,n){var r,i;void 0===(i="function"==typeof(r={schemeGroups:{sequential:["BuGn","BuPu","GnBu","OrRd","PuBu","PuBuGn","PuRd","RdPu","YlGn","YlGnBu","YlOrBr","YlOrRd"],singlehue:["Blues","Greens","Greys","Oranges","Purples","Reds"],diverging:["BrBG","PiYG","PRGn","PuOr","RdBu","RdGy","RdYlBu","RdYlGn","Spectral"],qualitative:["Accent","Dark2","Paired","Pastel1","Pastel2","Set1","Set2","Set3"]},YlGn:{3:["#f7fcb9","#addd8e","#31a354"],4:["#ffffcc","#c2e699","#78c679","#238443"],5:["#ffffcc","#c2e699","#78c679","#31a354","#006837"],6:["#ffffcc","#d9f0a3","#addd8e","#78c679","#31a354","#006837"],7:["#ffffcc","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],8:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],9:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"]},YlGnBu:{3:["#edf8b1","#7fcdbb","#2c7fb8"],4:["#ffffcc","#a1dab4","#41b6c4","#225ea8"],5:["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"],6:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#2c7fb8","#253494"],7:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],8:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],9:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"]},GnBu:{3:["#e0f3db","#a8ddb5","#43a2ca"],4:["#f0f9e8","#bae4bc","#7bccc4","#2b8cbe"],5:["#f0f9e8","#bae4bc","#7bccc4","#43a2ca","#0868ac"],6:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#43a2ca","#0868ac"],7:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],8:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],9:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"]},BuGn:{3:["#e5f5f9","#99d8c9","#2ca25f"],4:["#edf8fb","#b2e2e2","#66c2a4","#238b45"],5:["#edf8fb","#b2e2e2","#66c2a4","#2ca25f","#006d2c"],6:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#2ca25f","#006d2c"],7:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],8:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],9:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"]},PuBuGn:{3:["#ece2f0","#a6bddb","#1c9099"],4:["#f6eff7","#bdc9e1","#67a9cf","#02818a"],5:["#f6eff7","#bdc9e1","#67a9cf","#1c9099","#016c59"],6:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#1c9099","#016c59"],7:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],8:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],9:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"]},PuBu:{3:["#ece7f2","#a6bddb","#2b8cbe"],4:["#f1eef6","#bdc9e1","#74a9cf","#0570b0"],5:["#f1eef6","#bdc9e1","#74a9cf","#2b8cbe","#045a8d"],6:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#2b8cbe","#045a8d"],7:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],8:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],9:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"]},BuPu:{3:["#e0ecf4","#9ebcda","#8856a7"],4:["#edf8fb","#b3cde3","#8c96c6","#88419d"],5:["#edf8fb","#b3cde3","#8c96c6","#8856a7","#810f7c"],6:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8856a7","#810f7c"],7:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],8:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],9:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"]},RdPu:{3:["#fde0dd","#fa9fb5","#c51b8a"],4:["#feebe2","#fbb4b9","#f768a1","#ae017e"],5:["#feebe2","#fbb4b9","#f768a1","#c51b8a","#7a0177"],6:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#c51b8a","#7a0177"],7:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],8:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],9:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"]},PuRd:{3:["#e7e1ef","#c994c7","#dd1c77"],4:["#f1eef6","#d7b5d8","#df65b0","#ce1256"],5:["#f1eef6","#d7b5d8","#df65b0","#dd1c77","#980043"],6:["#f1eef6","#d4b9da","#c994c7","#df65b0","#dd1c77","#980043"],7:["#f1eef6","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],8:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],9:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"]},OrRd:{3:["#fee8c8","#fdbb84","#e34a33"],4:["#fef0d9","#fdcc8a","#fc8d59","#d7301f"],5:["#fef0d9","#fdcc8a","#fc8d59","#e34a33","#b30000"],6:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#e34a33","#b30000"],7:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],8:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],9:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"]},YlOrRd:{3:["#ffeda0","#feb24c","#f03b20"],4:["#ffffb2","#fecc5c","#fd8d3c","#e31a1c"],5:["#ffffb2","#fecc5c","#fd8d3c","#f03b20","#bd0026"],6:["#ffffb2","#fed976","#feb24c","#fd8d3c","#f03b20","#bd0026"],7:["#ffffb2","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],8:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],9:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"]},YlOrBr:{3:["#fff7bc","#fec44f","#d95f0e"],4:["#ffffd4","#fed98e","#fe9929","#cc4c02"],5:["#ffffd4","#fed98e","#fe9929","#d95f0e","#993404"],6:["#ffffd4","#fee391","#fec44f","#fe9929","#d95f0e","#993404"],7:["#ffffd4","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],8:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],9:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"]},Purples:{3:["#efedf5","#bcbddc","#756bb1"],4:["#f2f0f7","#cbc9e2","#9e9ac8","#6a51a3"],5:["#f2f0f7","#cbc9e2","#9e9ac8","#756bb1","#54278f"],6:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#756bb1","#54278f"],7:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],8:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],9:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"]},Blues:{3:["#deebf7","#9ecae1","#3182bd"],4:["#eff3ff","#bdd7e7","#6baed6","#2171b5"],5:["#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c"],6:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],7:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],8:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],9:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]},Greens:{3:["#e5f5e0","#a1d99b","#31a354"],4:["#edf8e9","#bae4b3","#74c476","#238b45"],5:["#edf8e9","#bae4b3","#74c476","#31a354","#006d2c"],6:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#31a354","#006d2c"],7:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],8:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],9:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"]},Oranges:{3:["#fee6ce","#fdae6b","#e6550d"],4:["#feedde","#fdbe85","#fd8d3c","#d94701"],5:["#feedde","#fdbe85","#fd8d3c","#e6550d","#a63603"],6:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#e6550d","#a63603"],7:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],8:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],9:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"]},Reds:{3:["#fee0d2","#fc9272","#de2d26"],4:["#fee5d9","#fcae91","#fb6a4a","#cb181d"],5:["#fee5d9","#fcae91","#fb6a4a","#de2d26","#a50f15"],6:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26","#a50f15"],7:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],8:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],9:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"]},Greys:{3:["#f0f0f0","#bdbdbd","#636363"],4:["#f7f7f7","#cccccc","#969696","#525252"],5:["#f7f7f7","#cccccc","#969696","#636363","#252525"],6:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#636363","#252525"],7:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],8:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],9:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"]},PuOr:{3:["#f1a340","#f7f7f7","#998ec3"],4:["#e66101","#fdb863","#b2abd2","#5e3c99"],5:["#e66101","#fdb863","#f7f7f7","#b2abd2","#5e3c99"],6:["#b35806","#f1a340","#fee0b6","#d8daeb","#998ec3","#542788"],7:["#b35806","#f1a340","#fee0b6","#f7f7f7","#d8daeb","#998ec3","#542788"],8:["#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788"],9:["#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788"],10:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],11:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"]},BrBG:{3:["#d8b365","#f5f5f5","#5ab4ac"],4:["#a6611a","#dfc27d","#80cdc1","#018571"],5:["#a6611a","#dfc27d","#f5f5f5","#80cdc1","#018571"],6:["#8c510a","#d8b365","#f6e8c3","#c7eae5","#5ab4ac","#01665e"],7:["#8c510a","#d8b365","#f6e8c3","#f5f5f5","#c7eae5","#5ab4ac","#01665e"],8:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e"],9:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e"],10:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],11:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"]},PRGn:{3:["#af8dc3","#f7f7f7","#7fbf7b"],4:["#7b3294","#c2a5cf","#a6dba0","#008837"],5:["#7b3294","#c2a5cf","#f7f7f7","#a6dba0","#008837"],6:["#762a83","#af8dc3","#e7d4e8","#d9f0d3","#7fbf7b","#1b7837"],7:["#762a83","#af8dc3","#e7d4e8","#f7f7f7","#d9f0d3","#7fbf7b","#1b7837"],8:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837"],9:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837"],10:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],11:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"]},PiYG:{3:["#e9a3c9","#f7f7f7","#a1d76a"],4:["#d01c8b","#f1b6da","#b8e186","#4dac26"],5:["#d01c8b","#f1b6da","#f7f7f7","#b8e186","#4dac26"],6:["#c51b7d","#e9a3c9","#fde0ef","#e6f5d0","#a1d76a","#4d9221"],7:["#c51b7d","#e9a3c9","#fde0ef","#f7f7f7","#e6f5d0","#a1d76a","#4d9221"],8:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221"],9:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221"],10:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],11:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"]},RdBu:{3:["#ef8a62","#f7f7f7","#67a9cf"],4:["#ca0020","#f4a582","#92c5de","#0571b0"],5:["#ca0020","#f4a582","#f7f7f7","#92c5de","#0571b0"],6:["#b2182b","#ef8a62","#fddbc7","#d1e5f0","#67a9cf","#2166ac"],7:["#b2182b","#ef8a62","#fddbc7","#f7f7f7","#d1e5f0","#67a9cf","#2166ac"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"]},RdGy:{3:["#ef8a62","#ffffff","#999999"],4:["#ca0020","#f4a582","#bababa","#404040"],5:["#ca0020","#f4a582","#ffffff","#bababa","#404040"],6:["#b2182b","#ef8a62","#fddbc7","#e0e0e0","#999999","#4d4d4d"],7:["#b2182b","#ef8a62","#fddbc7","#ffffff","#e0e0e0","#999999","#4d4d4d"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"]},RdYlBu:{3:["#fc8d59","#ffffbf","#91bfdb"],4:["#d7191c","#fdae61","#abd9e9","#2c7bb6"],5:["#d7191c","#fdae61","#ffffbf","#abd9e9","#2c7bb6"],6:["#d73027","#fc8d59","#fee090","#e0f3f8","#91bfdb","#4575b4"],7:["#d73027","#fc8d59","#fee090","#ffffbf","#e0f3f8","#91bfdb","#4575b4"],8:["#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4"],9:["#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"]},Spectral:{3:["#fc8d59","#ffffbf","#99d594"],4:["#d7191c","#fdae61","#abdda4","#2b83ba"],5:["#d7191c","#fdae61","#ffffbf","#abdda4","#2b83ba"],6:["#d53e4f","#fc8d59","#fee08b","#e6f598","#99d594","#3288bd"],7:["#d53e4f","#fc8d59","#fee08b","#ffffbf","#e6f598","#99d594","#3288bd"],8:["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd"],9:["#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd"],10:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],11:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"]},RdYlGn:{3:["#fc8d59","#ffffbf","#91cf60"],4:["#d7191c","#fdae61","#a6d96a","#1a9641"],5:["#d7191c","#fdae61","#ffffbf","#a6d96a","#1a9641"],6:["#d73027","#fc8d59","#fee08b","#d9ef8b","#91cf60","#1a9850"],7:["#d73027","#fc8d59","#fee08b","#ffffbf","#d9ef8b","#91cf60","#1a9850"],8:["#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850"],9:["#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"]},Accent:{3:["#7fc97f","#beaed4","#fdc086"],4:["#7fc97f","#beaed4","#fdc086","#ffff99"],5:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0"],6:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f"],7:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17"],8:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"]},Dark2:{3:["#1b9e77","#d95f02","#7570b3"],4:["#1b9e77","#d95f02","#7570b3","#e7298a"],5:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e"],6:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02"],7:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],8:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"]},Paired:{3:["#a6cee3","#1f78b4","#b2df8a"],4:["#a6cee3","#1f78b4","#b2df8a","#33a02c"],5:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99"],6:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c"],7:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f"],8:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00"],9:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6"],10:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a"],11:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99"],12:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"]},Pastel1:{3:["#fbb4ae","#b3cde3","#ccebc5"],4:["#fbb4ae","#b3cde3","#ccebc5","#decbe4"],5:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6"],6:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc"],7:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd"],8:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec"],9:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Pastel2:{3:["#b3e2cd","#fdcdac","#cbd5e8"],4:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4"],5:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9"],6:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae"],7:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc"],8:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"]},Set1:{3:["#e41a1c","#377eb8","#4daf4a"],4:["#e41a1c","#377eb8","#4daf4a","#984ea3"],5:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"],6:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33"],7:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"],8:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf"],9:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"]},Set2:{3:["#66c2a5","#fc8d62","#8da0cb"],4:["#66c2a5","#fc8d62","#8da0cb","#e78ac3"],5:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854"],6:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],7:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],8:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"]},Set3:{3:["#8dd3c7","#ffffb3","#bebada"],4:["#8dd3c7","#ffffb3","#bebada","#fb8072"],5:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3"],6:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462"],7:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"],8:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5"],9:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9"],10:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd"],11:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5"],12:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"]}})?r.call(e,n,e,t):r)||(t.exports=i)},function(t,e,n){var r,i=function(){var t=String.fromCharCode,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function i(t,e){if(!r[t]){r[t]={};for(var n=0;n<t.length;n++)r[t][t.charAt(n)]=n}return r[t][e]}var a={compressToBase64:function(t){if(null==t)return"";var n=a._compress(t,6,(function(t){return e.charAt(t)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:a._decompress(t.length,32,(function(n){return i(e,t.charAt(n))}))},compressToUTF16:function(e){return null==e?"":a._compress(e,15,(function(e){return t(e+32)}))+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:a._decompress(t.length,16384,(function(e){return t.charCodeAt(e)-32}))},compressToUint8Array:function(t){for(var e=a.compress(t),n=new Uint8Array(2*e.length),r=0,i=e.length;r<i;r++){var o=e.charCodeAt(r);n[2*r]=o>>>8,n[2*r+1]=o%256}return n},decompressFromUint8Array:function(e){if(null==e)return a.decompress(e);for(var n=new Array(e.length/2),r=0,i=n.length;r<i;r++)n[r]=256*e[2*r]+e[2*r+1];var o=[];return n.forEach((function(e){o.push(t(e))})),a.decompress(o.join(""))},compressToEncodedURIComponent:function(t){return null==t?"":a._compress(t,6,(function(t){return n.charAt(t)}))},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),a._decompress(t.length,32,(function(e){return i(n,t.charAt(e))})))},compress:function(e){return a._compress(e,16,(function(e){return t(e)}))},_compress:function(t,e,n){if(null==t)return"";var r,i,a,o={},s={},c="",u="",f="",l=2,h=3,d=2,p=[],g=0,m=0;for(a=0;a<t.length;a+=1)if(c=t.charAt(a),Object.prototype.hasOwnProperty.call(o,c)||(o[c]=h++,s[c]=!0),u=f+c,Object.prototype.hasOwnProperty.call(o,u))f=u;else{if(Object.prototype.hasOwnProperty.call(s,f)){if(f.charCodeAt(0)<256){for(r=0;r<d;r++)g<<=1,m==e-1?(m=0,p.push(n(g)),g=0):m++;for(i=f.charCodeAt(0),r=0;r<8;r++)g=g<<1|1&i,m==e-1?(m=0,p.push(n(g)),g=0):m++,i>>=1}else{for(i=1,r=0;r<d;r++)g=g<<1|i,m==e-1?(m=0,p.push(n(g)),g=0):m++,i=0;for(i=f.charCodeAt(0),r=0;r<16;r++)g=g<<1|1&i,m==e-1?(m=0,p.push(n(g)),g=0):m++,i>>=1}0==--l&&(l=Math.pow(2,d),d++),delete s[f]}else for(i=o[f],r=0;r<d;r++)g=g<<1|1&i,m==e-1?(m=0,p.push(n(g)),g=0):m++,i>>=1;0==--l&&(l=Math.pow(2,d),d++),o[u]=h++,f=String(c)}if(""!==f){if(Object.prototype.hasOwnProperty.call(s,f)){if(f.charCodeAt(0)<256){for(r=0;r<d;r++)g<<=1,m==e-1?(m=0,p.push(n(g)),g=0):m++;for(i=f.charCodeAt(0),r=0;r<8;r++)g=g<<1|1&i,m==e-1?(m=0,p.push(n(g)),g=0):m++,i>>=1}else{for(i=1,r=0;r<d;r++)g=g<<1|i,m==e-1?(m=0,p.push(n(g)),g=0):m++,i=0;for(i=f.charCodeAt(0),r=0;r<16;r++)g=g<<1|1&i,m==e-1?(m=0,p.push(n(g)),g=0):m++,i>>=1}0==--l&&(l=Math.pow(2,d),d++),delete s[f]}else for(i=o[f],r=0;r<d;r++)g=g<<1|1&i,m==e-1?(m=0,p.push(n(g)),g=0):m++,i>>=1;0==--l&&(l=Math.pow(2,d),d++)}for(i=2,r=0;r<d;r++)g=g<<1|1&i,m==e-1?(m=0,p.push(n(g)),g=0):m++,i>>=1;for(;;){if(g<<=1,m==e-1){p.push(n(g));break}m++}return p.join("")},decompress:function(t){return null==t?"":""==t?null:a._decompress(t.length,32768,(function(e){return t.charCodeAt(e)}))},_decompress:function(e,n,r){var i,a,o,s,c,u,f,l=[],h=4,d=4,p=3,g="",m=[],v={val:r(0),position:n,index:1};for(i=0;i<3;i+=1)l[i]=i;for(o=0,c=Math.pow(2,2),u=1;u!=c;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),o|=(s>0?1:0)*u,u<<=1;switch(o){case 0:for(o=0,c=Math.pow(2,8),u=1;u!=c;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),o|=(s>0?1:0)*u,u<<=1;f=t(o);break;case 1:for(o=0,c=Math.pow(2,16),u=1;u!=c;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),o|=(s>0?1:0)*u,u<<=1;f=t(o);break;case 2:return""}for(l[3]=f,a=f,m.push(f);;){if(v.index>e)return"";for(o=0,c=Math.pow(2,p),u=1;u!=c;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),o|=(s>0?1:0)*u,u<<=1;switch(f=o){case 0:for(o=0,c=Math.pow(2,8),u=1;u!=c;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),o|=(s>0?1:0)*u,u<<=1;l[d++]=t(o),f=d-1,h--;break;case 1:for(o=0,c=Math.pow(2,16),u=1;u!=c;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),o|=(s>0?1:0)*u,u<<=1;l[d++]=t(o),f=d-1,h--;break;case 2:return m.join("")}if(0==h&&(h=Math.pow(2,p),p++),l[f])g=l[f];else{if(f!==d)return null;g=a+a.charAt(0)}m.push(g),l[d++]=a+g.charAt(0),a=g,0==--h&&(h=Math.pow(2,p),p++)}}};return a}();void 0===(r=function(){return i}.call(e,n,e,t))||(t.exports=r)},,,,function(t,e,n){var r;t.exports=(r=n(1),function(){if("function"==typeof ArrayBuffer){var t=r.lib.WordArray,e=t.init;(t.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var n=t.byteLength,r=[],i=0;i<n;i++)r[i>>>2]|=t[i]<<24-i%4*8;e.call(this,r,n)}else e.apply(this,arguments)}).prototype=t}}(),r.lib.WordArray)},function(t,e){var n={utf8:{stringToBytes:function(t){return n.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(n.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}};t.exports=n},function(t,e,n){(function(e){var r,i,a,o;r=n(40),i=n(20).utf8,a=n(20).bin,(o=function(t,n){var o=r.wordsToBytes(function(t){t.constructor==String?t=i.stringToBytes(t):void 0!==e&&"function"==typeof e.isBuffer&&e.isBuffer(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||(t=t.toString());var n=r.bytesToWords(t),a=8*t.length,o=[],s=1732584193,c=-271733879,u=-1732584194,f=271733878,l=-1009589776;n[a>>5]|=128<<24-a%32,n[15+(a+64>>>9<<4)]=a;for(var h=0;h<n.length;h+=16){for(var d=s,p=c,g=u,m=f,v=l,y=0;y<80;y++){if(y<16)o[y]=n[h+y];else{var b=o[y-3]^o[y-8]^o[y-14]^o[y-16];o[y]=b<<1|b>>>31}var w=(s<<5|s>>>27)+l+(o[y]>>>0)+(y<20?1518500249+(c&u|~c&f):y<40?1859775393+(c^u^f):y<60?(c&u|c&f|u&f)-1894007588:(c^u^f)-899497514);l=f,f=u,u=c<<30|c>>>2,c=s,s=w}s+=d,c+=p,u+=g,f+=m,l+=v}return[s,c,u,f,l]}(t));return n&&n.asBytes?o:n&&n.asString?a.bytesToString(o):r.bytesToHex(o)})._blocksize=16,o._digestsize=20,t.exports=o}).call(this,n(0).Buffer)},,,,,,,,,,,,,,function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";e.byteLength=function(t){var e=u(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=u(t),o=r[0],s=r[1],c=new a(function(t,e,n){return 3*(e+n)/4-n}(0,o,s)),f=0,l=s>0?o-4:o;for(n=0;n<l;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],c[f++]=e>>16&255,c[f++]=e>>8&255,c[f++]=255&e;2===s&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,c[f++]=255&e);1===s&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,c[f++]=e>>8&255,c[f++]=255&e);return c},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,a=[],o=0,s=n-i;o<s;o+=16383)a.push(f(t,o,o+16383>s?s:o+16383));1===i?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return a.join("")};for(var r=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=o.length;s<c;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function f(t,e,n){for(var i,a,o=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),o.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var a,o,s=8*i-r-1,c=(1<<s)-1,u=c>>1,f=-7,l=n?i-1:0,h=n?-1:1,d=t[e+l];for(l+=h,a=d&(1<<-f)-1,d>>=-f,f+=s;f>0;a=256*a+t[e+l],l+=h,f-=8);for(o=a&(1<<-f)-1,a>>=-f,f+=r;f>0;o=256*o+t[e+l],l+=h,f-=8);if(0===a)a=1-u;else{if(a===c)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,r),a-=u}return(d?-1:1)*o*Math.pow(2,a-r)},e.write=function(t,e,n,r,i,a){var o,s,c,u=8*a-i-1,f=(1<<u)-1,l=f>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:a-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=f):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),(e+=o+l>=1?h/c:h*Math.pow(2,1-l))*c>=2&&(o++,c/=2),o+l>=f?(s=0,o=f):o+l>=1?(s=(e*c-1)*Math.pow(2,i),o+=l):(s=e*Math.pow(2,l-1)*Math.pow(2,i),o=0));i>=8;t[n+d]=255&s,d+=p,s/=256,i-=8);for(o=o<<i|s,u+=i;u>0;t[n+d]=255&o,d+=p,o/=256,u-=8);t[n+d-p]|=128*g}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){var r,i,a,o;t.exports=(r=n(1),a=(i=r).lib.Base,o=i.enc.Utf8,void(i.algo.HMAC=a.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=o.parse(e));var n=t.blockSize,r=4*n;e.sigBytes>r&&(e=t.finalize(e)),e.clamp();for(var i=this._oKey=e.clone(),a=this._iKey=e.clone(),s=i.words,c=a.words,u=0;u<n;u++)s[u]^=1549556828,c[u]^=909522486;i.sigBytes=a.sigBytes=r,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,n=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(n))}})))},function(t,e){var n,r;n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&r.rotl(t,8)|4278255360&r.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=r.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var e=[],r=0;r<t.length;r+=3)for(var i=t[r]<<16|t[r+1]<<8|t[r+2],a=0;a<4;a++)8*r+6*a<=8*t.length?e.push(n.charAt(i>>>6*(3-a)&63)):e.push("=");return e.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var e=[],r=0,i=0;r<t.length;i=++r%4)0!=i&&e.push((n.indexOf(t.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|n.indexOf(t.charAt(r))>>>6-2*i);return e}},t.exports=r},function(t,e,n){"use strict";n.r(e);const r=function(t){return t.replace(/^\s+|\s+$/g,"")};class i{constructor(t){this.subject=t,this.eventListeners=[],this.events={testEvent:"testEvent",osdClickEvent:"osdClickEvent"}}bind(t,e){for(const n of t.split(" ")){this.eventListeners.push({eventName:n,eventFunction:e});const t=t=>e(t.detail,t);this.subject.addEventListener(n,t,!1)}}getListeners(){return this.eventListeners}trigger(t,e){this.subject.dispatchEvent(new CustomEvent(t,{detail:e}))}}
/*!
 * Copyright 2016 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */
var a,o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e||{},r=n.ValidationData,i=n.Username,a=n.Password,o=n.AuthParameters,s=n.ClientMetadata;this.validationData=r||{},this.authParameters=o||{},this.clientMetadata=s||{},this.username=i,this.password=a}return t.prototype.getUsername=function(){return this.username},t.prototype.getPassword=function(){return this.password},t.prototype.getValidationData=function(){return this.validationData},t.prototype.getAuthParameters=function(){return this.authParameters},t.prototype.getClientMetadata=function(){return this.clientMetadata},t}(),s=n(0),c=n(1),u=n.n(c),f=(n(19),n(12)),l=n.n(f),h=n(5),d=n.n(h),p=g;function g(t,e){null!=t&&this.fromString(t,e)}function m(){return new g(null)}var v="undefined"!=typeof navigator;v&&"Microsoft Internet Explorer"==navigator.appName?(g.prototype.am=function(t,e,n,r,i,a){for(var o=32767&e,s=e>>15;--a>=0;){var c=32767&this[t],u=this[t++]>>15,f=s*c+u*o;i=((c=o*c+((32767&f)<<15)+n[r]+(1073741823&i))>>>30)+(f>>>15)+s*u+(i>>>30),n[r++]=1073741823&c}return i},a=30):v&&"Netscape"!=navigator.appName?(g.prototype.am=function(t,e,n,r,i,a){for(;--a>=0;){var o=e*this[t++]+n[r]+i;i=Math.floor(o/67108864),n[r++]=67108863&o}return i},a=26):(g.prototype.am=function(t,e,n,r,i,a){for(var o=16383&e,s=e>>14;--a>=0;){var c=16383&this[t],u=this[t++]>>14,f=s*c+u*o;i=((c=o*c+((16383&f)<<14)+n[r]+i)>>28)+(f>>14)+s*u,n[r++]=268435455&c}return i},a=28),g.prototype.DB=a,g.prototype.DM=(1<<a)-1,g.prototype.DV=1<<a;g.prototype.FV=Math.pow(2,52),g.prototype.F1=52-a,g.prototype.F2=2*a-52;var y,b,w=new Array;for(y="0".charCodeAt(0),b=0;b<=9;++b)w[y++]=b;for(y="a".charCodeAt(0),b=10;b<36;++b)w[y++]=b;for(y="A".charCodeAt(0),b=10;b<36;++b)w[y++]=b;function x(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function C(t,e){var n=w[t.charCodeAt(e)];return null==n?-1:n}function A(t){var e=m();return e.fromInt(t),e}function S(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function T(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}T.prototype.convert=function(t){var e=m();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(g.ZERO)>0&&this.m.subTo(e,e),e},T.prototype.revert=function(t){var e=m();return t.copyTo(e),this.reduce(e),e},T.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],r=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[n=e+this.m.t]+=this.m.am(0,r,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},T.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},T.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},g.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},g.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},g.prototype.fromString=function(t,e){var n;if(16==e)n=4;else if(8==e)n=3;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");n=2}this.t=0,this.s=0;for(var r=t.length,i=!1,a=0;--r>=0;){var o=C(t,r);o<0?"-"==t.charAt(r)&&(i=!0):(i=!1,0==a?this[this.t++]=o:a+n>this.DB?(this[this.t-1]|=(o&(1<<this.DB-a)-1)<<a,this[this.t++]=o>>this.DB-a):this[this.t-1]|=o<<a,(a+=n)>=this.DB&&(a-=this.DB))}this.clamp(),i&&g.ZERO.subTo(this,this)},g.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},g.prototype.dlShiftTo=function(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s},g.prototype.drShiftTo=function(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s},g.prototype.lShiftTo=function(t,e){var n,r=t%this.DB,i=this.DB-r,a=(1<<i)-1,o=Math.floor(t/this.DB),s=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)e[n+o+1]=this[n]>>i|s,s=(this[n]&a)<<r;for(n=o-1;n>=0;--n)e[n]=0;e[o]=s,e.t=this.t+o+1,e.s=this.s,e.clamp()},g.prototype.rShiftTo=function(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)e.t=0;else{var r=t%this.DB,i=this.DB-r,a=(1<<r)-1;e[0]=this[n]>>r;for(var o=n+1;o<this.t;++o)e[o-n-1]|=(this[o]&a)<<i,e[o-n]=this[o]>>r;r>0&&(e[this.t-n-1]|=(this.s&a)<<i),e.t=this.t-n,e.clamp()}},g.prototype.subTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]-t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t[n],e[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[n++]=this.DV+r:r>0&&(e[n++]=r),e.t=n,e.clamp()},g.prototype.multiplyTo=function(t,e){var n=this.abs(),r=t.abs(),i=n.t;for(e.t=i+r.t;--i>=0;)e[i]=0;for(i=0;i<r.t;++i)e[i+n.t]=n.am(0,r[i],e,i,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&g.ZERO.subTo(e,e)},g.prototype.squareTo=function(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()},g.prototype.divRemTo=function(t,e,n){var r=t.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)return null!=e&&e.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=m());var a=m(),o=this.s,s=t.s,c=this.DB-S(r[r.t-1]);c>0?(r.lShiftTo(c,a),i.lShiftTo(c,n)):(r.copyTo(a),i.copyTo(n));var u=a.t,f=a[u-1];if(0!=f){var l=f*(1<<this.F1)+(u>1?a[u-2]>>this.F2:0),h=this.FV/l,d=(1<<this.F1)/l,p=1<<this.F2,v=n.t,y=v-u,b=null==e?m():e;for(a.dlShiftTo(y,b),n.compareTo(b)>=0&&(n[n.t++]=1,n.subTo(b,n)),g.ONE.dlShiftTo(u,b),b.subTo(a,a);a.t<u;)a[a.t++]=0;for(;--y>=0;){var w=n[--v]==f?this.DM:Math.floor(n[v]*h+(n[v-1]+p)*d);if((n[v]+=a.am(0,w,n,y,0,u))<w)for(a.dlShiftTo(y,b),n.subTo(b,n);n[v]<--w;)n.subTo(b,n)}null!=e&&(n.drShiftTo(u,e),o!=s&&g.ZERO.subTo(e,e)),n.t=u,n.clamp(),c>0&&n.rShiftTo(c,n),o<0&&g.ZERO.subTo(n,n)}}},g.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},g.prototype.addTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]+t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r+=t[n],e[n++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e[n++]=r:r<-1&&(e[n++]=this.DV+r),e.t=n,e.clamp()},g.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString();var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");e=2}var n,r=(1<<e)-1,i=!1,a="",o=this.t,s=this.DB-o*this.DB%e;if(o-- >0)for(s<this.DB&&(n=this[o]>>s)>0&&(i=!0,a=x(n));o>=0;)s<e?(n=(this[o]&(1<<s)-1)<<e-s,n|=this[--o]>>(s+=this.DB-e)):(n=this[o]>>(s-=e)&r,s<=0&&(s+=this.DB,--o)),n>0&&(i=!0),i&&(a+=x(n));return i?a:"0"},g.prototype.negate=function(){var t=m();return g.ZERO.subTo(this,t),t},g.prototype.abs=function(){return this.s<0?this.negate():this},g.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(0!=(e=n-t.t))return this.s<0?-e:e;for(;--n>=0;)if(0!=(e=this[n]-t[n]))return e;return 0},g.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+S(this[this.t-1]^this.s&this.DM)},g.prototype.mod=function(t){var e=m();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(g.ZERO)>0&&t.subTo(e,e),e},g.prototype.equals=function(t){return 0==this.compareTo(t)},g.prototype.add=function(t){var e=m();return this.addTo(t,e),e},g.prototype.subtract=function(t){var e=m();return this.subTo(t,e),e},g.prototype.multiply=function(t){var e=m();return this.multiplyTo(t,e),e},g.prototype.divide=function(t){var e=m();return this.divRemTo(t,e,null),e},g.prototype.modPow=function(t,e,n){var r,i=t.bitLength(),a=A(1),o=new T(e);if(i<=0)return a;r=i<18?1:i<48?3:i<144?4:i<768?5:6;var s=new Array,c=3,u=r-1,f=(1<<r)-1;if(s[1]=o.convert(this),r>1){var l=m();for(o.sqrTo(s[1],l);c<=f;)s[c]=m(),o.mulTo(l,s[c-2],s[c]),c+=2}var h,d,p=t.t-1,g=!0,v=m();for(i=S(t[p])-1;p>=0;){for(i>=u?h=t[p]>>i-u&f:(h=(t[p]&(1<<i+1)-1)<<u-i,p>0&&(h|=t[p-1]>>this.DB+i-u)),c=r;0==(1&h);)h>>=1,--c;if((i-=c)<0&&(i+=this.DB,--p),g)s[h].copyTo(a),g=!1;else{for(;c>1;)o.sqrTo(a,v),o.sqrTo(v,a),c-=2;c>0?o.sqrTo(a,v):(d=a,a=v,v=d),o.mulTo(v,s[h],a)}for(;p>=0&&0==(t[p]&1<<i);)o.sqrTo(a,v),d=a,a=v,v=d,--i<0&&(i=this.DB-1,--p)}var y=o.revert(a);return n(null,y),y},g.ZERO=A(0),g.ONE=A(1);
/*!
 * Copyright 2016 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */
var M=function(t){return s.Buffer.from(u.a.lib.WordArray.random(t).toString(),"hex")},E=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.N=new p("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",16),this.g=new p("2",16),this.k=new p(this.hexHash("00"+this.N.toString(16)+"0"+this.g.toString(16)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue((function(){})),this.infoBits=s.Buffer.from("Caldera Derived Key","utf8"),this.poolName=e}return t.prototype.getSmallAValue=function(){return this.smallAValue},t.prototype.getLargeAValue=function(t){var e=this;this.largeAValue?t(null,this.largeAValue):this.calculateA(this.smallAValue,(function(n,r){n&&t(n,null),e.largeAValue=r,t(null,e.largeAValue)}))},t.prototype.generateRandomSmallA=function(){var t=M(128).toString("hex");return new p(t,16).mod(this.N)},t.prototype.generateRandomString=function(){return M(40).toString("base64")},t.prototype.getRandomPassword=function(){return this.randomPassword},t.prototype.getSaltDevices=function(){return this.SaltToHashDevices},t.prototype.getVerifierDevices=function(){return this.verifierDevices},t.prototype.generateHashDevice=function(t,e,n){var r=this;this.randomPassword=this.generateRandomString();var i=""+t+e+":"+this.randomPassword,a=this.hash(i),o=M(16).toString("hex");this.SaltToHashDevices=this.padHex(new p(o,16)),this.g.modPow(new p(this.hexHash(this.SaltToHashDevices+a),16),this.N,(function(t,e){t&&n(t,null),r.verifierDevices=r.padHex(e),n(null,null)}))},t.prototype.calculateA=function(t,e){var n=this;this.g.modPow(t,this.N,(function(t,r){t&&e(t,null),r.mod(n.N).equals(p.ZERO)&&e(new Error("Illegal paramater. A mod N cannot be 0."),null),e(null,r)}))},t.prototype.calculateU=function(t,e){return this.UHexHash=this.hexHash(this.padHex(t)+this.padHex(e)),new p(this.UHexHash,16)},t.prototype.hash=function(t){var e=t instanceof s.Buffer?u.a.lib.WordArray.create(t):t,n=l()(e).toString();return new Array(64-n.length).join("0")+n},t.prototype.hexHash=function(t){return this.hash(s.Buffer.from(t,"hex"))},t.prototype.computehkdf=function(t,e){var n=u.a.lib.WordArray.create(s.Buffer.concat([this.infoBits,s.Buffer.from(String.fromCharCode(1),"utf8")])),r=t instanceof s.Buffer?u.a.lib.WordArray.create(t):t,i=e instanceof s.Buffer?u.a.lib.WordArray.create(e):e,a=d()(r,i),o=d()(n,a);return s.Buffer.from(o.toString(),"hex").slice(0,16)},t.prototype.getPasswordAuthenticationKey=function(t,e,n,r,i){var a=this;if(n.mod(this.N).equals(p.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,n),this.UValue.equals(p.ZERO))throw new Error("U cannot be zero.");var o=""+this.poolName+t+":"+e,c=this.hash(o),u=new p(this.hexHash(this.padHex(r)+c),16);this.calculateS(u,n,(function(t,e){t&&i(t,null);var n=a.computehkdf(s.Buffer.from(a.padHex(e),"hex"),s.Buffer.from(a.padHex(a.UValue.toString(16)),"hex"));i(null,n)}))},t.prototype.calculateS=function(t,e,n){var r=this;this.g.modPow(t,this.N,(function(i,a){i&&n(i,null),e.subtract(r.k.multiply(a)).modPow(r.smallAValue.add(r.UValue.multiply(t)),r.N,(function(t,e){t&&n(t,null),n(null,e.mod(r.N))}))}))},t.prototype.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return"userAttributes."},t.prototype.padHex=function(t){var e=t.toString(16);return e.length%2==1?e="0"+e:-1!=="89ABCDEFabcdef".indexOf(e[0])&&(e="00"+e),e},t}();
/*!
 * Copyright 2016 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */
var k=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.jwtToken=e||"",this.payload=this.decodePayload()}return t.prototype.getJwtToken=function(){return this.jwtToken},t.prototype.getExpiration=function(){return this.payload.exp},t.prototype.getIssuedAt=function(){return this.payload.iat},t.prototype.decodePayload=function(){var t=this.jwtToken.split(".")[1];try{return JSON.parse(s.Buffer.from(t,"base64").toString("utf8"))}catch(t){return{}}},t}();function U(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function D(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var P=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.AccessToken;return U(this,e),D(this,t.call(this,r||""))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(k);function I(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}
/*!
 * Copyright 2016 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */
var R=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.IdToken;return I(this,e),N(this,t.call(this,r||""))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(k);function B(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}
/*!
 * Copyright 2016 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */var F=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.RefreshToken;B(this,t),this.token=n||""}return t.prototype.getToken=function(){return this.token},t}(),O=n(13),L=n.n(O);function V(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}
/*!
 * Copyright 2016 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */var H=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.IdToken,r=e.RefreshToken,i=e.AccessToken,a=e.ClockDrift;if(V(this,t),null==i||null==n)throw new Error("Id token and Access Token must be present.");this.idToken=n,this.refreshToken=r,this.accessToken=i,this.clockDrift=void 0===a?this.calculateClockDrift():a}return t.prototype.getIdToken=function(){return this.idToken},t.prototype.getRefreshToken=function(){return this.refreshToken},t.prototype.getAccessToken=function(){return this.accessToken},t.prototype.getClockDrift=function(){return this.clockDrift},t.prototype.calculateClockDrift=function(){return Math.floor(new Date/1e3)-Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt())},t.prototype.isValid=function(){var t=Math.floor(new Date/1e3)-this.clockDrift;return t<this.accessToken.getExpiration()&&t<this.idToken.getExpiration()},t}();
/*!
 * Copyright 2016 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */
var z=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Y=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],j=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.prototype.getNowString=function(){var t=new Date,e=Y[t.getUTCDay()],n=z[t.getUTCMonth()],r=t.getUTCDate(),i=t.getUTCHours();i<10&&(i="0"+i);var a=t.getUTCMinutes();a<10&&(a="0"+a);var o=t.getUTCSeconds();return o<10&&(o="0"+o),e+" "+n+" "+r+" "+i+":"+a+":"+o+" UTC "+t.getUTCFullYear()},t}();function q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}
/*!
 * Copyright 2016 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */var W=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.Name,r=e.Value;q(this,t),this.Name=n||"",this.Value=r||""}return t.prototype.getValue=function(){return this.Value},t.prototype.setValue=function(t){return this.Value=t,this},t.prototype.getName=function(){return this.Name},t.prototype.setName=function(t){return this.Name=t,this},t.prototype.toString=function(){return JSON.stringify(this)},t.prototype.toJSON=function(){return{Name:this.Name,Value:this.Value}},t}();function K(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}
/*!
 * Copyright 2016 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */var G={},X=function(){function t(){K(this,t)}return t.setItem=function(t,e){return G[t]=e,G[t]},t.getItem=function(t){return Object.prototype.hasOwnProperty.call(G,t)?G[t]:void 0},t.removeItem=function(t){return delete G[t]},t.clear=function(){return G={}},t}(),J=function(){function t(){K(this,t);try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch(t){this.storageWindow=X}}return t.prototype.getStorage=function(){return this.storageWindow},t}();
/*!
 * Copyright 2016 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */
var Z=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),null==e||null==e.Username||null==e.Pool)throw new Error("Username and pool information are required.");this.username=e.Username||"",this.pool=e.Pool,this.Session=null,this.client=e.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=e.Storage||(new J).getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}return t.prototype.setSignInUserSession=function(t){this.clearCachedUserData(),this.signInUserSession=t,this.cacheTokens()},t.prototype.getSignInUserSession=function(){return this.signInUserSession},t.prototype.getUsername=function(){return this.username},t.prototype.getAuthenticationFlowType=function(){return this.authenticationFlowType},t.prototype.setAuthenticationFlowType=function(t){this.authenticationFlowType=t},t.prototype.initiateAuth=function(t,e){var n=this,r=t.getAuthParameters();r.USERNAME=this.username;var i=0!==Object.keys(t.getValidationData()).length?t.getValidationData():t.getClientMetadata(),a={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:r,ClientMetadata:i};this.getUserContextData()&&(a.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",a,(function(t,r){if(t)return e.onFailure(t);var i=r.ChallengeName,a=r.ChallengeParameters;return"CUSTOM_CHALLENGE"===i?(n.Session=r.Session,e.customChallenge(a)):(n.signInUserSession=n.getCognitoUserSession(r.AuthenticationResult),n.cacheTokens(),e.onSuccess(n.signInUserSession))}))},t.prototype.authenticateUser=function(t,e){return"USER_PASSWORD_AUTH"===this.authenticationFlowType?this.authenticateUserPlainUsernamePassword(t,e):"USER_SRP_AUTH"===this.authenticationFlowType||"CUSTOM_AUTH"===this.authenticationFlowType?this.authenticateUserDefaultAuth(t,e):e.onFailure(new Error("Authentication flow type is invalid."))},t.prototype.authenticateUserDefaultAuth=function(t,e){var n=this,r=new E(this.pool.getUserPoolId().split("_")[1]),i=new j,a=void 0,o=void 0,c={};null!=this.deviceKey&&(c.DEVICE_KEY=this.deviceKey),c.USERNAME=this.username,r.getLargeAValue((function(f,l){f&&e.onFailure(f),c.SRP_A=l.toString(16),"CUSTOM_AUTH"===n.authenticationFlowType&&(c.CHALLENGE_NAME="SRP_A");var h=0!==Object.keys(t.getValidationData()).length?t.getValidationData():t.getClientMetadata(),g={AuthFlow:n.authenticationFlowType,ClientId:n.pool.getClientId(),AuthParameters:c,ClientMetadata:h};n.getUserContextData(n.username)&&(g.UserContextData=n.getUserContextData(n.username)),n.client.request("InitiateAuth",g,(function(c,f){if(c)return e.onFailure(c);var l=f.ChallengeParameters;n.username=l.USER_ID_FOR_SRP,a=new p(l.SRP_B,16),o=new p(l.SALT,16),n.getCachedDeviceKeyAndPassword(),r.getPasswordAuthenticationKey(n.username,t.getPassword(),a,o,(function(t,a){t&&e.onFailure(t);var o=i.getNowString(),c=u.a.lib.WordArray.create(s.Buffer.concat([s.Buffer.from(n.pool.getUserPoolId().split("_")[1],"utf8"),s.Buffer.from(n.username,"utf8"),s.Buffer.from(l.SECRET_BLOCK,"base64"),s.Buffer.from(o,"utf8")])),p=u.a.lib.WordArray.create(a),g=L.a.stringify(d()(c,p)),m={};m.USERNAME=n.username,m.PASSWORD_CLAIM_SECRET_BLOCK=l.SECRET_BLOCK,m.TIMESTAMP=o,m.PASSWORD_CLAIM_SIGNATURE=g,null!=n.deviceKey&&(m.DEVICE_KEY=n.deviceKey);var v={ChallengeName:"PASSWORD_VERIFIER",ClientId:n.pool.getClientId(),ChallengeResponses:m,Session:f.Session,ClientMetadata:h};n.getUserContextData()&&(v.UserContextData=n.getUserContextData()),function t(e,r){return n.client.request("RespondToAuthChallenge",e,(function(i,a){return i&&"ResourceNotFoundException"===i.code&&-1!==i.message.toLowerCase().indexOf("device")?(m.DEVICE_KEY=null,n.deviceKey=null,n.randomPassword=null,n.deviceGroupKey=null,n.clearCachedDeviceKeyAndPassword(),t(e,r)):r(i,a)}))}(v,(function(t,i){return t?e.onFailure(t):n.authenticateUserInternal(i,r,e)}))}))}))}))},t.prototype.authenticateUserPlainUsernamePassword=function(t,e){var n=this,r={};if(r.USERNAME=this.username,r.PASSWORD=t.getPassword(),r.PASSWORD){var i=new E(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(r.DEVICE_KEY=this.deviceKey);var a=0!==Object.keys(t.getValidationData()).length?t.getValidationData():t.getClientMetadata(),o={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:r,ClientMetadata:a};this.getUserContextData(this.username)&&(o.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",o,(function(t,r){return t?e.onFailure(t):n.authenticateUserInternal(r,i,e)}))}else e.onFailure(new Error("PASSWORD parameter is required"))},t.prototype.authenticateUserInternal=function(t,e,n){var r=this,i=t.ChallengeName,a=t.ChallengeParameters;if("SMS_MFA"===i)return this.Session=t.Session,n.mfaRequired(i,a);if("SELECT_MFA_TYPE"===i)return this.Session=t.Session,n.selectMFAType(i,a);if("MFA_SETUP"===i)return this.Session=t.Session,n.mfaSetup(i,a);if("SOFTWARE_TOKEN_MFA"===i)return this.Session=t.Session,n.totpRequired(i,a);if("CUSTOM_CHALLENGE"===i)return this.Session=t.Session,n.customChallenge(a);if("NEW_PASSWORD_REQUIRED"===i){this.Session=t.Session;var o=null,c=null,u=[],f=e.getNewPasswordRequiredChallengeUserAttributePrefix();if(a&&(o=JSON.parse(t.ChallengeParameters.userAttributes),c=JSON.parse(t.ChallengeParameters.requiredAttributes)),c)for(var l=0;l<c.length;l++)u[l]=c[l].substr(f.length);return n.newPasswordRequired(o,u)}if("DEVICE_SRP_AUTH"!==i){this.signInUserSession=this.getCognitoUserSession(t.AuthenticationResult),this.challengeName=i,this.cacheTokens();var h=t.AuthenticationResult.NewDeviceMetadata;if(null==h)return n.onSuccess(this.signInUserSession);e.generateHashDevice(t.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,t.AuthenticationResult.NewDeviceMetadata.DeviceKey,(function(i){if(i)return n.onFailure(i);var a={Salt:s.Buffer.from(e.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:s.Buffer.from(e.getVerifierDevices(),"hex").toString("base64")};r.verifierDevices=a.PasswordVerifier,r.deviceGroupKey=h.DeviceGroupKey,r.randomPassword=e.getRandomPassword(),r.client.request("ConfirmDevice",{DeviceKey:h.DeviceKey,AccessToken:r.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:a,DeviceName:navigator.userAgent},(function(e,i){return e?n.onFailure(e):(r.deviceKey=t.AuthenticationResult.NewDeviceMetadata.DeviceKey,r.cacheDeviceKeyAndPassword(),!0===i.UserConfirmationNecessary?n.onSuccess(r.signInUserSession,i.UserConfirmationNecessary):n.onSuccess(r.signInUserSession))}))}))}else this.getDeviceResponse(n)},t.prototype.completeNewPasswordChallenge=function(t,e,n,r){var i=this;if(!t)return n.onFailure(new Error("New password is required."));var a=new E(this.pool.getUserPoolId().split("_")[1]),o=a.getNewPasswordRequiredChallengeUserAttributePrefix(),s={};e&&Object.keys(e).forEach((function(t){s[o+t]=e[t]})),s.NEW_PASSWORD=t,s.USERNAME=this.username;var c={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:s,Session:this.Session,ClientMetadata:r};this.getUserContextData()&&(c.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",c,(function(t,e){return t?n.onFailure(t):i.authenticateUserInternal(e,a,n)}))},t.prototype.getDeviceResponse=function(t,e){var n=this,r=new E(this.deviceGroupKey),i=new j,a={};a.USERNAME=this.username,a.DEVICE_KEY=this.deviceKey,r.getLargeAValue((function(o,c){o&&t.onFailure(o),a.SRP_A=c.toString(16);var f={ChallengeName:"DEVICE_SRP_AUTH",ClientId:n.pool.getClientId(),ChallengeResponses:a,ClientMetadata:e};n.getUserContextData()&&(f.UserContextData=n.getUserContextData()),n.client.request("RespondToAuthChallenge",f,(function(e,a){if(e)return t.onFailure(e);var o=a.ChallengeParameters,c=new p(o.SRP_B,16),f=new p(o.SALT,16);r.getPasswordAuthenticationKey(n.deviceKey,n.randomPassword,c,f,(function(e,r){if(e)return t.onFailure(e);var c=i.getNowString(),f=u.a.lib.WordArray.create(s.Buffer.concat([s.Buffer.from(n.deviceGroupKey,"utf8"),s.Buffer.from(n.deviceKey,"utf8"),s.Buffer.from(o.SECRET_BLOCK,"base64"),s.Buffer.from(c,"utf8")])),l=u.a.lib.WordArray.create(r),h=L.a.stringify(d()(f,l)),p={};p.USERNAME=n.username,p.PASSWORD_CLAIM_SECRET_BLOCK=o.SECRET_BLOCK,p.TIMESTAMP=c,p.PASSWORD_CLAIM_SIGNATURE=h,p.DEVICE_KEY=n.deviceKey;var g={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:n.pool.getClientId(),ChallengeResponses:p,Session:a.Session};n.getUserContextData()&&(g.UserContextData=n.getUserContextData()),n.client.request("RespondToAuthChallenge",g,(function(e,r){return e?t.onFailure(e):(n.signInUserSession=n.getCognitoUserSession(r.AuthenticationResult),n.cacheTokens(),t.onSuccess(n.signInUserSession))}))}))}))}))},t.prototype.confirmRegistration=function(t,e,n,r){var i={ClientId:this.pool.getClientId(),ConfirmationCode:t,Username:this.username,ForceAliasCreation:e,ClientMetadata:r};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",i,(function(t){return t?n(t,null):n(null,"SUCCESS")}))},t.prototype.sendCustomChallengeAnswer=function(t,e,n){var r=this,i={};i.USERNAME=this.username,i.ANSWER=t;var a=new E(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(i.DEVICE_KEY=this.deviceKey);var o={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:i,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:n};this.getUserContextData()&&(o.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",o,(function(t,n){return t?e.onFailure(t):r.authenticateUserInternal(n,a,e)}))},t.prototype.sendMFACode=function(t,e,n,r){var i=this,a={};a.USERNAME=this.username,a.SMS_MFA_CODE=t;var o=n||"SMS_MFA";"SOFTWARE_TOKEN_MFA"===o&&(a.SOFTWARE_TOKEN_MFA_CODE=t),null!=this.deviceKey&&(a.DEVICE_KEY=this.deviceKey);var c={ChallengeName:o,ChallengeResponses:a,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:r};this.getUserContextData()&&(c.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",c,(function(t,n){if(t)return e.onFailure(t);if("DEVICE_SRP_AUTH"!==n.ChallengeName){if(i.signInUserSession=i.getCognitoUserSession(n.AuthenticationResult),i.cacheTokens(),null==n.AuthenticationResult.NewDeviceMetadata)return e.onSuccess(i.signInUserSession);var r=new E(i.pool.getUserPoolId().split("_")[1]);r.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,(function(t){if(t)return e.onFailure(t);var a={Salt:s.Buffer.from(r.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:s.Buffer.from(r.getVerifierDevices(),"hex").toString("base64")};i.verifierDevices=a.PasswordVerifier,i.deviceGroupKey=n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,i.randomPassword=r.getRandomPassword(),i.client.request("ConfirmDevice",{DeviceKey:n.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:i.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:a,DeviceName:navigator.userAgent},(function(t,r){return t?e.onFailure(t):(i.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,i.cacheDeviceKeyAndPassword(),!0===r.UserConfirmationNecessary?e.onSuccess(i.signInUserSession,r.UserConfirmationNecessary):e.onSuccess(i.signInUserSession))}))}))}else i.getDeviceResponse(e)}))},t.prototype.changePassword=function(t,e,n,r){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:t,ProposedPassword:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:r},(function(t){return t?n(t,null):n(null,"SUCCESS")}))},t.prototype.enableMFA=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);var e=[];e.push({DeliveryMedium:"SMS",AttributeName:"phone_number"}),this.client.request("SetUserSettings",{MFAOptions:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e){return e?t(e,null):t(null,"SUCCESS")}))},t.prototype.setUserMfaPreference=function(t,e,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:t,SoftwareTokenMfaSettings:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t){return t?n(t,null):n(null,"SUCCESS")}))},t.prototype.disableMFA=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("SetUserSettings",{MFAOptions:[],AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e){return e?t(e,null):t(null,"SUCCESS")}))},t.prototype.deleteUser=function(t,e){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:e},(function(e){return e?t(e,null):(n.clearCachedUser(),t(null,"SUCCESS"))}))},t.prototype.updateAttributes=function(t,e,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:t,ClientMetadata:n},(function(t){return t?e(t,null):e(null,"SUCCESS")}))},t.prototype.getUserAttributes=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e,n){if(e)return t(e,null);for(var r=[],i=0;i<n.UserAttributes.length;i++){var a={Name:n.UserAttributes[i].Name,Value:n.UserAttributes[i].Value},o=new W(a);r.push(o)}return t(null,r)}))},t.prototype.getMFAOptions=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e,n){return e?t(e,null):t(null,n.MFAOptions)}))},t.prototype.getUserData=function(t,e){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return this.clearCachedUserData(),t(new Error("User is not authenticated"),null);var r=!!e&&e.bypassCache,i=this.storage.getItem(this.userDataKey);if(!i||r)this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e,r){if(e)return t(e,null);n.cacheUserData(r);var i=n.signInUserSession.getRefreshToken();if(!i||!i.getToken())return t(null,r);n.refreshSession(i,(function(e,n){return e?t(e,null):t(null,r)}))}));else try{return t(null,JSON.parse(i))}catch(e){return this.clearCachedUserData(),t(e,null)}},t.prototype.deleteAttributes=function(t,e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t){return t?e(t,null):e(null,"SUCCESS")}))},t.prototype.resendConfirmationCode=function(t,e){var n={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:e};this.client.request("ResendConfirmationCode",n,(function(e,n){return e?t(e,null):t(null,n)}))},t.prototype.getSession=function(t){if(null==this.username)return t(new Error("Username is null. Cannot retrieve a new session"),null);if(null!=this.signInUserSession&&this.signInUserSession.isValid())return t(null,this.signInUserSession);var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,n=e+".idToken",r=e+".accessToken",i=e+".refreshToken",a=e+".clockDrift";if(this.storage.getItem(n)){var o=new R({IdToken:this.storage.getItem(n)}),s=new P({AccessToken:this.storage.getItem(r)}),c=new F({RefreshToken:this.storage.getItem(i)}),u=parseInt(this.storage.getItem(a),0)||0,f=new H({IdToken:o,AccessToken:s,RefreshToken:c,ClockDrift:u});if(f.isValid())return this.signInUserSession=f,t(null,this.signInUserSession);if(!c.getToken())return t(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(c,t)}else t(new Error("Local storage is missing an ID Token, Please authenticate"),null)},t.prototype.refreshSession=function(t,e,n){var r=this,i={};i.REFRESH_TOKEN=t.getToken();var a="CognitoIdentityServiceProvider."+this.pool.getClientId(),o=a+".LastAuthUser";if(this.storage.getItem(o)){this.username=this.storage.getItem(o);var s=a+"."+this.username+".deviceKey";this.deviceKey=this.storage.getItem(s),i.DEVICE_KEY=this.deviceKey}var c={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:i,ClientMetadata:n};this.getUserContextData()&&(c.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",c,(function(n,i){if(n)return"NotAuthorizedException"===n.code&&r.clearCachedUser(),e(n,null);if(i){var a=i.AuthenticationResult;return Object.prototype.hasOwnProperty.call(a,"RefreshToken")||(a.RefreshToken=t.getToken()),r.signInUserSession=r.getCognitoUserSession(a),r.cacheTokens(),e(null,r.signInUserSession)}}))},t.prototype.cacheTokens=function(){var t="CognitoIdentityServiceProvider."+this.pool.getClientId(),e=t+"."+this.username+".idToken",n=t+"."+this.username+".accessToken",r=t+"."+this.username+".refreshToken",i=t+"."+this.username+".clockDrift",a=t+".LastAuthUser";this.storage.setItem(e,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(n,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(r,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(i,""+this.signInUserSession.getClockDrift()),this.storage.setItem(a,this.username)},t.prototype.cacheUserData=function(t){this.storage.setItem(this.userDataKey,JSON.stringify(t))},t.prototype.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},t.prototype.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},t.prototype.cacheDeviceKeyAndPassword=function(){var t="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,e=t+".deviceKey",n=t+".randomPasswordKey",r=t+".deviceGroupKey";this.storage.setItem(e,this.deviceKey),this.storage.setItem(n,this.randomPassword),this.storage.setItem(r,this.deviceGroupKey)},t.prototype.getCachedDeviceKeyAndPassword=function(){var t="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,e=t+".deviceKey",n=t+".randomPasswordKey",r=t+".deviceGroupKey";this.storage.getItem(e)&&(this.deviceKey=this.storage.getItem(e),this.randomPassword=this.storage.getItem(n),this.deviceGroupKey=this.storage.getItem(r))},t.prototype.clearCachedDeviceKeyAndPassword=function(){var t="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,e=t+".deviceKey",n=t+".randomPasswordKey",r=t+".deviceGroupKey";this.storage.removeItem(e),this.storage.removeItem(n),this.storage.removeItem(r)},t.prototype.clearCachedTokens=function(){var t="CognitoIdentityServiceProvider."+this.pool.getClientId(),e=t+"."+this.username+".idToken",n=t+"."+this.username+".accessToken",r=t+"."+this.username+".refreshToken",i=t+".LastAuthUser",a=t+"."+this.username+".clockDrift";this.storage.removeItem(e),this.storage.removeItem(n),this.storage.removeItem(r),this.storage.removeItem(i),this.storage.removeItem(a)},t.prototype.getCognitoUserSession=function(t){var e=new R(t),n=new P(t),r=new F(t);return new H({IdToken:e,AccessToken:n,RefreshToken:r})},t.prototype.forgotPassword=function(t,e){var n={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:e};this.getUserContextData()&&(n.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",n,(function(e,n){return e?t.onFailure(e):"function"==typeof t.inputVerificationCode?t.inputVerificationCode(n):t.onSuccess(n)}))},t.prototype.confirmPassword=function(t,e,n,r){var i={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:t,Password:e,ClientMetadata:r};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",i,(function(t){return t?n.onFailure(t):n.onSuccess()}))},t.prototype.getAttributeVerificationCode=function(t,e,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:n},(function(t,n){return t?e.onFailure(t):"function"==typeof e.inputVerificationCode?e.inputVerificationCode(n):e.onSuccess()}))},t.prototype.verifyAttribute=function(t,e,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:t,Code:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t){return t?n.onFailure(t):n.onSuccess("SUCCESS")}))},t.prototype.getDevice=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},(function(e,n){return e?t.onFailure(e):t.onSuccess(n)}))},t.prototype.forgetSpecificDevice=function(t,e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:t},(function(t){return t?e.onFailure(t):e.onSuccess("SUCCESS")}))},t.prototype.forgetDevice=function(t){var e=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:t.onFailure,onSuccess:function(n){return e.deviceKey=null,e.deviceGroupKey=null,e.randomPassword=null,e.clearCachedDeviceKeyAndPassword(),t.onSuccess(n)}})},t.prototype.setDeviceStatusRemembered=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},(function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")}))},t.prototype.setDeviceStatusNotRemembered=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},(function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")}))},t.prototype.listDevices=function(t,e,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("ListDevices",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:t,PaginationToken:e},(function(t,e){return t?n.onFailure(t):n.onSuccess(e)}))},t.prototype.globalSignOut=function(t){var e=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(n){return n?t.onFailure(n):(e.clearCachedUser(),t.onSuccess("SUCCESS"))}))},t.prototype.signOut=function(){this.signInUserSession=null,this.clearCachedUser()},t.prototype.sendMFASelectionAnswer=function(t,e){var n=this,r={};r.USERNAME=this.username,r.ANSWER=t;var i={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:r,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",i,(function(r,i){return r?e.onFailure(r):(n.Session=i.Session,"SMS_MFA"===t?e.mfaRequired(i.challengeName,i.challengeParameters):"SOFTWARE_TOKEN_MFA"===t?e.totpRequired(i.challengeName,i.challengeParameters):void 0)}))},t.prototype.getUserContextData=function(){return this.pool.getUserContextData(this.username)},t.prototype.associateSoftwareToken=function(t){var e=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e,n){return e?t.onFailure(e):t.associateSecretCode(n.SecretCode)})):this.client.request("AssociateSoftwareToken",{Session:this.Session},(function(n,r){return n?t.onFailure(n):(e.Session=r.Session,t.associateSecretCode(r.SecretCode))}))},t.prototype.verifySoftwareToken=function(t,e,n){var r=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:t,FriendlyDeviceName:e},(function(t,e){return t?n.onFailure(t):n.onSuccess(e)})):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:t,FriendlyDeviceName:e},(function(t,e){if(t)return n.onFailure(t);r.Session=e.Session;var i={};i.USERNAME=r.username;var a={ChallengeName:"MFA_SETUP",ClientId:r.pool.getClientId(),ChallengeResponses:i,Session:r.Session};r.getUserContextData()&&(a.UserContextData=r.getUserContextData()),r.client.request("RespondToAuthChallenge",a,(function(t,e){return t?n.onFailure(t):(r.signInUserSession=r.getCognitoUserSession(e.AuthenticationResult),r.cacheTokens(),n.onSuccess(r.signInUserSession))}))}))},t}(),Q=tt;function tt(){}tt.prototype.userAgent="aws-amplify/0.1.x js";var et=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.endpoint=n||"https://cognito-idp."+e+".amazonaws.com/",this.userAgent=Q.prototype.userAgent||"aws-amplify/0.1.x js"}return t.prototype.request=function(t,e,n){var r={headers:{"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+t,"X-Amz-User-Agent":this.userAgent},method:"POST",mode:"cors",cache:"no-cache",body:JSON.stringify(e)},i=void 0;fetch(this.endpoint,r).then((function(t){return i=t,t}),(function(t){if(t instanceof TypeError)throw new Error("Network error");throw t})).then((function(t){return t.json().catch((function(){return{}}))})).then((function(t){if(i.ok)return n(null,t);t;var e=(t.__type||t.code).split("#").pop(),r={code:e,name:e,message:t.message||t.Message||null};return n(r)})).catch((function(t){if(!(i&&i.headers&&i.headers.get("x-amzn-errortype"))){if(t instanceof Error&&"Network error"===t.message){var e={code:"NetworkError",name:t.name,message:t.message};return n(e)}return n(t)}try{var r=i.headers.get("x-amzn-errortype").split(":")[0],a={code:r,name:r,statusCode:i.status,message:i.status?i.status.toString():null};return n(a)}catch(e){return n(t)}}))},t}();
/*!
 * Copyright 2016 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */
var nt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e||{},r=n.UserPoolId,i=n.ClientId,a=n.endpoint,o=n.AdvancedSecurityDataCollectionFlag;if(!r||!i)throw new Error("Both UserPoolId and ClientId are required.");if(!/^[\w-]+_.+$/.test(r))throw new Error("Invalid UserPoolId format.");var s=r.split("_")[0];this.userPoolId=r,this.clientId=i,this.client=new et(s,a),this.advancedSecurityDataCollectionFlag=!1!==o,this.storage=e.Storage||(new J).getStorage()}return t.prototype.getUserPoolId=function(){return this.userPoolId},t.prototype.getClientId=function(){return this.clientId},t.prototype.signUp=function(t,e,n,r,i,a){var o=this,s={ClientId:this.clientId,Username:t,Password:e,UserAttributes:n,ValidationData:r,ClientMetadata:a};this.getUserContextData(t)&&(s.UserContextData=this.getUserContextData(t)),this.client.request("SignUp",s,(function(e,n){if(e)return i(e,null);var r={Username:t,Pool:o,Storage:o.storage},a={user:new Z(r),userConfirmed:n.UserConfirmed,userSub:n.UserSub,codeDeliveryDetails:n.CodeDeliveryDetails};return i(null,a)}))},t.prototype.getCurrentUser=function(){var t="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser",e=this.storage.getItem(t);if(e){var n={Username:e,Pool:this,Storage:this.storage};return new Z(n)}return null},t.prototype.getUserContextData=function(t){if("undefined"!=typeof AmazonCognitoAdvancedSecurityData){var e=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){var n=e.getData(t,this.userPoolId,this.clientId);if(n)return{EncodedData:n}}return{}}},t}(),rt=n(3);!function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e.domain)throw new Error("The domain of cookieStorage can not be undefined.");this.domain=e.domain,e.path?this.path=e.path:this.path="/",Object.prototype.hasOwnProperty.call(e,"expires")?this.expires=e.expires:this.expires=365,Object.prototype.hasOwnProperty.call(e,"secure")?this.secure=e.secure:this.secure=!0}t.prototype.setItem=function(t,e){return rt.set(t,e,{path:this.path,expires:this.expires,domain:this.domain,secure:this.secure}),rt.get(t)},t.prototype.getItem=function(t){return rt.get(t)},t.prototype.removeItem=function(t){return rt.remove(t,{path:this.path,domain:this.domain,secure:this.secure})},t.prototype.clear=function(){var t=rt.get(),e=void 0;for(e=0;e<t.length;++e)rt.remove(t[e]);return{}}}();var it=n(21),at=n.n(it);const ot=function(t,e,n){var r;function i(){var i,a;n.userAgent.match(/ipad|iphone/i)?((i=e.createRange()).selectNodeContents(r),(a=t.getSelection()).removeAllRanges(),a.addRange(i),r.setSelectionRange(0,999999)):r.select()}return{copy:function(t){!function(t){(r=e.createElement("textArea")).value=t,e.body.appendChild(r)}(t),i(),e.execCommand("copy"),e.body.removeChild(r)}}}(window,document,navigator);var st=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},ct=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return st(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}};var ut=ct(st),ft=ut.right,lt=(ut.left,ft);var ht=function(t,e){var n,r,i,a=t.length,o=-1;if(null==e){for(;++o<a;)if(null!=(n=t[o])&&n>=n)for(r=i=n;++o<a;)null!=(n=t[o])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++o<a;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=i=n;++o<a;)null!=(n=e(t[o],o,t))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]},dt=Array.prototype,pt=(dt.slice,dt.map,function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a}),gt=Math.sqrt(50),mt=Math.sqrt(10),vt=Math.sqrt(2),yt=function(t,e,n){var r,i,a,o,s=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(o=bt(t,e,n))||!isFinite(o))return[];if(o>0)for(t=Math.ceil(t/o),e=Math.floor(e/o),a=new Array(i=Math.ceil(e-t+1));++s<i;)a[s]=(t+s)*o;else for(t=Math.floor(t*o),e=Math.ceil(e*o),a=new Array(i=Math.ceil(t-e+1));++s<i;)a[s]=(t-s)/o;return r&&a.reverse(),a};function bt(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=gt?10:a>=mt?5:a>=vt?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=gt?10:a>=mt?5:a>=vt?2:1)}function wt(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=gt?i*=10:a>=mt?i*=5:a>=vt&&(i*=2),e<t?-i:i}var _t=function(t,e){var n,r,i=t.length,a=-1;if(null==e){for(;++a<i;)if(null!=(n=t[a])&&n>=n)for(r=n;++a<i;)null!=(n=t[a])&&n>r&&(r=n)}else for(;++a<i;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=n;++a<i;)null!=(n=e(t[a],a,t))&&n>r&&(r=n);return r},xt=function(t,e){var n,r,i=t.length,a=-1;if(null==e){for(;++a<i;)if(null!=(n=t[a])&&n>=n)for(r=n;++a<i;)null!=(n=t[a])&&r>n&&(r=n)}else for(;++a<i;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=n;++a<i;)null!=(n=e(t[a],a,t))&&r>n&&(r=n);return r};var Ct=Array.prototype.slice,At=function(t){return t};function St(t){return"translate("+(t+.5)+",0)"}function Tt(t){return"translate(0,"+(t+.5)+")"}function Mt(t){return function(e){return+t(e)}}function Et(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function kt(){return!this.__axis}function Ut(t,e){var n=[],r=null,i=null,a=6,o=6,s=3,c=1===t||4===t?-1:1,u=4===t||2===t?"x":"y",f=1===t||3===t?St:Tt;function l(l){var h=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,d=null==i?e.tickFormat?e.tickFormat.apply(e,n):At:i,p=Math.max(a,0)+s,g=e.range(),m=+g[0]+.5,v=+g[g.length-1]+.5,y=(e.bandwidth?Et:Mt)(e.copy()),b=l.selection?l.selection():l,w=b.selectAll(".domain").data([null]),_=b.selectAll(".tick").data(h,e).order(),x=_.exit(),C=_.enter().append("g").attr("class","tick"),A=_.select("line"),S=_.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),_=_.merge(C),A=A.merge(C.append("line").attr("stroke","currentColor").attr(u+"2",c*a)),S=S.merge(C.append("text").attr("fill","currentColor").attr(u,c*p).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),l!==b&&(w=w.transition(l),_=_.transition(l),A=A.transition(l),S=S.transition(l),x=x.transition(l).attr("opacity",1e-6).attr("transform",(function(t){return isFinite(t=y(t))?f(t):this.getAttribute("transform")})),C.attr("opacity",1e-6).attr("transform",(function(t){var e=this.parentNode.__axis;return f(e&&isFinite(e=e(t))?e:y(t))}))),x.remove(),w.attr("d",4===t||2==t?o?"M"+c*o+","+m+"H0.5V"+v+"H"+c*o:"M0.5,"+m+"V"+v:o?"M"+m+","+c*o+"V0.5H"+v+"V"+c*o:"M"+m+",0.5H"+v),_.attr("opacity",1).attr("transform",(function(t){return f(y(t))})),A.attr(u+"2",c*a),S.attr(u,c*p).text(d),b.filter(kt).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),b.each((function(){this.__axis=y}))}return l.scale=function(t){return arguments.length?(e=t,l):e},l.ticks=function(){return n=Ct.call(arguments),l},l.tickArguments=function(t){return arguments.length?(n=null==t?[]:Ct.call(t),l):n.slice()},l.tickValues=function(t){return arguments.length?(r=null==t?null:Ct.call(t),l):r&&r.slice()},l.tickFormat=function(t){return arguments.length?(i=t,l):i},l.tickSize=function(t){return arguments.length?(a=o=+t,l):a},l.tickSizeInner=function(t){return arguments.length?(a=+t,l):a},l.tickSizeOuter=function(t){return arguments.length?(o=+t,l):o},l.tickPadding=function(t){return arguments.length?(s=+t,l):s},l}function Dt(t){return Ut(3,t)}function Pt(t){return Ut(4,t)}var It={value:function(){}};function Nt(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Rt(r)}function Rt(t){this._=t}function Bt(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function Ft(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function Ot(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=It,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Rt.prototype=Nt.prototype={constructor:Rt,on:function(t,e){var n,r=this._,i=Bt(t+"",r),a=-1,o=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<o;)if(n=(t=i[a]).type)r[n]=Ot(r[n],t.name,e);else if(null==e)for(n in r)r[n]=Ot(r[n],t.name,null);return this}for(;++a<o;)if((n=(t=i[a]).type)&&(n=Ft(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Rt(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(r=this._[t]).length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};var Lt=Nt;function Vt(){}var Ht=function(t){return null==t?Vt:function(){return this.querySelector(t)}};function zt(){return[]}var $t=function(t){return null==t?zt:function(){return this.querySelectorAll(t)}},Yt=function(t){return function(){return this.matches(t)}},jt=function(t){return new Array(t.length)};function qt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}qt.prototype={constructor:qt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Wt(t,e,n,r,i,a){for(var o,s=0,c=e.length,u=a.length;s<u;++s)(o=e[s])?(o.__data__=a[s],r[s]=o):n[s]=new qt(t,a[s]);for(;s<c;++s)(o=e[s])&&(i[s]=o)}function Kt(t,e,n,r,i,a,o){var s,c,u,f={},l=e.length,h=a.length,d=new Array(l);for(s=0;s<l;++s)(c=e[s])&&(d[s]=u="$"+o.call(c,c.__data__,s,e),u in f?i[s]=c:f[u]=c);for(s=0;s<h;++s)(c=f[u="$"+o.call(t,a[s],s,a)])?(r[s]=c,c.__data__=a[s],f[u]=null):n[s]=new qt(t,a[s]);for(s=0;s<l;++s)(c=e[s])&&f[d[s]]===c&&(i[s]=c)}function Gt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var Xt="http://www.w3.org/1999/xhtml",Jt={svg:"http://www.w3.org/2000/svg",xhtml:Xt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Zt=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Jt.hasOwnProperty(e)?{space:Jt[e],local:t}:t};function Qt(t){return function(){this.removeAttribute(t)}}function te(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ee(t,e){return function(){this.setAttribute(t,e)}}function ne(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function re(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function ie(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}var ae=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function oe(t){return function(){this.style.removeProperty(t)}}function se(t,e,n){return function(){this.style.setProperty(t,e,n)}}function ce(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function ue(t,e){return t.style.getPropertyValue(e)||ae(t).getComputedStyle(t,null).getPropertyValue(e)}function fe(t){return function(){delete this[t]}}function le(t,e){return function(){this[t]=e}}function he(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function de(t){return t.trim().split(/^|\s+/)}function pe(t){return t.classList||new ge(t)}function ge(t){this._node=t,this._names=de(t.getAttribute("class")||"")}function me(t,e){for(var n=pe(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function ve(t,e){for(var n=pe(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function ye(t){return function(){me(this,t)}}function be(t){return function(){ve(this,t)}}function we(t,e){return function(){(e.apply(this,arguments)?me:ve)(this,t)}}ge.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function _e(){this.textContent=""}function xe(t){return function(){this.textContent=t}}function Ce(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Ae(){this.innerHTML=""}function Se(t){return function(){this.innerHTML=t}}function Te(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Me(){this.nextSibling&&this.parentNode.appendChild(this)}function Ee(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ke(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Xt&&e.documentElement.namespaceURI===Xt?e.createElement(t):e.createElementNS(n,t)}}function Ue(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}var De=function(t){var e=Zt(t);return(e.local?Ue:ke)(e)};function Pe(){return null}function Ie(){var t=this.parentNode;t&&t.removeChild(this)}function Ne(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Re(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}var Be={},Fe=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(Be={mouseenter:"mouseover",mouseleave:"mouseout"}));function Oe(t,e,n){return t=Le(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function Le(t,e,n){return function(r){var i=Fe;Fe=r;try{t.call(this,this.__data__,e,n)}finally{Fe=i}}}function Ve(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function He(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,a=e.length;r<a;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function ze(t,e,n){var r=Be.hasOwnProperty(t.type)?Oe:Le;return function(i,a,o){var s,c=this.__on,u=r(e,a,o);if(c)for(var f=0,l=c.length;f<l;++f)if((s=c[f]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=u,s.capture=n),void(s.value=e);this.addEventListener(t.type,u,n),s={type:t.type,name:t.name,value:e,listener:u,capture:n},c?c.push(s):this.__on=[s]}}function $e(t,e,n,r){var i=Fe;t.sourceEvent=Fe,Fe=t;try{return e.apply(n,r)}finally{Fe=i}}function Ye(t,e,n){var r=ae(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function je(t,e){return function(){return Ye(this,t,e)}}function qe(t,e){return function(){return Ye(this,t,e.apply(this,arguments))}}var We=[null];function Ke(t,e){this._groups=t,this._parents=e}function Ge(){return new Ke([[document.documentElement]],We)}Ke.prototype=Ge.prototype={constructor:Ke,select:function(t){"function"!=typeof t&&(t=Ht(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o,s=e[i],c=s.length,u=r[i]=new Array(c),f=0;f<c;++f)(a=s[f])&&(o=t.call(a,a.__data__,f,s))&&("__data__"in a&&(o.__data__=a.__data__),u[f]=o);return new Ke(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=$t(t));for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o,s=e[a],c=s.length,u=0;u<c;++u)(o=s[u])&&(r.push(t.call(o,o.__data__,u,s)),i.push(o));return new Ke(r,i)},filter:function(t){"function"!=typeof t&&(t=Yt(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],s=o.length,c=r[i]=[],u=0;u<s;++u)(a=o[u])&&t.call(a,a.__data__,u,o)&&c.push(a);return new Ke(r,this._parents)},data:function(t,e){if(!t)return p=new Array(this.size()),f=-1,this.each((function(t){p[++f]=t})),p;var n,r=e?Kt:Wt,i=this._parents,a=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=a.length,s=new Array(o),c=new Array(o),u=new Array(o),f=0;f<o;++f){var l=i[f],h=a[f],d=h.length,p=t.call(l,l&&l.__data__,f,i),g=p.length,m=c[f]=new Array(g),v=s[f]=new Array(g);r(l,h,m,v,u[f]=new Array(d),p,e);for(var y,b,w=0,_=0;w<g;++w)if(y=m[w]){for(w>=_&&(_=w+1);!(b=v[_])&&++_<g;);y._next=b||null}}return(s=new Ke(s,i))._enter=c,s._exit=u,s},enter:function(){return new Ke(this._enter||this._groups.map(jt),this._parents)},exit:function(){return new Ke(this._exit||this._groups.map(jt),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,a=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var c,u=e[s],f=n[s],l=u.length,h=o[s]=new Array(l),d=0;d<l;++d)(c=u[d]||f[d])&&(h[d]=c);for(;s<r;++s)o[s]=e[s];return new Ke(o,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=Gt);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,s=n[a],c=s.length,u=i[a]=new Array(c),f=0;f<c;++f)(o=s[f])&&(u[f]=o);u.sort(e)}return new Ke(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,a=e[n],o=0,s=a.length;o<s;++o)(i=a[o])&&t.call(i,i.__data__,o,a);return this},attr:function(t,e){var n=Zt(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?te:Qt:"function"==typeof e?n.local?ie:re:n.local?ne:ee)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?oe:"function"==typeof e?ce:se)(t,e,null==n?"":n)):ue(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?fe:"function"==typeof e?he:le)(t,e)):this.node()[t]},classed:function(t,e){var n=de(t+"");if(arguments.length<2){for(var r=pe(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?we:e?ye:be)(n,e))},text:function(t){return arguments.length?this.each(null==t?_e:("function"==typeof t?Ce:xe)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Ae:("function"==typeof t?Te:Se)(t)):this.node().innerHTML},raise:function(){return this.each(Me)},lower:function(){return this.each(Ee)},append:function(t){var e="function"==typeof t?t:De(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:De(t),r=null==e?Pe:"function"==typeof e?e:Ht(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Ie)},clone:function(t){return this.select(t?Re:Ne)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,a=Ve(t+""),o=a.length;if(!(arguments.length<2)){for(s=e?ze:He,null==n&&(n=!1),r=0;r<o;++r)this.each(s(a[r],e,n));return this}var s=this.node().__on;if(s)for(var c,u=0,f=s.length;u<f;++u)for(r=0,c=s[u];r<o;++r)if((i=a[r]).type===c.type&&i.name===c.name)return c.value},dispatch:function(t,e){return this.each(("function"==typeof e?qe:je)(t,e))}};var Xe=Ge,Je=function(t){return"string"==typeof t?new Ke([[document.querySelector(t)]],[document.documentElement]):new Ke([[t]],We)};var Ze=function(){Fe.preventDefault(),Fe.stopImmediatePropagation()},Qe=function(t){var e=t.document.documentElement,n=Je(t).on("dragstart.drag",Ze,!0);"onselectstart"in e?n.on("selectstart.drag",Ze,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")};function tn(t,e){var n=t.document.documentElement,r=Je(t).on("dragstart.drag",null);e&&(r.on("click.drag",Ze,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var en=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function nn(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function rn(){}var an="\\s*([+-]?\\d+)\\s*",on="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",sn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",cn=/^#([0-9a-f]{3,8})$/,un=new RegExp("^rgb\\("+[an,an,an]+"\\)$"),fn=new RegExp("^rgb\\("+[sn,sn,sn]+"\\)$"),ln=new RegExp("^rgba\\("+[an,an,an,on]+"\\)$"),hn=new RegExp("^rgba\\("+[sn,sn,sn,on]+"\\)$"),dn=new RegExp("^hsl\\("+[on,sn,sn]+"\\)$"),pn=new RegExp("^hsla\\("+[on,sn,sn,on]+"\\)$"),gn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function mn(){return this.rgb().formatHex()}function vn(){return this.rgb().formatRgb()}function yn(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=cn.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?bn(e):3===n?new Cn(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?wn(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?wn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=un.exec(t))?new Cn(e[1],e[2],e[3],1):(e=fn.exec(t))?new Cn(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=ln.exec(t))?wn(e[1],e[2],e[3],e[4]):(e=hn.exec(t))?wn(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=dn.exec(t))?Mn(e[1],e[2]/100,e[3]/100,1):(e=pn.exec(t))?Mn(e[1],e[2]/100,e[3]/100,e[4]):gn.hasOwnProperty(t)?bn(gn[t]):"transparent"===t?new Cn(NaN,NaN,NaN,0):null}function bn(t){return new Cn(t>>16&255,t>>8&255,255&t,1)}function wn(t,e,n,r){return r<=0&&(t=e=n=NaN),new Cn(t,e,n,r)}function _n(t){return t instanceof rn||(t=yn(t)),t?new Cn((t=t.rgb()).r,t.g,t.b,t.opacity):new Cn}function xn(t,e,n,r){return 1===arguments.length?_n(t):new Cn(t,e,n,null==r?1:r)}function Cn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function An(){return"#"+Tn(this.r)+Tn(this.g)+Tn(this.b)}function Sn(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Tn(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Mn(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new kn(t,e,n,r)}function En(t){if(t instanceof kn)return new kn(t.h,t.s,t.l,t.opacity);if(t instanceof rn||(t=yn(t)),!t)return new kn;if(t instanceof kn)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,c=(a+i)/2;return s?(o=e===a?(n-r)/s+6*(n<r):n===a?(r-e)/s+2:(e-n)/s+4,s/=c<.5?a+i:2-a-i,o*=60):s=c>0&&c<1?0:o,new kn(o,s,c,t.opacity)}function kn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Un(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Dn(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}en(rn,yn,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:mn,formatHex:mn,formatHsl:function(){return En(this).formatHsl()},formatRgb:vn,toString:vn}),en(Cn,xn,nn(rn,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Cn(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Cn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:An,formatHex:An,formatRgb:Sn,toString:Sn})),en(kn,(function(t,e,n,r){return 1===arguments.length?En(t):new kn(t,e,n,null==r?1:r)}),nn(rn,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new kn(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new kn(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Cn(Un(t>=240?t-240:t+120,i,r),Un(t,i,r),Un(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var Pn=function(t){return function(){return t}};function In(t,e){return function(n){return t+n*e}}function Nn(t){return 1==(t=+t)?Rn:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Pn(isNaN(e)?n:e)}}function Rn(t,e){var n=e-t;return n?In(t,n):Pn(isNaN(t)?e:t)}var Bn=function t(e){var n=Nn(e);function r(t,e){var r=n((t=xn(t)).r,(e=xn(e)).r),i=n(t.g,e.g),a=n(t.b,e.b),o=Rn(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=a(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);function Fn(t){return function(e){var n,r,i=e.length,a=new Array(i),o=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=xn(e[n]),a[n]=r.r||0,o[n]=r.g||0,s[n]=r.b||0;return a=t(a),o=t(o),s=t(s),r.opacity=1,function(t){return r.r=a(t),r.g=o(t),r.b=s(t),r+""}}}Fn((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,s=r<e-1?t[r+2]:2*a-i;return Dn((n-r/e)*e,o,i,a,s)}})),Fn((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],a=t[r%e],o=t[(r+1)%e],s=t[(r+2)%e];return Dn((n-r/e)*e,i,a,o,s)}}));var On=function(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(a){for(n=0;n<r;++n)i[n]=t[n]*(1-a)+e[n]*a;return i}};function Ln(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Vn(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=Gn(t[n],e[n]);for(;n<r;++n)o[n]=e[n];return function(t){for(n=0;n<i;++n)o[n]=a[n](t);return o}}var Hn=function(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}},zn=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}},$n=function(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=Gn(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},Yn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jn=new RegExp(Yn.source,"g");var qn,Wn,Kn=function(t,e){var n,r,i,a=Yn.lastIndex=jn.lastIndex=0,o=-1,s=[],c=[];for(t+="",e+="";(n=Yn.exec(t))&&(r=jn.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,c.push({i:o,x:zn(n,r)})),a=jn.lastIndex;return a<e.length&&(i=e.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?c[0]?function(t){return function(e){return t(e)+""}}(c[0].x):function(t){return function(){return t}}(e):(e=c.length,function(t){for(var n,r=0;r<e;++r)s[(n=c[r]).i]=n.x(t);return s.join("")})},Gn=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?Pn(e):("number"===r?zn:"string"===r?(n=yn(e))?(e=n,Bn):Kn:e instanceof yn?Bn:e instanceof Date?Hn:Ln(e)?On:Array.isArray(e)?Vn:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?$n:zn)(t,e)},Xn=function(){for(var t,e=Fe;t=e.sourceEvent;)e=t;return e},Jn=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]},Zn=function(t,e,n){arguments.length<3&&(n=e,e=Xn().changedTouches);for(var r,i=0,a=e?e.length:0;i<a;++i)if((r=e[i]).identifier===n)return Jn(t,r);return null},Qn=function(t){var e=Xn();return e.changedTouches&&(e=e.changedTouches[0]),Jn(t,e)},tr=0,er=0,nr=0,rr=0,ir=0,ar=0,or="object"==typeof performance&&performance.now?performance:Date,sr="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function cr(){return ir||(sr(ur),ir=or.now()+ar)}function ur(){ir=0}function fr(){this._call=this._time=this._next=null}function lr(t,e,n){var r=new fr;return r.restart(t,e,n),r}function hr(){ir=(rr=or.now())+ar,tr=er=0;try{!function(){cr(),++tr;for(var t,e=qn;e;)(t=ir-e._time)>=0&&e._call.call(null,t),e=e._next;--tr}()}finally{tr=0,function(){var t,e,n=qn,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:qn=e);Wn=t,pr(r)}(),ir=0}}function dr(){var t=or.now(),e=t-rr;e>1e3&&(ar-=e,rr=t)}function pr(t){tr||(er&&(er=clearTimeout(er)),t-ir>24?(t<1/0&&(er=setTimeout(hr,t-or.now()-ar)),nr&&(nr=clearInterval(nr))):(nr||(rr=or.now(),nr=setInterval(dr,1e3)),tr=1,sr(hr)))}fr.prototype=lr.prototype={constructor:fr,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?cr():+n)+(null==e?0:+e),this._next||Wn===this||(Wn?Wn._next=this:qn=this,Wn=this),this._call=t,this._time=n,pr()},stop:function(){this._call&&(this._call=null,this._time=1/0,pr())}};var gr=function(t,e,n){var r=new fr;return e=null==e?0:+e,r.restart((function(n){r.stop(),t(n+e)}),e,n),r},mr=Lt("start","end","cancel","interrupt"),vr=[],yr=function(t,e,n,r,i,a){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function a(c){var u,f,l,h;if(1!==n.state)return s();for(u in i)if((h=i[u]).name===n.name){if(3===h.state)return gr(a);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[u]):+u<e&&(h.state=6,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[u])}if(gr((function(){3===n.state&&(n.state=4,n.timer.restart(o,n.delay,n.time),o(c))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(l=n.tween.length),u=0,f=-1;u<l;++u)(h=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++f]=h);r.length=f+1}}function o(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=5,1),a=-1,o=r.length;++a<o;)r[a].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=lr((function(t){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)}),0,n.time)}(t,n,{name:e,index:r,group:i,on:mr,tween:vr,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})};function br(t,e){var n=_r(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function wr(t,e){var n=_r(t,e);if(n.state>3)throw new Error("too late; already running");return n}function _r(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}var xr,Cr,Ar,Sr,Tr=function(t,e){var n,r,i,a=t.__transition,o=!0;if(a){for(i in e=null==e?null:e+"",a)(n=a[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete a[i]):o=!1;o&&delete t.__transition}},Mr=180/Math.PI,Er={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},kr=function(t,e,n,r,i,a){var o,s,c;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),t*r<e*n&&(t=-t,e=-e,c=-c,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Mr,skewX:Math.atan(c)*Mr,scaleX:o,scaleY:s}};function Ur(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(a,o){var s=[],c=[];return a=t(a),o=t(o),function(t,r,i,a,o,s){if(t!==i||r!==a){var c=o.push("translate(",null,e,null,n);s.push({i:c-4,x:zn(t,i)},{i:c-2,x:zn(r,a)})}else(i||a)&&o.push("translate("+i+e+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,s,c),function(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:zn(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(a.rotate,o.rotate,s,c),function(t,e,n,a){t!==e?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:zn(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(a.skewX,o.skewX,s,c),function(t,e,n,r,a,o){if(t!==n||e!==r){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:zn(t,n)},{i:s-2,x:zn(e,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,s,c),a=o=null,function(t){for(var e,n=-1,r=c.length;++n<r;)s[(e=c[n]).i]=e.x(t);return s.join("")}}}var Dr=Ur((function(t){return"none"===t?Er:(xr||(xr=document.createElement("DIV"),Cr=document.documentElement,Ar=document.defaultView),xr.style.transform=t,t=Ar.getComputedStyle(Cr.appendChild(xr),null).getPropertyValue("transform"),Cr.removeChild(xr),t=t.slice(7,-1).split(","),kr(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),Pr=Ur((function(t){return null==t?Er:(Sr||(Sr=document.createElementNS("http://www.w3.org/2000/svg","g")),Sr.setAttribute("transform",t),(t=Sr.transform.baseVal.consolidate())?(t=t.matrix,kr(t.a,t.b,t.c,t.d,t.e,t.f)):Er)}),", ",")",")");function Ir(t,e){var n,r;return function(){var i=wr(this,t),a=i.tween;if(a!==n)for(var o=0,s=(r=n=a).length;o<s;++o)if(r[o].name===e){(r=r.slice()).splice(o,1);break}i.tween=r}}function Nr(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var a=wr(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:e,value:n},c=0,u=i.length;c<u;++c)if(i[c].name===e){i[c]=s;break}c===u&&i.push(s)}a.tween=i}}function Rr(t,e,n){var r=t._id;return t.each((function(){var t=wr(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return _r(t,r).value[e]}}var Br=function(t,e){var n;return("number"==typeof e?zn:e instanceof yn?Bn:(n=yn(e))?(e=n,Bn):Kn)(t,e)};function Fr(t){return function(){this.removeAttribute(t)}}function Or(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Lr(t,e,n){var r,i,a=n+"";return function(){var o=this.getAttribute(t);return o===a?null:o===r?i:i=e(r=o,n)}}function Vr(t,e,n){var r,i,a=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===a?null:o===r?i:i=e(r=o,n)}}function Hr(t,e,n){var r,i,a;return function(){var o,s,c=n(this);if(null!=c)return(o=this.getAttribute(t))===(s=c+"")?null:o===r&&s===i?a:(i=s,a=e(r=o,c));this.removeAttribute(t)}}function zr(t,e,n){var r,i,a;return function(){var o,s,c=n(this);if(null!=c)return(o=this.getAttributeNS(t.space,t.local))===(s=c+"")?null:o===r&&s===i?a:(i=s,a=e(r=o,c));this.removeAttributeNS(t.space,t.local)}}function $r(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Yr(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function jr(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Yr(t,i)),n}return i._value=e,i}function qr(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&$r(t,i)),n}return i._value=e,i}function Wr(t,e){return function(){br(this,t).delay=+e.apply(this,arguments)}}function Kr(t,e){return e=+e,function(){br(this,t).delay=e}}function Gr(t,e){return function(){wr(this,t).duration=+e.apply(this,arguments)}}function Xr(t,e){return e=+e,function(){wr(this,t).duration=e}}function Jr(t,e){if("function"!=typeof e)throw new Error;return function(){wr(this,t).ease=e}}function Zr(t,e,n){var r,i,a=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?br:wr;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(e,n),o.on=i}}var Qr=Xe.prototype.constructor;function ti(t){return function(){this.style.removeProperty(t)}}function ei(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function ni(t,e,n){var r,i;function a(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&ei(t,a,n)),r}return a._value=e,a}function ri(t){return function(e){this.textContent=t.call(this,e)}}function ii(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&ri(r)),e}return r._value=t,r}var ai=0;function oi(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function si(){return++ai}var ci=Xe.prototype;oi.prototype=function(t){return Xe().transition(t)}.prototype={constructor:oi,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Ht(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s,c,u=r[o],f=u.length,l=a[o]=new Array(f),h=0;h<f;++h)(s=u[h])&&(c=t.call(s,s.__data__,h,u))&&("__data__"in s&&(c.__data__=s.__data__),l[h]=c,yr(l[h],e,n,h,l,_r(s,n)));return new oi(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=$t(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var c,u=r[s],f=u.length,l=0;l<f;++l)if(c=u[l]){for(var h,d=t.call(c,c.__data__,l,u),p=_r(c,n),g=0,m=d.length;g<m;++g)(h=d[g])&&yr(h,e,n,g,d,p);a.push(d),o.push(c)}return new oi(a,o,e,n)},filter:function(t){"function"!=typeof t&&(t=Yt(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],s=o.length,c=r[i]=[],u=0;u<s;++u)(a=o[u])&&t.call(a,a.__data__,u,o)&&c.push(a);return new oi(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var c,u=e[s],f=n[s],l=u.length,h=o[s]=new Array(l),d=0;d<l;++d)(c=u[d]||f[d])&&(h[d]=c);for(;s<r;++s)o[s]=e[s];return new oi(o,this._parents,this._name,this._id)},selection:function(){return new Qr(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=si(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],c=s.length,u=0;u<c;++u)if(o=s[u]){var f=_r(o,e);yr(o,t,n,u,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new oi(r,this._parents,t,n)},call:ci.call,nodes:ci.nodes,node:ci.node,size:ci.size,empty:ci.empty,each:ci.each,on:function(t,e){var n=this._id;return arguments.length<2?_r(this.node(),n).on.on(t):this.each(Zr(n,t,e))},attr:function(t,e){var n=Zt(t),r="transform"===n?Pr:Br;return this.attrTween(t,"function"==typeof e?(n.local?zr:Hr)(n,r,Rr(this,"attr."+t,e)):null==e?(n.local?Or:Fr)(n):(n.local?Vr:Lr)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=Zt(t);return this.tween(n,(r.local?jr:qr)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?Dr:Br;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var a=ue(this,t),o=(this.style.removeProperty(t),ue(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}(t,r)).on("end.style."+t,ti(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,a;return function(){var o=ue(this,t),s=n(this),c=s+"";return null==s&&(this.style.removeProperty(t),c=s=ue(this,t)),o===c?null:o===r&&c===i?a:(i=c,a=e(r=o,s))}}(t,r,Rr(this,"style."+t,e))).each(function(t,e){var n,r,i,a,o="style."+e,s="end."+o;return function(){var c=wr(this,t),u=c.on,f=null==c.value[o]?a||(a=ti(e)):void 0;u===n&&i===f||(r=(n=u).copy()).on(s,i=f),c.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,a=n+"";return function(){var o=ue(this,t);return o===a?null:o===r?i:i=e(r=o,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,ni(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Rr(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,ii(t))},remove:function(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}));var t},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=_r(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===t)return r.value;return null}return this.each((null==e?Ir:Nr)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Wr:Kr)(e,t)):_r(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Gr:Xr)(e,t)):_r(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(Jr(e,t)):_r(this.node(),e).ease},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(a,o){var s={value:o},c={value:function(){0==--i&&a()}};n.each((function(){var n=wr(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(c)),n.on=e}))}))}};var ui={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function fi(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return ui.time=cr(),ui;return n}Xe.prototype.interrupt=function(t){return this.each((function(){Tr(this,t)}))},Xe.prototype.transition=function(t){var e,n;t instanceof oi?(e=t._id,t=t._name):(e=si(),(n=ui).time=cr(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],c=s.length,u=0;u<c;++u)(o=s[u])&&yr(o,t,e,u,s,n||fi(o,e));return new oi(r,this._parents,t,e)};function li(t){return[+t[0],+t[1]]}function hi(t){return[li(t[0]),li(t[1])]}["w","e"].map(di),["n","s"].map(di),["n","w","e","s","nw","ne","sw","se"].map(di);function di(t){return{type:t}}Math.cos,Math.sin,Math.PI,Math.max;Array.prototype.slice;var pi=Math.PI,gi=2*pi,mi=gi-1e-6;function vi(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function yi(){return new vi}vi.prototype=yi.prototype={constructor:vi,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,s=n-t,c=r-e,u=a-t,f=o-e,l=u*u+f*f;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(l>1e-6)if(Math.abs(f*s-c*u)>1e-6&&i){var h=n-a,d=r-o,p=s*s+c*c,g=h*h+d*d,m=Math.sqrt(p),v=Math.sqrt(l),y=i*Math.tan((pi-Math.acos((p+l-g)/(2*m*v)))/2),b=y/v,w=y/m;Math.abs(b-1)>1e-6&&(this._+="L"+(t+b*u)+","+(e+b*f)),this._+="A"+i+","+i+",0,0,"+ +(f*h>u*d)+","+(this._x1=t+w*s)+","+(this._y1=e+w*c)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,a){t=+t,e=+e,a=!!a;var o=(n=+n)*Math.cos(r),s=n*Math.sin(r),c=t+o,u=e+s,f=1^a,l=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+c+","+u:(Math.abs(this._x1-c)>1e-6||Math.abs(this._y1-u)>1e-6)&&(this._+="L"+c+","+u),n&&(l<0&&(l=l%gi+gi),l>mi?this._+="A"+n+","+n+",0,1,"+f+","+(t-o)+","+(e-s)+"A"+n+","+n+",0,1,"+f+","+(this._x1=c)+","+(this._y1=u):l>1e-6&&(this._+="A"+n+","+n+",0,"+ +(l>=pi)+","+f+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function bi(){}function wi(t,e){var n=new bi;if(t instanceof bi)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var r,i=-1,a=t.length;if(null==e)for(;++i<a;)n.set(i,t[i]);else for(;++i<a;)n.set(e(r=t[i],i,t),r)}else if(t)for(var o in t)n.set(o,t[o]);return n}bi.prototype=wi.prototype={constructor:bi,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var _i=wi;function xi(){}var Ci=_i.prototype;function Ai(t,e){var n=new xi;if(t instanceof xi)t.each((function(t){n.add(t)}));else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}xi.prototype=Ai.prototype={constructor:xi,has:Ci.has,add:function(t){return this["$"+(t+="")]=t,this},remove:Ci.remove,clear:Ci.clear,values:Ci.keys,size:Ci.size,empty:Ci.empty,each:Ci.each};Array.prototype.slice;var Si={},Ti={};function Mi(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function Ei(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function ki(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function Ui(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),a=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+ki(-e,6):e>9999?"+"+ki(e,6):ki(e,4))+"-"+ki(t.getUTCMonth()+1,2)+"-"+ki(t.getUTCDate(),2)+(a?"T"+ki(n,2)+":"+ki(r,2)+":"+ki(i,2)+"."+ki(a,3)+"Z":i?"T"+ki(n,2)+":"+ki(r,2)+":"+ki(i,2)+"Z":r||n?"T"+ki(n,2)+":"+ki(r,2)+"Z":"")}var Di=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],a=t.length,o=0,s=0,c=a<=0,u=!1;function f(){if(c)return Ti;if(u)return u=!1,Si;var e,r,i=o;if(34===t.charCodeAt(i)){for(;o++<a&&34!==t.charCodeAt(o)||34===t.charCodeAt(++o););return(e=o)>=a?c=!0:10===(r=t.charCodeAt(o++))?u=!0:13===r&&(u=!0,10===t.charCodeAt(o)&&++o),t.slice(i+1,e-1).replace(/""/g,'"')}for(;o<a;){if(10===(r=t.charCodeAt(e=o++)))u=!0;else if(13===r)u=!0,10===t.charCodeAt(o)&&++o;else if(r!==n)continue;return t.slice(i,e)}return c=!0,t.slice(i,a)}for(10===t.charCodeAt(a-1)&&--a,13===t.charCodeAt(a-1)&&--a;(r=f())!==Ti;){for(var l=[];r!==Si&&r!==Ti;)l.push(r),r=f();e&&null==(l=e(l,s++))||i.push(l)}return i}function i(e,n){return e.map((function(e){return n.map((function(t){return o(e[t])})).join(t)}))}function a(e){return e.map(o).join(t)}function o(t){return null==t?"":t instanceof Date?Ui(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,a=r(t,(function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=Mi(t);return function(r,i){return e(n(r),i,t)}}(t,e):Mi(t)}));return a.columns=i||[],a},parseRows:r,format:function(e,n){return null==n&&(n=Ei(e)),[n.map(o).join(t)].concat(i(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=Ei(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(a).join("\n")},formatRow:a,formatValue:o}},Pi=Di(","),Ii=Pi.parse,Ni=(Pi.parseRows,Pi.format,Pi.formatBody,Pi.formatRows,Pi.formatRow,Pi.formatValue,Di("\t")),Ri=Ni.parse;Ni.parseRows,Ni.format,Ni.formatBody,Ni.formatRows,Ni.formatRow,Ni.formatValue;function Bi(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}var Fi=function(t,e){return fetch(t,e).then(Bi)};function Oi(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),Fi(e,n).then((function(e){return t(e,r)}))}}var Li=Oi(Ii);Oi(Ri);function Vi(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,a,o,s,c,u,f,l,h,d=t._root,p={data:r},g=t._x0,m=t._y0,v=t._x1,y=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((u=e>=(a=(g+v)/2))?g=a:v=a,(f=n>=(o=(m+y)/2))?m=o:y=o,i=d,!(d=d[l=f<<1|u]))return i[l]=p,t;if(s=+t._x.call(null,d.data),c=+t._y.call(null,d.data),e===s&&n===c)return p.next=d,i?i[l]=p:t._root=p,t;do{i=i?i[l]=new Array(4):t._root=new Array(4),(u=e>=(a=(g+v)/2))?g=a:v=a,(f=n>=(o=(m+y)/2))?m=o:y=o}while((l=f<<1|u)==(h=(c>=o)<<1|s>=a));return i[h]=d,i[l]=p,t}var Hi=function(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i};function zi(t){return t[0]}function $i(t){return t[1]}function Yi(t,e,n){var r=new ji(null==e?zi:e,null==n?$i:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function ji(t,e,n,r,i,a){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function qi(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Wi=Yi.prototype=ji.prototype;Wi.copy=function(){var t,e,n=new ji(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=qi(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=qi(e));return n},Wi.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return Vi(this.cover(e,n),e,n,t)},Wi.addAll=function(t){var e,n,r,i,a=t.length,o=new Array(a),s=new Array(a),c=1/0,u=1/0,f=-1/0,l=-1/0;for(n=0;n<a;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(o[n]=r,s[n]=i,r<c&&(c=r),r>f&&(f=r),i<u&&(u=i),i>l&&(l=i));if(c>f||u>l)return this;for(this.cover(c,u).cover(f,l),n=0;n<a;++n)Vi(this,o[n],s[n],t[n]);return this},Wi.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,a=(r=Math.floor(e))+1;else{for(var o,s,c=i-n,u=this._root;n>t||t>=i||r>e||e>=a;)switch(s=(e<r)<<1|t<n,(o=new Array(4))[s]=u,u=o,c*=2,s){case 0:i=n+c,a=r+c;break;case 1:n=i-c,a=r+c;break;case 2:i=n+c,r=a-c;break;case 3:n=i-c,r=a-c}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this},Wi.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},Wi.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Wi.find=function(t,e,n){var r,i,a,o,s,c,u,f=this._x0,l=this._y0,h=this._x1,d=this._y1,p=[],g=this._root;for(g&&p.push(new Hi(g,f,l,h,d)),null==n?n=1/0:(f=t-n,l=e-n,h=t+n,d=e+n,n*=n);c=p.pop();)if(!(!(g=c.node)||(i=c.x0)>h||(a=c.y0)>d||(o=c.x1)<f||(s=c.y1)<l))if(g.length){var m=(i+o)/2,v=(a+s)/2;p.push(new Hi(g[3],m,v,o,s),new Hi(g[2],i,v,m,s),new Hi(g[1],m,a,o,v),new Hi(g[0],i,a,m,v)),(u=(e>=v)<<1|t>=m)&&(c=p[p.length-1],p[p.length-1]=p[p.length-1-u],p[p.length-1-u]=c)}else{var y=t-+this._x.call(null,g.data),b=e-+this._y.call(null,g.data),w=y*y+b*b;if(w<n){var _=Math.sqrt(n=w);f=t-_,l=e-_,h=t+_,d=e+_,r=g.data}}return r},Wi.remove=function(t){if(isNaN(a=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,r,i,a,o,s,c,u,f,l,h,d=this._root,p=this._x0,g=this._y0,m=this._x1,v=this._y1;if(!d)return this;if(d.length)for(;;){if((u=a>=(s=(p+m)/2))?p=s:m=s,(f=o>=(c=(g+v)/2))?g=c:v=c,e=d,!(d=d[l=f<<1|u]))return this;if(!d.length)break;(e[l+1&3]||e[l+2&3]||e[l+3&3])&&(n=e,h=l)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):e?(i?e[l]=i:delete e[l],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[h]=d:this._root=d),this):(this._root=i,this)},Wi.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Wi.root=function(){return this._root},Wi.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},Wi.visit=function(t){var e,n,r,i,a,o,s=[],c=this._root;for(c&&s.push(new Hi(c,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(c=e.node,r=e.x0,i=e.y0,a=e.x1,o=e.y1)&&c.length){var u=(r+a)/2,f=(i+o)/2;(n=c[3])&&s.push(new Hi(n,u,f,a,o)),(n=c[2])&&s.push(new Hi(n,r,f,u,o)),(n=c[1])&&s.push(new Hi(n,u,i,a,f)),(n=c[0])&&s.push(new Hi(n,r,i,u,f))}return this},Wi.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new Hi(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var a,o=e.x0,s=e.y0,c=e.x1,u=e.y1,f=(o+c)/2,l=(s+u)/2;(a=i[0])&&n.push(new Hi(a,o,s,f,l)),(a=i[1])&&n.push(new Hi(a,f,s,c,l)),(a=i[2])&&n.push(new Hi(a,o,l,f,u)),(a=i[3])&&n.push(new Hi(a,f,l,c,u))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Wi.x=function(t){return arguments.length?(this._x=t,this):this._x},Wi.y=function(t){return arguments.length?(this._y=t,this):this._y};Math.PI,Math.sqrt(5);function Ki(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}var Gi=function(t){return(t=Ki(Math.abs(t)))?t[1]:NaN},Xi=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ji(t){if(!(e=Xi.exec(t)))throw new Error("invalid format: "+t);var e;return new Zi({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Zi(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}Ji.prototype=Zi.prototype,Zi.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Qi,ta,ea,na,ra=function(t,e){var n=Ki(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},ia={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return ra(100*t,e)},r:ra,s:function(t,e){var n=Ki(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Qi=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Ki(t,Math.max(0,e+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},aa=function(t){return t},oa=Array.prototype.map,sa=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];ta=function(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?aa:(e=oa.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,a=[],o=0,s=e[0],c=0;i>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),a.push(t.substring(i-=s,i+s)),!((c+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?aa:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(oa.call(t.numerals,String)),c=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"-":t.minus+"",f=void 0===t.nan?"NaN":t.nan+"";function l(t){var e=(t=Ji(t)).fill,n=t.align,l=t.sign,h=t.symbol,d=t.zero,p=t.width,g=t.comma,m=t.precision,v=t.trim,y=t.type;"n"===y?(g=!0,y="g"):ia[y]||(void 0===m&&(m=12),v=!0,y="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var b="$"===h?i:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",w="$"===h?a:/[%p]/.test(y)?c:"",_=ia[y],x=/[defgprs%]/.test(y);function C(t){var i,a,c,h=b,C=w;if("c"===y)C=_(t)+C,t="";else{var A=(t=+t)<0||1/t<0;if(t=isNaN(t)?f:_(Math.abs(t),m),v&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),A&&0==+t&&"+"!==l&&(A=!1),h=(A?"("===l?l:u:"-"===l||"("===l?"":l)+h,C=("s"===y?sa[8+Qi/3]:"")+C+(A&&"("===l?")":""),x)for(i=-1,a=t.length;++i<a;)if(48>(c=t.charCodeAt(i))||c>57){C=(46===c?o+t.slice(i+1):t.slice(i))+C,t=t.slice(0,i);break}}g&&!d&&(t=r(t,1/0));var S=h.length+t.length+C.length,T=S<p?new Array(p-S+1).join(e):"";switch(g&&d&&(t=r(T+t,T.length?p-C.length:1/0),T=""),n){case"<":t=h+t+C+T;break;case"=":t=h+T+t+C;break;case"^":t=T.slice(0,S=T.length>>1)+h+t+C+T.slice(S);break;default:t=T+h+t+C}return s(t)}return m=void 0===m?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),C.toString=function(){return t+""},C}return{format:l,formatPrefix:function(t,e){var n=l(((t=Ji(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Gi(e)/3))),i=Math.pow(10,-r),a=sa[8+r/3];return function(t){return n(i*t)+a}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),ea=ta.format,na=ta.formatPrefix;var ca=function(){return Math.random()},ua=(function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(ca),function t(e){function n(t,n){var r,i;return t=null==t?0:+t,n=null==n?1:+n,function(){var a;if(null!=r)a=r,r=null;else do{r=2*e()-1,a=2*e()-1,i=r*r+a*a}while(!i||i>1);return t+n*a*Math.sqrt(-2*Math.log(i)/i)}}return n.source=t,n}(ca)),fa=(function t(e){function n(){var t=ua.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return n.source=t,n}(ca),function t(e){function n(t){return function(){for(var n=0,r=0;r<t;++r)n+=e();return n}}return n.source=t,n}(ca));(function t(e){function n(t){var n=fa.source(e)(t);return function(){return n()/t}}return n.source=t,n})(ca),function t(e){function n(t){return function(){return-Math.log(1-e())/t}}return n.source=t,n}(ca);function la(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}var ha=Array.prototype,da=ha.map,pa=ha.slice,ga={name:"implicit"};function ma(){var t=_i(),e=[],n=[],r=ga;function i(i){var a=i+"",o=t.get(a);if(!o){if(r!==ga)return r;t.set(a,o=e.push(i))}return n[(o-1)%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=_i();for(var r,a,o=-1,s=n.length;++o<s;)t.has(a=(r=n[o])+"")||t.set(a,e.push(r));return i},i.range=function(t){return arguments.length?(n=pa.call(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return ma(e,n).unknown(r)},la.apply(i,arguments),i}function va(){var t,e,n=ma().unknown(void 0),r=n.domain,i=n.range,a=[0,1],o=!1,s=0,c=0,u=.5;function f(){var n=r().length,f=a[1]<a[0],l=a[f-0],h=a[1-f];t=(h-l)/Math.max(1,n-s+2*c),o&&(t=Math.floor(t)),l+=(h-l-t*(n-s))*u,e=t*(1-s),o&&(l=Math.round(l),e=Math.round(e));var d=pt(n).map((function(e){return l+t*e}));return i(f?d.reverse():d)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),f()):r()},n.range=function(t){return arguments.length?(a=[+t[0],+t[1]],f()):a.slice()},n.rangeRound=function(t){return a=[+t[0],+t[1]],o=!0,f()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(o=!!t,f()):o},n.padding=function(t){return arguments.length?(s=Math.min(1,c=+t),f()):s},n.paddingInner=function(t){return arguments.length?(s=Math.min(1,t),f()):s},n.paddingOuter=function(t){return arguments.length?(c=+t,f()):c},n.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),f()):u},n.copy=function(){return va(r(),a).round(o).paddingInner(s).paddingOuter(c).align(u)},la.apply(f(),arguments)}var ya=function(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}},ba=function(t){return+t},wa=[0,1];function _a(t){return t}function xa(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function Ca(t){var e,n=t[0],r=t[t.length-1];return n>r&&(e=n,n=r,r=e),function(t){return Math.max(n,Math.min(r,t))}}function Aa(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=xa(i,r),a=n(o,a)):(r=xa(r,i),a=n(a,o)),function(t){return a(r(t))}}function Sa(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=xa(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(e){var n=lt(t,e,1,r)-1;return a[n](i[n](e))}}function Ta(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ma(){var t,e,n,r,i,a,o=wa,s=wa,c=Gn,u=_a;function f(){return r=Math.min(o.length,s.length)>2?Sa:Aa,i=a=null,l}function l(e){return isNaN(e=+e)?n:(i||(i=r(o.map(t),s,c)))(t(u(e)))}return l.invert=function(n){return u(e((a||(a=r(s,o.map(t),zn)))(n)))},l.domain=function(t){return arguments.length?(o=da.call(t,ba),u===_a||(u=Ca(o)),f()):o.slice()},l.range=function(t){return arguments.length?(s=pa.call(t),f()):s.slice()},l.rangeRound=function(t){return s=pa.call(t),c=ya,f()},l.clamp=function(t){return arguments.length?(u=t?Ca(o):_a,l):u!==_a},l.interpolate=function(t){return arguments.length?(c=t,f()):c},l.unknown=function(t){return arguments.length?(n=t,l):n},function(n,r){return t=n,e=r,f()}}function Ea(t,e){return Ma()(t,e)}var ka=function(t,e,n,r){var i,a=wt(t,e,n);switch((r=Ji(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Gi(e)/3)))-Gi(Math.abs(t)))}(a,o))||(r.precision=i),na(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Gi(e)-Gi(t))+1}(a,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-Gi(Math.abs(t)))}(a))||(r.precision=i-2*("%"===r.type))}return ea(r)};function Ua(t){var e=t.domain;return t.ticks=function(t){var n=e();return yt(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return ka(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),a=0,o=i.length-1,s=i[a],c=i[o];return c<s&&(r=s,s=c,c=r,r=a,a=o,o=r),(r=bt(s,c,n))>0?r=bt(s=Math.floor(s/r)*r,c=Math.ceil(c/r)*r,n):r<0&&(r=bt(s=Math.ceil(s*r)/r,c=Math.floor(c*r)/r,n)),r>0?(i[a]=Math.floor(s/r)*r,i[o]=Math.ceil(c/r)*r,e(i)):r<0&&(i[a]=Math.ceil(s*r)/r,i[o]=Math.floor(c*r)/r,e(i)),t},t}function Da(){var t=Ea(_a,_a);return t.copy=function(){return Ta(t,Da())},la.apply(t,arguments),Ua(t)}function Pa(){var t,e=0,n=1,r=1,i=[.5],a=[0,1];function o(e){return e<=e?a[lt(i,e,0,r)]:t}function s(){var t=-1;for(i=new Array(r);++t<r;)i[t]=((t+1)*n-(t-r)*e)/(r+1);return o}return o.domain=function(t){return arguments.length?(e=+t[0],n=+t[1],s()):[e,n]},o.range=function(t){return arguments.length?(r=(a=pa.call(t)).length-1,s()):a.slice()},o.invertExtent=function(t){var o=a.indexOf(t);return o<0?[NaN,NaN]:o<1?[e,i[0]]:o>=r?[i[r-1],n]:[i[o-1],i[o]]},o.unknown=function(e){return arguments.length?(t=e,o):o},o.thresholds=function(){return i.slice()},o.copy=function(){return Pa().domain([e,n]).range(a).unknown(t)},la.apply(Ua(o),arguments)}var Ia=new Date,Na=new Date;function Ra(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,a){var o,s=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return s;do{s.push(o=new Date(+n)),e(n,a),t(n)}while(o<n&&n<r);return s},i.filter=function(n){return Ra((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return Ia.setTime(+e),Na.setTime(+r),t(Ia),t(Na),Math.floor(n(Ia,Na))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var Ba=Ra((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));Ba.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Ra((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var Fa=Ba,Oa=(Ba.range,Ra((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})));Oa.range;function La(t){return Ra((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5}))}var Va=La(0),Ha=La(1),za=La(2),$a=La(3),Ya=La(4),ja=La(5),qa=La(6),Wa=(Va.range,Ha.range,za.range,$a.range,Ya.range,ja.range,qa.range,Ra((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5}),(function(t){return t.getDate()-1}))),Ka=Wa,Ga=(Wa.range,Ra((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getHours()}))),Xa=(Ga.range,Ra((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getMinutes()}))),Ja=(Xa.range,Ra((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+1e3*e)}),(function(t,e){return(e-t)/1e3}),(function(t){return t.getUTCSeconds()}))),Za=(Ja.range,Ra((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t})));Za.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Ra((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):Za:null};Za.range;function Qa(t){return Ra((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/6048e5}))}var to=Qa(0),eo=Qa(1),no=Qa(2),ro=Qa(3),io=Qa(4),ao=Qa(5),oo=Qa(6),so=(to.range,eo.range,no.range,ro.range,io.range,ao.range,oo.range,Ra((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/864e5}),(function(t){return t.getUTCDate()-1}))),co=so,uo=(so.range,Ra((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})));uo.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Ra((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var fo=uo;uo.range;function lo(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function ho(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function po(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}var go,mo={"-":"",_:" ",0:"0"},vo=/^\s*\d+/,yo=/^%/,bo=/[\\^$*+?|[\]().{}]/g;function wo(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function _o(t){return t.replace(bo,"\\$&")}function xo(t){return new RegExp("^(?:"+t.map(_o).join("|")+")","i")}function Co(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function Ao(t,e,n){var r=vo.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function So(t,e,n){var r=vo.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function To(t,e,n){var r=vo.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Mo(t,e,n){var r=vo.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Eo(t,e,n){var r=vo.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function ko(t,e,n){var r=vo.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Uo(t,e,n){var r=vo.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Do(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Po(t,e,n){var r=vo.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function Io(t,e,n){var r=vo.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function No(t,e,n){var r=vo.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Ro(t,e,n){var r=vo.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Bo(t,e,n){var r=vo.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Fo(t,e,n){var r=vo.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Oo(t,e,n){var r=vo.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Lo(t,e,n){var r=vo.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Vo(t,e,n){var r=vo.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Ho(t,e,n){var r=yo.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function zo(t,e,n){var r=vo.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function $o(t,e,n){var r=vo.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Yo(t,e){return wo(t.getDate(),e,2)}function jo(t,e){return wo(t.getHours(),e,2)}function qo(t,e){return wo(t.getHours()%12||12,e,2)}function Wo(t,e){return wo(1+Ka.count(Fa(t),t),e,3)}function Ko(t,e){return wo(t.getMilliseconds(),e,3)}function Go(t,e){return Ko(t,e)+"000"}function Xo(t,e){return wo(t.getMonth()+1,e,2)}function Jo(t,e){return wo(t.getMinutes(),e,2)}function Zo(t,e){return wo(t.getSeconds(),e,2)}function Qo(t){var e=t.getDay();return 0===e?7:e}function ts(t,e){return wo(Va.count(Fa(t)-1,t),e,2)}function es(t){var e=t.getDay();return e>=4||0===e?Ya(t):Ya.ceil(t)}function ns(t,e){return t=es(t),wo(Ya.count(Fa(t),t)+(4===Fa(t).getDay()),e,2)}function rs(t){return t.getDay()}function is(t,e){return wo(Ha.count(Fa(t)-1,t),e,2)}function as(t,e){return wo(t.getFullYear()%100,e,2)}function os(t,e){return wo((t=es(t)).getFullYear()%100,e,2)}function ss(t,e){return wo(t.getFullYear()%1e4,e,4)}function cs(t,e){var n=t.getDay();return wo((t=n>=4||0===n?Ya(t):Ya.ceil(t)).getFullYear()%1e4,e,4)}function us(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+wo(e/60|0,"0",2)+wo(e%60,"0",2)}function fs(t,e){return wo(t.getUTCDate(),e,2)}function ls(t,e){return wo(t.getUTCHours(),e,2)}function hs(t,e){return wo(t.getUTCHours()%12||12,e,2)}function ds(t,e){return wo(1+co.count(fo(t),t),e,3)}function ps(t,e){return wo(t.getUTCMilliseconds(),e,3)}function gs(t,e){return ps(t,e)+"000"}function ms(t,e){return wo(t.getUTCMonth()+1,e,2)}function vs(t,e){return wo(t.getUTCMinutes(),e,2)}function ys(t,e){return wo(t.getUTCSeconds(),e,2)}function bs(t){var e=t.getUTCDay();return 0===e?7:e}function ws(t,e){return wo(to.count(fo(t)-1,t),e,2)}function _s(t){var e=t.getUTCDay();return e>=4||0===e?io(t):io.ceil(t)}function xs(t,e){return t=_s(t),wo(io.count(fo(t),t)+(4===fo(t).getUTCDay()),e,2)}function Cs(t){return t.getUTCDay()}function As(t,e){return wo(eo.count(fo(t)-1,t),e,2)}function Ss(t,e){return wo(t.getUTCFullYear()%100,e,2)}function Ts(t,e){return wo((t=_s(t)).getUTCFullYear()%100,e,2)}function Ms(t,e){return wo(t.getUTCFullYear()%1e4,e,4)}function Es(t,e){var n=t.getUTCDay();return wo((t=n>=4||0===n?io(t):io.ceil(t)).getUTCFullYear()%1e4,e,4)}function ks(){return"+0000"}function Us(){return"%"}function Ds(t){return+t}function Ps(t){return Math.floor(+t/1e3)}!function(t){go=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,c=t.shortMonths,u=xo(i),f=Co(i),l=xo(a),h=Co(a),d=xo(o),p=Co(o),g=xo(s),m=Co(s),v=xo(c),y=Co(c),b={a:function(t){return o[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:Yo,e:Yo,f:Go,g:os,G:cs,H:jo,I:qo,j:Wo,L:Ko,m:Xo,M:Jo,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Ds,s:Ps,S:Zo,u:Qo,U:ts,V:ns,w:rs,W:is,x:null,X:null,y:as,Y:ss,Z:us,"%":Us},w={a:function(t){return o[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return c[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:fs,e:fs,f:gs,g:Ts,G:Es,H:ls,I:hs,j:ds,L:ps,m:ms,M:vs,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Ds,s:Ps,S:ys,u:bs,U:ws,V:xs,w:Cs,W:As,x:null,X:null,y:Ss,Y:Ms,Z:ks,"%":Us},_={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=p[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=l.exec(e.slice(n));return r?(t.w=h[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=v.exec(e.slice(n));return r?(t.m=y[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=m[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return A(t,e,n,r)},d:No,e:No,f:Vo,g:Uo,G:ko,H:Bo,I:Bo,j:Ro,L:Lo,m:Io,M:Fo,p:function(t,e,n){var r=u.exec(e.slice(n));return r?(t.p=f[r[0].toLowerCase()],n+r[0].length):-1},q:Po,Q:zo,s:$o,S:Oo,u:So,U:To,V:Mo,w:Ao,W:Eo,x:function(t,e,r){return A(t,n,e,r)},X:function(t,e,n){return A(t,r,e,n)},y:Uo,Y:ko,Z:Do,"%":Ho};function x(t,e){return function(n){var r,i,a,o=[],s=-1,c=0,u=t.length;for(n instanceof Date||(n=new Date(+n));++s<u;)37===t.charCodeAt(s)&&(o.push(t.slice(c,s)),null!=(i=mo[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(a=e[r])&&(r=a(n,i)),o.push(r),c=s+1);return o.push(t.slice(c,s)),o.join("")}}function C(t,e){return function(n){var r,i,a=po(1900,void 0,1);if(A(a,t,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(e&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=ho(po(a.y,0,1))).getUTCDay(),r=i>4||0===i?eo.ceil(r):eo(r),r=co.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=lo(po(a.y,0,1))).getDay(),r=i>4||0===i?Ha.ceil(r):Ha(r),r=Ka.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?ho(po(a.y,0,1)).getUTCDay():lo(po(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,ho(a)):lo(a)}}function A(t,e,n,r){for(var i,a,o=0,s=e.length,c=n.length;o<s;){if(r>=c)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(a=_[i in mo?e.charAt(o++):i])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=x(n,b),b.X=x(r,b),b.c=x(e,b),w.x=x(n,w),w.X=x(r,w),w.c=x(e,w),{format:function(t){var e=x(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=C(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=x(t+="",w);return e.toString=function(){return t},e},utcParse:function(t){var e=C(t+="",!0);return e.toString=function(){return t},e}}}(t),go.format,go.parse,go.utcFormat,go.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Is=Ra((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),Ns=(Is.range,Ra((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getUTCHours()}))),Rs=(Ns.range,Ra((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getUTCMinutes()})));Rs.range;function Bs(){this._=null}function Fs(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Os(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Ls(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Vs(t){for(;t.L;)t=t.L;return t}Bs.prototype={constructor:Bs,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Vs(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Os(this,n),n=(t=n).U),n.C=!1,r.C=!0,Ls(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Ls(this,n),n=(t=n).U),n.C=!1,r.C=!0,Os(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,a=t.L,o=t.R;if(n=a?o?Vs(o):a:o,i?i.L===t?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=t.C,n.L=a,a.U=n,n!==o?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=o,o.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Os(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Ls(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Os(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Ls(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Os(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Ls(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var Hs=Bs;function zs(t,e,n,r){var i=[null,null],a=hc.push(i)-1;return i.left=t,i.right=e,n&&Ys(i,t,e,n),r&&Ys(i,e,t,r),fc[t.index].halfedges.push(a),fc[e.index].halfedges.push(a),i}function $s(t,e,n){var r=[e,n];return r.left=t,r}function Ys(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function js(t,e,n,r,i){var a,o=t[0],s=t[1],c=o[0],u=o[1],f=0,l=1,h=s[0]-c,d=s[1]-u;if(a=e-c,h||!(a>0)){if(a/=h,h<0){if(a<f)return;a<l&&(l=a)}else if(h>0){if(a>l)return;a>f&&(f=a)}if(a=r-c,h||!(a<0)){if(a/=h,h<0){if(a>l)return;a>f&&(f=a)}else if(h>0){if(a<f)return;a<l&&(l=a)}if(a=n-u,d||!(a>0)){if(a/=d,d<0){if(a<f)return;a<l&&(l=a)}else if(d>0){if(a>l)return;a>f&&(f=a)}if(a=i-u,d||!(a<0)){if(a/=d,d<0){if(a>l)return;a>f&&(f=a)}else if(d>0){if(a<f)return;a<l&&(l=a)}return!(f>0||l<1)||(f>0&&(t[0]=[c+f*h,u+f*d]),l<1&&(t[1]=[c+l*h,u+l*d]),!0)}}}}}function qs(t,e,n,r,i){var a=t[1];if(a)return!0;var o,s,c=t[0],u=t.left,f=t.right,l=u[0],h=u[1],d=f[0],p=f[1],g=(l+d)/2,m=(h+p)/2;if(p===h){if(g<e||g>=r)return;if(l>d){if(c){if(c[1]>=i)return}else c=[g,n];a=[g,i]}else{if(c){if(c[1]<n)return}else c=[g,i];a=[g,n]}}else if(s=m-(o=(l-d)/(p-h))*g,o<-1||o>1)if(l>d){if(c){if(c[1]>=i)return}else c=[(n-s)/o,n];a=[(i-s)/o,i]}else{if(c){if(c[1]<n)return}else c=[(i-s)/o,i];a=[(n-s)/o,n]}else if(h<p){if(c){if(c[0]>=r)return}else c=[e,o*e+s];a=[r,o*r+s]}else{if(c){if(c[0]<e)return}else c=[r,o*r+s];a=[e,o*e+s]}return t[0]=c,t[1]=a,!0}function Ws(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Ks(t,e){return e[+(e.left!==t.site)]}function Gs(t,e){return e[+(e.left===t.site)]}var Xs,Js=[];function Zs(){Fs(this),this.x=this.y=this.arc=this.site=this.cy=null}function Qs(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,a=n.site;if(r!==a){var o=i[0],s=i[1],c=r[0]-o,u=r[1]-s,f=a[0]-o,l=a[1]-s,h=2*(c*l-u*f);if(!(h>=-pc)){var d=c*c+u*u,p=f*f+l*l,g=(l*d-u*p)/h,m=(c*p-f*d)/h,v=Js.pop()||new Zs;v.arc=t,v.site=i,v.x=g+o,v.y=(v.cy=m+s)+Math.sqrt(g*g+m*m),t.circle=v;for(var y=null,b=lc._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}lc.insert(y,v),y||(Xs=v)}}}}function tc(t){var e=t.circle;e&&(e.P||(Xs=e.N),lc.remove(e),Js.push(e),Fs(e),t.circle=null)}var ec=[];function nc(){Fs(this),this.edge=this.site=this.circle=null}function rc(t){var e=ec.pop()||new nc;return e.site=t,e}function ic(t){tc(t),uc.remove(t),ec.push(t),Fs(t)}function ac(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],a=t.P,o=t.N,s=[t];ic(t);for(var c=a;c.circle&&Math.abs(n-c.circle.x)<dc&&Math.abs(r-c.circle.cy)<dc;)a=c.P,s.unshift(c),ic(c),c=a;s.unshift(c),tc(c);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<dc&&Math.abs(r-u.circle.cy)<dc;)o=u.N,s.push(u),ic(u),u=o;s.push(u),tc(u);var f,l=s.length;for(f=1;f<l;++f)u=s[f],c=s[f-1],Ys(u.edge,c.site,u.site,i);c=s[0],(u=s[l-1]).edge=zs(c.site,u.site,null,i),Qs(c),Qs(u)}function oc(t){for(var e,n,r,i,a=t[0],o=t[1],s=uc._;s;)if((r=sc(s,o)-a)>dc)s=s.L;else{if(!((i=a-cc(s,o))>dc)){r>-dc?(e=s.P,n=s):i>-dc?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){fc[t.index]={site:t,halfedges:[]}}(t);var c=rc(t);if(uc.insert(e,c),e||n){if(e===n)return tc(e),n=rc(e.site),uc.insert(c,n),c.edge=n.edge=zs(e.site,c.site),Qs(e),void Qs(n);if(n){tc(e),tc(n);var u=e.site,f=u[0],l=u[1],h=t[0]-f,d=t[1]-l,p=n.site,g=p[0]-f,m=p[1]-l,v=2*(h*m-d*g),y=h*h+d*d,b=g*g+m*m,w=[(m*y-d*b)/v+f,(h*b-g*y)/v+l];Ys(n.edge,u,p,w),c.edge=zs(u,t,null,w),n.edge=zs(t,p,null,w),Qs(e),Qs(n)}else c.edge=zs(e.site,c.site)}}function sc(t,e){var n=t.site,r=n[0],i=n[1],a=i-e;if(!a)return r;var o=t.P;if(!o)return-1/0;var s=(n=o.site)[0],c=n[1],u=c-e;if(!u)return s;var f=s-r,l=1/a-1/u,h=f/u;return l?(-h+Math.sqrt(h*h-2*l*(f*f/(-2*u)-c+u/2+i-a/2)))/l+r:(r+s)/2}function cc(t,e){var n=t.N;if(n)return sc(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var uc,fc,lc,hc,dc=1e-6,pc=1e-12;function gc(t,e){return e[1]-t[1]||e[0]-t[0]}function mc(t,e){var n,r,i,a=t.sort(gc).pop();for(hc=[],fc=new Array(t.length),uc=new Hs,lc=new Hs;;)if(i=Xs,a&&(!i||a[1]<i.y||a[1]===i.y&&a[0]<i.x))a[0]===n&&a[1]===r||(oc(a),n=a[0],r=a[1]),a=t.pop();else{if(!i)break;ac(i.arc)}if(function(){for(var t,e,n,r,i=0,a=fc.length;i<a;++i)if((t=fc[i])&&(r=(e=t.halfedges).length)){var o=new Array(r),s=new Array(r);for(n=0;n<r;++n)o[n]=n,s[n]=Ws(t,hc[e[n]]);for(o.sort((function(t,e){return s[e]-s[t]})),n=0;n<r;++n)s[n]=e[o[n]];for(n=0;n<r;++n)e[n]=s[n]}}(),e){var o=+e[0][0],s=+e[0][1],c=+e[1][0],u=+e[1][1];!function(t,e,n,r){for(var i,a=hc.length;a--;)qs(i=hc[a],t,e,n,r)&&js(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>dc||Math.abs(i[0][1]-i[1][1])>dc)||delete hc[a]}(o,s,c,u),function(t,e,n,r){var i,a,o,s,c,u,f,l,h,d,p,g,m=fc.length,v=!0;for(i=0;i<m;++i)if(a=fc[i]){for(o=a.site,s=(c=a.halfedges).length;s--;)hc[c[s]]||c.splice(s,1);for(s=0,u=c.length;s<u;)p=(d=Gs(a,hc[c[s]]))[0],g=d[1],l=(f=Ks(a,hc[c[++s%u]]))[0],h=f[1],(Math.abs(p-l)>dc||Math.abs(g-h)>dc)&&(c.splice(s,0,hc.push($s(o,d,Math.abs(p-t)<dc&&r-g>dc?[t,Math.abs(l-t)<dc?h:r]:Math.abs(g-r)<dc&&n-p>dc?[Math.abs(h-r)<dc?l:n,r]:Math.abs(p-n)<dc&&g-e>dc?[n,Math.abs(l-n)<dc?h:e]:Math.abs(g-e)<dc&&p-t>dc?[Math.abs(h-e)<dc?l:t,e]:null))-1),++u);u&&(v=!1)}if(v){var y,b,w,_=1/0;for(i=0,v=null;i<m;++i)(a=fc[i])&&(w=(y=(o=a.site)[0]-t)*y+(b=o[1]-e)*b)<_&&(_=w,v=a);if(v){var x=[t,e],C=[t,r],A=[n,r],S=[n,e];v.halfedges.push(hc.push($s(o=v.site,x,C))-1,hc.push($s(o,C,A))-1,hc.push($s(o,A,S))-1,hc.push($s(o,S,x))-1)}}for(i=0;i<m;++i)(a=fc[i])&&(a.halfedges.length||delete fc[i])}(o,s,c,u)}this.edges=hc,this.cells=fc,uc=lc=hc=fc=null}mc.prototype={constructor:mc,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return Ks(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(a=(i=n.halfedges).length)for(var i,a,o,s,c,u,f=n.site,l=-1,h=e[i[a-1]],d=h.left===f?h.right:h.left;++l<a;)o=d,d=(h=e[i[l]]).left===f?h.right:h.left,o&&d&&r<o.index&&r<d.index&&(c=o,u=d,((s=f)[0]-u[0])*(c[1]-s[1])-(s[0]-c[0])*(u[1]-s[1])<0)&&t.push([f.data,o.data,d.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var r,i,a=this,o=a._found||0,s=a.cells.length;!(i=a.cells[o]);)if(++o>=s)return null;var c=t-i.site[0],u=e-i.site[1],f=c*c+u*u;do{i=a.cells[r=o],o=null,i.halfedges.forEach((function(n){var r=a.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var c=t-s[0],u=e-s[1],l=c*c+u*u;l<f&&(f=l,o=s.index)}}))}while(null!==o);return a._found=r,null==n||f<=n*n?i.site:null}};var vc=Math.SQRT2;function yc(t){return((t=Math.exp(t))+1/t)/2}var bc=function(t,e){var n,r,i=t[0],a=t[1],o=t[2],s=e[0],c=e[1],u=e[2],f=s-i,l=c-a,h=f*f+l*l;if(h<1e-12)r=Math.log(u/o)/vc,n=function(t){return[i+t*f,a+t*l,o*Math.exp(vc*t*r)]};else{var d=Math.sqrt(h),p=(u*u-o*o+4*h)/(2*o*2*d),g=(u*u-o*o-4*h)/(2*u*2*d),m=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(g*g+1)-g);r=(v-m)/vc,n=function(t){var e,n=t*r,s=yc(m),c=o/(2*d)*(s*(e=vc*n+m,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(m));return[i+c*f,a+c*l,o*s/yc(vc*n+m)]}}return n.duration=1e3*r,n},wc=function(t){return function(){return t}};function _c(t,e,n){this.target=t,this.type=e,this.transform=n}function xc(t,e,n){this.k=t,this.x=e,this.y=n}xc.prototype={constructor:xc,scale:function(t){return 1===t?this:new xc(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new xc(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Cc=new xc(1,0,0);function Ac(){Fe.stopImmediatePropagation()}xc.prototype;var Sc=function(){Fe.preventDefault(),Fe.stopImmediatePropagation()};function Tc(){return!Fe.ctrlKey&&!Fe.button}function Mc(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function Ec(){return this.__zoom||Cc}function kc(){return-Fe.deltaY*(1===Fe.deltaMode?.05:Fe.deltaMode?1:.002)}function Uc(){return navigator.maxTouchPoints||"ontouchstart"in this}function Dc(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}var Pc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ic=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Pc.hasOwnProperty(e)?{space:Pc[e],local:t}:t};function Nc(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===n&&"http://www.w3.org/1999/xhtml"===e.documentElement.namespaceURI?e.createElement(t):e.createElementNS(n,t)}}function Rc(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}var Bc=function(t){var e=Ic(t);return(e.local?Rc:Nc)(e)},Fc=0;function Oc(){this._="@"+(++Fc).toString(36)}Oc.prototype=function(){return new Oc}.prototype={constructor:Oc,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var Lc=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var Vc=document.documentElement;if(!Vc.matches){var Hc=Vc.webkitMatchesSelector||Vc.msMatchesSelector||Vc.mozMatchesSelector||Vc.oMatchesSelector;Lc=function(t){return function(){return Hc.call(this,t)}}}}var zc=Lc,$c={},Yc=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||($c={mouseenter:"mouseover",mouseleave:"mouseout"}));function jc(t,e,n){return t=qc(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function qc(t,e,n){return function(r){var i=Yc;Yc=r;try{t.call(this,this.__data__,e,n)}finally{Yc=i}}}function Wc(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function Kc(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,a=e.length;r<a;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function Gc(t,e,n){var r=$c.hasOwnProperty(t.type)?jc:qc;return function(i,a,o){var s,c=this.__on,u=r(e,a,o);if(c)for(var f=0,l=c.length;f<l;++f)if((s=c[f]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=u,s.capture=n),void(s.value=e);this.addEventListener(t.type,u,n),s={type:t.type,name:t.name,value:e,listener:u,capture:n},c?c.push(s):this.__on=[s]}}function Xc(){}var Jc=function(t){return null==t?Xc:function(){return this.querySelector(t)}};function Zc(){return[]}var Qc=function(t){return new Array(t.length)};function tu(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}tu.prototype={constructor:tu,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function eu(t,e,n,r,i,a){for(var o,s=0,c=e.length,u=a.length;s<u;++s)(o=e[s])?(o.__data__=a[s],r[s]=o):n[s]=new tu(t,a[s]);for(;s<c;++s)(o=e[s])&&(i[s]=o)}function nu(t,e,n,r,i,a,o){var s,c,u,f={},l=e.length,h=a.length,d=new Array(l);for(s=0;s<l;++s)(c=e[s])&&(d[s]=u="$"+o.call(c,c.__data__,s,e),u in f?i[s]=c:f[u]=c);for(s=0;s<h;++s)(c=f[u="$"+o.call(t,a[s],s,a)])?(r[s]=c,c.__data__=a[s],f[u]=null):n[s]=new tu(t,a[s]);for(s=0;s<l;++s)(c=e[s])&&f[d[s]]===c&&(i[s]=c)}function ru(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function iu(t){return function(){this.removeAttribute(t)}}function au(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ou(t,e){return function(){this.setAttribute(t,e)}}function su(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function cu(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function uu(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}var fu=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function lu(t){return function(){this.style.removeProperty(t)}}function hu(t,e,n){return function(){this.style.setProperty(t,e,n)}}function du(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function pu(t){return function(){delete this[t]}}function gu(t,e){return function(){this[t]=e}}function mu(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function vu(t){return t.trim().split(/^|\s+/)}function yu(t){return t.classList||new bu(t)}function bu(t){this._node=t,this._names=vu(t.getAttribute("class")||"")}function wu(t,e){for(var n=yu(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function _u(t,e){for(var n=yu(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function xu(t){return function(){wu(this,t)}}function Cu(t){return function(){_u(this,t)}}function Au(t,e){return function(){(e.apply(this,arguments)?wu:_u)(this,t)}}bu.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Su(){this.textContent=""}function Tu(t){return function(){this.textContent=t}}function Mu(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Eu(){this.innerHTML=""}function ku(t){return function(){this.innerHTML=t}}function Uu(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Du(){this.nextSibling&&this.parentNode.appendChild(this)}function Pu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Iu(){return null}function Nu(){var t=this.parentNode;t&&t.removeChild(this)}function Ru(t,e,n){var r=fu(t),i=r.CustomEvent;i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Bu(t,e){return function(){return Ru(this,t,e)}}function Fu(t,e){return function(){return Ru(this,t,e.apply(this,arguments))}}var Ou=[null];function Lu(t,e){this._groups=t,this._parents=e}function Vu(){return new Lu([[document.documentElement]],Ou)}Lu.prototype=Vu.prototype={constructor:Lu,select:function(t){"function"!=typeof t&&(t=Jc(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o,s=e[i],c=s.length,u=r[i]=new Array(c),f=0;f<c;++f)(a=s[f])&&(o=t.call(a,a.__data__,f,s))&&("__data__"in a&&(o.__data__=a.__data__),u[f]=o);return new Lu(r,this._parents)},selectAll:function(t){var e;"function"!=typeof t&&(t=null==(e=t)?Zc:function(){return this.querySelectorAll(e)});for(var n=this._groups,r=n.length,i=[],a=[],o=0;o<r;++o)for(var s,c=n[o],u=c.length,f=0;f<u;++f)(s=c[f])&&(i.push(t.call(s,s.__data__,f,c)),a.push(s));return new Lu(i,a)},filter:function(t){"function"!=typeof t&&(t=zc(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],s=o.length,c=r[i]=[],u=0;u<s;++u)(a=o[u])&&t.call(a,a.__data__,u,o)&&c.push(a);return new Lu(r,this._parents)},data:function(t,e){if(!t)return p=new Array(this.size()),f=-1,this.each((function(t){p[++f]=t})),p;var n,r=e?nu:eu,i=this._parents,a=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=a.length,s=new Array(o),c=new Array(o),u=new Array(o),f=0;f<o;++f){var l=i[f],h=a[f],d=h.length,p=t.call(l,l&&l.__data__,f,i),g=p.length,m=c[f]=new Array(g),v=s[f]=new Array(g);r(l,h,m,v,u[f]=new Array(d),p,e);for(var y,b,w=0,_=0;w<g;++w)if(y=m[w]){for(w>=_&&(_=w+1);!(b=v[_])&&++_<g;);y._next=b||null}}return(s=new Lu(s,i))._enter=c,s._exit=u,s},enter:function(){return new Lu(this._enter||this._groups.map(Qc),this._parents)},exit:function(){return new Lu(this._exit||this._groups.map(Qc),this._parents)},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var c,u=e[s],f=n[s],l=u.length,h=o[s]=new Array(l),d=0;d<l;++d)(c=u[d]||f[d])&&(h[d]=c);for(;s<r;++s)o[s]=e[s];return new Lu(o,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&o!==r.nextSibling&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=ru);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,s=n[a],c=s.length,u=i[a]=new Array(c),f=0;f<c;++f)(o=s[f])&&(u[f]=o);u.sort(e)}return new Lu(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,a=e[n],o=0,s=a.length;o<s;++o)(i=a[o])&&t.call(i,i.__data__,o,a);return this},attr:function(t,e){var n=Ic(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?au:iu:"function"==typeof e?n.local?uu:cu:n.local?su:ou)(n,e))},style:function(t,e,n){var r;return arguments.length>1?this.each((null==e?lu:"function"==typeof e?du:hu)(t,e,null==n?"":n)):fu(r=this.node()).getComputedStyle(r,null).getPropertyValue(t)},property:function(t,e){return arguments.length>1?this.each((null==e?pu:"function"==typeof e?mu:gu)(t,e)):this.node()[t]},classed:function(t,e){var n=vu(t+"");if(arguments.length<2){for(var r=yu(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?Au:e?xu:Cu)(n,e))},text:function(t){return arguments.length?this.each(null==t?Su:("function"==typeof t?Mu:Tu)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Eu:("function"==typeof t?Uu:ku)(t)):this.node().innerHTML},raise:function(){return this.each(Du)},lower:function(){return this.each(Pu)},append:function(t){var e="function"==typeof t?t:Bc(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:Bc(t),r=null==e?Iu:"function"==typeof e?e:Jc(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Nu)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,a=Wc(t+""),o=a.length;if(!(arguments.length<2)){for(s=e?Gc:Kc,null==n&&(n=!1),r=0;r<o;++r)this.each(s(a[r],e,n));return this}var s=this.node().__on;if(s)for(var c,u=0,f=s.length;u<f;++u)for(r=0,c=s[u];r<o;++r)if((i=a[r]).type===c.type&&i.name===c.name)return c.value},dispatch:function(t,e){return this.each(("function"==typeof e?Fu:Bu)(t,e))}};var Hu,zu=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},$u=function(t){return(t=zu(Math.abs(t)))?t[1]:NaN},Yu=function(t,e){var n=zu(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},ju={"":function(t,e){t:for(var n,r=(t=t.toPrecision(e)).length,i=1,a=-1;i<r;++i)switch(t[i]){case".":a=n=i;break;case"0":0===a&&(a=i),n=i;break;case"e":break t;default:a>0&&(a=0)}return a>0?t.slice(0,a)+t.slice(n+1):t},"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Yu(100*t,e)},r:Yu,s:function(t,e){var n=zu(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Hu=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+zu(t,Math.max(0,e+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},qu=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i,Wu=function(t){return new Ku(t)};function Ku(t){if(!(e=qu.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",r=e[2]||">",i=e[3]||"-",a=e[4]||"",o=!!e[5],s=e[6]&&+e[6],c=!!e[7],u=e[8]&&+e[8].slice(1),f=e[9]||"";"n"===f?(c=!0,f="g"):ju[f]||(f=""),(o||"0"===n&&"="===r)&&(o=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=a,this.zero=o,this.width=s,this.comma=c,this.precision=u,this.type=f}Ku.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var Gu=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Xu(t){return t}var Ju,Zu,Qu,tf=function(t){var e,n,r=t.grouping&&t.thousands?(e=t.grouping,n=t.thousands,function(t,r){for(var i=t.length,a=[],o=0,s=e[0],c=0;i>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),a.push(t.substring(i-=s,i+s)),!((c+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(n)}):Xu,i=t.currency,a=t.decimal;function o(t){var e=(t=Wu(t)).fill,n=t.align,o=t.sign,s=t.symbol,c=t.zero,u=t.width,f=t.comma,l=t.precision,h=t.type,d="$"===s?i[0]:"#"===s&&/[boxX]/.test(h)?"0"+h.toLowerCase():"",p="$"===s?i[1]:/[%p]/.test(h)?"%":"",g=ju[h],m=!h||/[defgprs%]/.test(h);function v(t){var i,s,v,y=d,b=p;if("c"===h)b=g(t)+b,t="";else{var w=((t=+t)<0||1/t<0)&&(t*=-1,!0);if(t=g(t,l),w)for(i=-1,s=t.length,w=!1;++i<s;)if(48<(v=t.charCodeAt(i))&&v<58||"x"===h&&96<v&&v<103||"X"===h&&64<v&&v<71){w=!0;break}if(y=(w?"("===o?o:"-":"-"===o||"("===o?"":o)+y,b=b+("s"===h?Gu[8+Hu/3]:"")+(w&&"("===o?")":""),m)for(i=-1,s=t.length;++i<s;)if(48>(v=t.charCodeAt(i))||v>57){b=(46===v?a+t.slice(i+1):t.slice(i))+b,t=t.slice(0,i);break}}f&&!c&&(t=r(t,1/0));var _=y.length+t.length+b.length,x=_<u?new Array(u-_+1).join(e):"";switch(f&&c&&(t=r(x+t,x.length?u-b.length:1/0),x=""),n){case"<":return y+t+b+x;case"=":return y+x+t+b;case"^":return x.slice(0,_=x.length>>1)+y+t+b+x.slice(_)}return x+y+t+b}return l=null==l?h?6:12:/[gprs]/.test(h)?Math.max(1,Math.min(21,l)):Math.max(0,Math.min(20,l)),v.toString=function(){return t+""},v}return{format:o,formatPrefix:function(t,e){var n=o(((t=Wu(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor($u(e)/3))),i=Math.pow(10,-r),a=Gu[8+r/3];return function(t){return n(i*t)+a}}}};!function(t){Ju=tf(t),Zu=Ju.format,Qu=Ju.formatPrefix}({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var ef={value:function(){}};function nf(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new rf(r)}function rf(t){this._=t}function af(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function of(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function sf(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=ef,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}rf.prototype=nf.prototype={constructor:rf,on:function(t,e){var n,r=this._,i=af(t+"",r),a=-1,o=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<o;)if(n=(t=i[a]).type)r[n]=sf(r[n],t.name,e);else if(null==e)for(n in r)r[n]=sf(r[n],t.name,null);return this}for(;++a<o;)if((n=(t=i[a]).type)&&(n=of(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new rf(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(r=this._[t]).length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};var cf=nf,uf=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},ff=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return uf(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}};var lf=ff(uf),hf=lf.right,df=(lf.left,hf),pf=Array.prototype,gf=(pf.slice,pf.map,function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a}),mf=Math.sqrt(50),vf=Math.sqrt(10),yf=Math.sqrt(2),bf=function(t,e,n){var r=wf(t,e,n);return gf(Math.ceil(t/r)*r,Math.floor(e/r)*r+r/2,r)};function wf(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=mf?i*=10:a>=vf?i*=5:a>=yf&&(i*=2),e<t?-i:i}var _f=function(t,e){var n,r=0,i=t.length,a=-1;if(null==e)for(;++a<i;)(n=+t[a])&&(r+=n);else for(;++a<i;)(n=+e(t[a],a,t))&&(r+=n);return r};var xf=Array.prototype,Cf=xf.map,Af=xf.slice;var Sf=function(t){return function(){return t}},Tf=function(t){return+t},Mf=[0,1];function Ef(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Sf(e)}function kf(t,e,n,r){var i=t[0],a=t[1],o=e[0],s=e[1];return a<i?(i=n(a,i),o=r(s,o)):(i=n(i,a),o=r(o,s)),function(t){return o(i(t))}}function Uf(t,e,n,r){var i=Math.min(t.length,e.length)-1,a=new Array(i),o=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<i;)a[s]=n(t[s],t[s+1]),o[s]=r(e[s],e[s+1]);return function(e){var n=df(t,e,1,i)-1;return o[n](a[n](e))}}function Df(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function Pf(t,e){var n,r,i,a=Mf,o=Mf,s=Gn,c=!1;function u(){return n=Math.min(a.length,o.length)>2?Uf:kf,r=i=null,f}function f(e){return(r||(r=n(a,o,c?function(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:r(t)}}}(t):t,s)))(+e)}return f.invert=function(t){return(i||(i=n(o,a,Ef,c?function(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:r(t)}}}(e):e)))(+t)},f.domain=function(t){return arguments.length?(a=Cf.call(t,Tf),u()):a.slice()},f.range=function(t){return arguments.length?(o=Af.call(t),u()):o.slice()},f.rangeRound=function(t){return o=Af.call(t),s=ya,u()},f.clamp=function(t){return arguments.length?(c=!!t,u()):c},f.interpolate=function(t){return arguments.length?(s=t,u()):s},u()}var If=function(t,e,n){var r,i=t[0],a=t[t.length-1],o=wf(i,a,null==e?10:e);switch((n=Wu(null==n?",f":n)).type){case"s":var s=Math.max(Math.abs(i),Math.abs(a));return null!=n.precision||isNaN(r=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor($u(e)/3)))-$u(Math.abs(t)))}(o,s))||(n.precision=r),Qu(n,s);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,$u(e)-$u(t))+1}(o,Math.max(Math.abs(i),Math.abs(a))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=function(t){return Math.max(0,-$u(Math.abs(t)))}(o))||(n.precision=r-2*("%"===n.type))}return Zu(n)};function Nf(t){var e=t.domain;return t.ticks=function(t){var n=e();return bf(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){return If(e(),t,n)},t.nice=function(n){var r=e(),i=r.length-1,a=null==n?10:n,o=r[0],s=r[i],c=wf(o,s,a);return c&&(c=wf(Math.floor(o/c)*c,Math.ceil(s/c)*c,a),r[0]=Math.floor(o/c)*c,r[i]=Math.ceil(s/c)*c,e(r)),t},t}function Rf(){var t=Pf(Ef,zn);return t.copy=function(){return Df(t,Rf())},Nf(t)}var Bf=function(t){return t.match(/.{6}/g).map((function(t){return"#"+t}))},Ff=(Bf("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Bf("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Bf("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Bf("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Math.PI/180),Of=180/Math.PI,Lf=-.29227,Vf=-.90649,Hf=1.97294*Vf,zf=3.5172982438,$f=-.6557636667999999;function Yf(t){if(t instanceof qf)return new qf(t.h,t.s,t.l,t.opacity);t instanceof Cn||(t=_n(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=($f*r+Hf*e-zf*n)/($f+Hf-zf),a=r-i,o=(1.97294*(n-i)-Lf*a)/Vf,s=Math.sqrt(o*o+a*a)/(1.97294*i*(1-i)),c=s?Math.atan2(o,a)*Of-120:NaN;return new qf(c<0?c+360:c,s,i,t.opacity)}function jf(t,e,n,r){return 1===arguments.length?Yf(t):new qf(t,e,n,null==r?1:r)}function qf(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Wf(t){return function e(n){function r(e,r){var i=t((e=jf(e)).h,(r=jf(r)).h),a=Rn(e.s,r.s),o=Rn(e.l,r.l),s=Rn(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=a(t),e.l=o(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}en(qf,jf,nn(rn,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new qf(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new qf(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Ff,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new Cn(255*(e+n*(-.14861*r+1.78277*i)),255*(e+n*(Lf*r+Vf*i)),255*(e+n*(1.97294*r)),this.opacity)}}));Wf((function(t,e){var n=e-t;return n?In(t,n>180||n<-180?n-360*Math.round(n/360):n):Pn(isNaN(t)?e:t)}));var Kf=Wf(Rn);Kf(jf(300,.5,0),jf(-240,.5,1)),Kf(jf(-100,.75,.35),jf(80,1.5,.8)),Kf(jf(260,.75,.35),jf(80,1.5,.8)),jf();function Gf(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}Gf(Bf("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Gf(Bf("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Gf(Bf("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Gf(Bf("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));var Xf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jf=function(t){return t},Zf=function(t){for(var e=[],n=0,r=t.length;n<r;n++)e[n]=t[r-n-1];return e},Qf=function(t,e){t.each((function(){for(var t,n,r="string"==typeof(n=this)?new Lu([[document.querySelector(n)]],[document.documentElement]):new Lu([[n]],Ou),i=r.text().split(/\s+/).reverse(),a=[],o=(r.attr("y"),parseFloat(r.attr("dy"))||0),s=r.text(null).append("tspan").attr("x",0).attr("dy",o+"em");t=i.pop();)a.push(t),s.text(a.join(" ")),s.node().getComputedTextLength()>e&&a.length>1&&(a.pop(),s.text(a.join(" ")),a=[t],s=r.append("tspan").attr("x",0).attr("dy",1.2+o+"em").text(t))}))},tl={d3_drawShapes:function(t,e,n,r,i,a){"rect"===t?e.attr("height",n).attr("width",r):"circle"===t?e.attr("r",i):"line"===t?e.attr("x1",0).attr("x2",r).attr("y1",0).attr("y2",0):"path"===t&&e.attr("d",a)},d3_addText:function(t,e,n,r,i){e.append("text").attr("class",r+"label");var a=t.selectAll("g."+r+"cell text."+r+"label").data(n).text(Jf);return i&&t.selectAll("g."+r+"cell text."+r+"label").call(Qf,i),a},d3_calcType:function(t,e,n,r,i,a){var o=t.invertExtent?function(t,e,n){var r=t.range().map((function(r){var i=t.invertExtent(r);return e(i[0])+" "+n+" "+e(i[1])}));return{data:t.range(),labels:r,feature:Jf}}(t,i,a):t.ticks?function(t,e,n){var r=[];if(e.length>1)r=e;else for(var i=t.domain(),a=(i[i.length-1]-i[0])/(e-1),o=0;o<e;o++)r.push(i[0]+o*a);var s=r.map(n);return{data:r,labels:s,feature:function(e){return t(e)}}}(t,n,i):function(t){return{data:t.domain(),labels:t.domain(),feature:function(e){return t(e)}}}(t),s=t.range&&t.range()||t.domain();return o.labels=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1],n=arguments[2],r=arguments[3],i=arguments[4];if("object"===(void 0===e?"undefined":Xf(e))){if(0===e.length)return t;for(var a=e.length;a<t.length;a++)e.push(t[a]);return e}if("function"==typeof e){for(var o=[],s=t.length,c=0;c<s;c++)o.push(e({i:c,genLength:s,generatedLabels:t,domain:n,range:r,labelDelimiter:i}));return o}return t}(o.labels,r,t.domain(),s,a),e&&(o.labels=Zf(o.labels),o.data=Zf(o.data)),o},d3_filterCells:function(t,e){var n=t.data.map((function(e,n){return{data:e,label:t.labels[n]}})).filter(e),r=n.map((function(t){return t.data})),i=n.map((function(t){return t.label}));return t.data=t.data.filter((function(t){return-1!==r.indexOf(t)})),t.labels=t.labels.filter((function(t){return-1!==i.indexOf(t)})),t},d3_placement:function(t,e,n,r,i,a){e.attr("transform",n),r.attr("transform",i),"horizontal"===t&&r.style("text-anchor",a)},d3_addEvents:function(t,e){t.on("mouseover.legend",(function(t){!function(t,e,n){t.call("cellover",n,e)}(e,t,this)})).on("mouseout.legend",(function(t){!function(t,e,n){t.call("cellout",n,e)}(e,t,this)})).on("click.legend",(function(t){!function(t,e,n){t.call("cellclick",n,e)}(e,t,this)}))},d3_title:function(t,e,n,r){if(""!==e){t.selectAll("text."+n+"legendTitle").data([e]).enter().append("text").attr("class",n+"legendTitle"),t.selectAll("text."+n+"legendTitle").text(e),r&&t.selectAll("text."+n+"legendTitle").call(Qf,r);var i=t.select("."+n+"legendCells"),a=t.select("."+n+"legendTitle").nodes().map((function(t){return t.getBBox().height}))[0],o=-i.nodes().map((function(t){return t.getBBox().x}))[0];i.attr("transform","translate("+o+","+a+")")}},d3_defaultLocale:{format:Zu,formatPrefix:Qu},d3_defaultFormatSpecifier:".01f",d3_defaultDelimiter:"to"};function el(){var t=Rf(),e="rect",n=15,r=15,i=10,a=2,o=[5],s=void 0,c=[],u="",f=!1,l="",h=tl.d3_defaultLocale,d=tl.d3_defaultFormatSpecifier,p=10,g="middle",m=tl.d3_defaultDelimiter,v=void 0,y="vertical",b=!1,w=void 0,_=void 0,x=cf("cellover","cellout","cellclick");function C(C){var A=tl.d3_calcType(t,b,o,c,h.format(d),m);C.selectAll("g").data([t]).enter().append("g").attr("class",u+"legendCells"),s&&tl.d3_filterCells(A,s);var S=C.select("."+u+"legendCells").selectAll("."+u+"cell").data(A.data),T=S.enter().append("g").attr("class",u+"cell");T.append(e).attr("class",u+"swatch");var M=C.selectAll("g."+u+"cell "+e+"."+u+"swatch").data(A.data);tl.d3_addEvents(T,x),S.exit().transition().style("opacity",0).remove(),M.exit().transition().style("opacity",0).remove(),M=M.merge(M),tl.d3_drawShapes(e,M,r,n,i,w);var E=tl.d3_addText(C,T,A.labels,u,v);S=T.merge(S);var k=E.nodes().map((function(t){return t.getBBox()})),U=M.nodes().map((function(t){return t.getBBox()}));f?M.attr("class",(function(t){return u+"swatch "+A.feature(t)})):"line"==e?M.style("stroke",A.feature):M.style("fill",A.feature);var D,P=void 0,I=void 0,N="start"==g?0:"middle"==g?.5:1;"vertical"===y?(D=k.map((function(t,e){return Math.max(t.height,U[e].height)})),P=function(t,e){return"translate(0, "+(_f(D.slice(0,e))+e*a)+")"},I=function(t,e){return"translate( "+(U[e].width+U[e].x+p)+", "+(U[e].y+U[e].height/2+5)+")"}):"horizontal"===y&&(P=function(t,e){return"translate("+e*(U[e].width+a)+",0)"},I=function(t,e){return"translate("+(U[e].width*N+U[e].x)+",\n          "+(U[e].height+U[e].y+p+8)+")"}),tl.d3_placement(y,S,P,E,I,g),tl.d3_title(C,l,u,_),S.transition().style("opacity",1)}return C.scale=function(e){return arguments.length?(t=e,C):t},C.cells=function(t){return arguments.length?((t.length>1||t>=2)&&(o=t),C):o},C.cellFilter=function(t){return arguments.length?(s=t,C):s},C.shape=function(t,n){return arguments.length?(("rect"==t||"circle"==t||"line"==t||"path"==t&&"string"==typeof n)&&(e=t,w=n),C):e},C.shapeWidth=function(t){return arguments.length?(n=+t,C):n},C.shapeHeight=function(t){return arguments.length?(r=+t,C):r},C.shapeRadius=function(t){return arguments.length?(i=+t,C):i},C.shapePadding=function(t){return arguments.length?(a=+t,C):a},C.labels=function(t){return arguments.length?(c=t,C):c},C.labelAlign=function(t){return arguments.length?("start"!=t&&"end"!=t&&"middle"!=t||(g=t),C):g},C.locale=function(t){return arguments.length?(h=tf(t),C):h},C.labelFormat=function(t){return arguments.length?(d=Wu(t),C):C.locale().format(d)},C.labelOffset=function(t){return arguments.length?(p=+t,C):p},C.labelDelimiter=function(t){return arguments.length?(m=t,C):m},C.labelWrap=function(t){return arguments.length?(v=t,C):v},C.useClass=function(t){return arguments.length?(!0!==t&&!1!==t||(f=t),C):f},C.orient=function(t){return arguments.length?("horizontal"!=(t=t.toLowerCase())&&"vertical"!=t||(y=t),C):y},C.ascending=function(t){return arguments.length?(b=!!t,C):b},C.classPrefix=function(t){return arguments.length?(u=t,C):u},C.title=function(t){return arguments.length?(l=t,C):l},C.titleWidth=function(t){return arguments.length?(_=t,C):_},C.textWrap=function(t){return arguments.length?(textWrap=t,C):textWrap},C.on=function(){var t=x.on.apply(x,arguments);return t===x?C:t},C}var nl=n(14),rl=n.n(nl),il={renderMatrix:function(t,e,n,r,i){var a=6;if(null!=n.colorTicks&&null!=n.colorTicks&&(a=n.colorTicks),"string"==typeof n||n instanceof String){console.log("shift datastructure due to old yaml matrix description.");var o=n;(n={}).data=o}return a=Math.max(3,Math.min(9,a)),Li(n.data).then((function(i){if(Je("#matrix").empty()){var o={},s=Je("#"+e).append("div").attr("id","tooltip_matrix").attr("class","tooltip").style("opacity",0),c=_i(i,(function(t){return t.ClustName})).keys();i.forEach((function(t){delete t[i.columns[0]]})),i.columns.shift(),o.max=Number.MIN_VALUE,o.min=Number.MAX_VALUE,i.forEach((function(t){var e=Object.values(t).map((function(t){return parseFloat(t)}));o.min=Math.min(o.min,xt(e)),o.max=Math.max(o.max,_t(e))})),o.margin={top:40,right:70,bottom:0,left:80},o.size=t.clientWidth,o.width=o.size-o.margin.left-o.margin.right,o.cellPadding=4,o.cellWidth=o.width/Object.keys(i[0]).length-o.cellPadding,o.cellHeight=o.cellWidth,o.height=i.length*(o.cellWidth+o.cellPadding)+o.margin.top+o.margin.bottom;var u=null;console.log(n.colormapInvert),u=null!=n.colormapInvert&&null!=n.colormapInvert&&n.colormapInvert?Pa().domain([o.min,o.max]).range(rl.a.YlGnBu[a].reverse()):Pa().domain([o.min,o.max]).range(rl.a.YlGnBu[a]),o.svg=Je("#"+e).append("svg").attr("id","matrix").attr("width",o.width+o.margin.left+o.margin.right).attr("height",o.height+o.margin.top+o.margin.bottom).append("g").attr("transform","translate("+o.margin.left+","+o.margin.top+")");var f=o.svg.selectAll(".matrix-row").data(i,(function(t){return t})).enter().append("g").attr("class","matrix-row").attr("id",(function(t,e){return"matrixrow_"+e})).attr("transform",(function(t,e){return"translate(0,"+(o.cellHeight+o.cellPadding)*e+")"}));f.append("text").attr("class","matrix-label matrix-row-label").attr("x",-10).attr("y",o.cellHeight/2).attr("dy",".35em").attr("text-anchor","end").text((function(t,e){return c[e]})).style("opacity",1).on("click",(function(t,e){r.clickHandler(c[e],"")}));f.selectAll(".matrix-cell-business").data((function(t){return Object.values(t)})).enter().append("rect").attr("class","matrix-cell matrix-cell-business").attr("height",o.cellHeight).attr("width",o.cellWidth).attr("x",(function(t,e){return(o.cellWidth+o.cellPadding)*e})).attr("fill",(function(t){return u(t)})).on("mouseover",(function(t,e){Je(this).style("cursor","pointer"),Je(this).attr("stroke","white").attr("stroke-width","2"),s.transition().duration(200).style("opacity",.8),s.html(""+parseFloat(t).toFixed(2)),s.style("left",Fe.pageX+"px"),s.style("top",(parseInt(Je(this.parentNode).attr("id").split("_")[1])+1)*(o.cellHeight+o.cellPadding)+"px")})).on("mouseout",(function(t){Je(this).style("cursor","default"),Je(this).attr("stroke","black").attr("stroke-width","0"),s.transition().duration(500).style("opacity",0)})).on("click",(function(t,e){var n=this.parentElement.id.split("_")[1];r.clickHandler(c[n],i.columns[e])})),o.svg.selectAll(".matrix-column-label").data(Object.keys(i[0])).enter().append("text").attr("class","matrix-label matrix-column-label").attr("text-anchor","start").attr("transform",(function(t,e){return"translate("+(e*(o.cellWidth+o.cellPadding)+(o.cellWidth+o.cellPadding)/2)+",-8) rotate(270)"})).text((function(t,e){return t})).on("click",(function(t,e){r.clickHandler("",i.columns[e])}));o.svg.append("g").attr("class","colorLegend").attr("transform","translate("+(o.width+5)+",0)");var l=el().ascending(!0).labelAlign("start").shapeWidth(5).shapeHeight((i.length*(o.cellWidth+o.cellPadding)-o.cellPadding)/a-1).cells(pt(o.min,o.max,(o.max-o.min)/a)).scale(u);o.svg.select(".colorLegend").call(l)}})).catch((function(t){console.log("error loading vis data:"+t)}))},renderBarChart:function(t,e,n,r,i){var a=ea(".2n"),o={margin:{top:20,right:20,bottom:30,left:40}};o.width=t.clientWidth-o.margin.left-o.margin.right,o.height=o.width,o.padding=15,o.tooltip=Je("#"+e).append("div").attr("class","tooltip").attr("id","tooltip_barChart").style("opacity",0),o.svg=Je("#"+e).append("svg").attr("width",o.width+o.margin.left+o.margin.right).attr("height",o.height+o.margin.top+o.margin.bottom),o.x=va().rangeRound([0,o.width]).padding(.1),o.y=Da().rangeRound([o.height,0]);var s=o.svg.append("g").attr("transform","translate("+o.margin.left+","+o.margin.top+")");return Li(n).then(t=>t.map(t=>(t.frequency=+t.frequency,t))).then(t=>{o.x.domain(t.map((function(t){return t.type}))),o.y.domain([0,_t(t,(function(t){return t.frequency}))]),s.append("g").attr("class","axis axis--x").attr("transform","translate("+o.padding+","+o.height+")").call(Dt(o.x)),s.append("g").attr("class","axis axis--y").call(Pt(o.y).ticks(10).tickFormat(a)).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy","0.71em").attr("text-anchor","end").text("Number of Cells").attr("fill","white"),s.selectAll(".bar").data(t).enter().append("rect").attr("class","bar").attr("x",(function(t){return o.padding+o.x(t.type)})).attr("y",(function(t){return o.y(0)})).attr("width",o.x.bandwidth()).attr("height",(function(t){return o.height-o.y(0)})),o.svg.selectAll("rect").attr("y",(function(t){return o.y(t.frequency)})).attr("height",(function(t){return o.height-o.y(t.frequency)})),o.svg.selectAll("rect").on("mouseover",(function(t){Je(this).style("cursor","pointer"),Je(this).attr("stroke","white").attr("stroke-width","2"),o.tooltip.transition().duration(200).style("opacity",.8),o.tooltip.html(""+a(parseFloat(t.frequency))).style("left",Fe.pageX+"px").style("top",Je(this).attr("y")-o.margin.top+"px")})).on("mouseout",(function(t){Je(this).style("cursor","default"),Je(this).attr("stroke","black").attr("stroke-width","0"),o.tooltip.transition().duration(500).style("opacity",0)})).on("click",(function(t,e){r.clickHandler(t.type)}))}).catch(t=>{throw t})},renderBoxPlot:function(t,e,n,r){}};il.renderScatterplot=function(t,e,n,r,i){var a=20,o=20,s=30,c=40,u=t.clientWidth-c-o,f=u,l=ea(".2n"),h=(n=n).clusters.labels.split(","),d=n.clusters.colors.split(","),p=n.clusters.reorder.split(","),g=function(t){return t[n.axes.x]},m=Da().range([0,u]),v=function(t){return m(g(t))},y=Dt(m);y.ticks(5).tickFormat(ea(".1f"));var b=function(t){return t[n.axes.y]},w=Da().range([f,0]),_=function(t){return w(b(t))},x=Pt(w);x.ticks(5).tickFormat(ea(".1f"));var C=function(t){return h[parseInt(t.clust_ID)-1]},A=ma().domain(h).range(d),S=d.slice().sort((function(t,e){return p.indexOf(h[d.indexOf(t)])-p.indexOf(h[d.indexOf(e)])})),T=ma().domain(p).range(S),M=Je("#"+e).append("svg").attr("width",u+c+o).attr("height",f+a+s).append("g").attr("transform","translate("+c+","+a+")"),E=Je("body").append("div").attr("class","tooltip").style("opacity",0).style("width","100px");return Li(n.data).then((function(t){t.forEach((function(t){t[n.axes.x]=+t[n.axes.x],t[n.axes.y]=+t[n.axes.y]}));var e=(Math.abs(_t(t,g))+Math.abs(xt(t,g)))/10;m.domain([xt(t,g)-e,_t(t,g)+e]),w.domain([xt(t,b)-e,_t(t,b)+e]),M.append("g").attr("class","x axis").attr("transform","translate(0,"+f+")").call(y).append("text").attr("class","label").attr("x",u).attr("y",-6).style("text-anchor","end").text(n.axes.x).attr("fill","white"),M.append("g").attr("class","y axis").call(x).append("text").attr("class","label").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text(n.axes.y).attr("fill","white");var i=1.5,a=.5;t.length<=100?(i=3.5,a=1):t.length<=1e3&&(i=2,a=.95),M.selectAll(".dot").data(t).enter().append("circle").attr("class","dot").attr("r",i).attr("cx",v).attr("cy",_).style("fill",(function(t){return"#"+A(C(t))})).attr("fill-opacity",a).on("click",(function(t){r.clickHandler(function(t){return[parseInt(t.X_position),parseInt(t.Y_position)]}(t))})).on("mouseover",(function(t){Je(this).style("cursor","pointer"),E.transition().duration(200).style("opacity",.9),E.html(C(t)+"<br/> (x: "+l(parseFloat(g(t)))+", y: "+l(parseFloat(b(t)))+")").style("left",Fe.pageX+5+"px").style("top",Fe.pageY-28+"px")})).on("mouseout",(function(t){Je(this).style("cursor","default"),E.transition().duration(500).style("opacity",0)}));var o=M.selectAll(".legend").data(T.domain()).enter().append("g").attr("class","legend").attr("transform",(function(t,e){return"translate(0,"+20*e+")"}));o.append("rect").attr("x",u-18).attr("width",18).attr("height",18).style("fill",(function(t){return console.log(T(t)),"#"+T(t)})),o.append("text").attr("x",u-24).attr("y",9).attr("dy",".35em").style("text-anchor","end").text((function(t){return t})).attr("font-size","0.8em").attr("fill","white")})).catch(t=>{throw t})},il.renderCanvasScatterplot=function(t,e,n,r,i){if(Je("#axis-svg").empty()){i=i,n.data.length;var a,o,s=0,c=1,u=n.clusters.labels.split(","),f=n.clusters.colors.split(","),l=n.clusters.reorder.split(","),h={top:10,right:10,bottom:30,left:30},d=t.clientWidth-h.left-h.right,p=d,g=(ea(".2n"),d-h.left-h.right),m=p-h.top-h.bottom,v=Je("#"+e).append("div").style("width",d+"px").style("height",p+"px");return v.append("svg").attr("id","axis-svg").attr("class","plot"),Je("#"+e).append("div").style("width",d+"px").style("height","100px").append("svg").attr("id","axis-svg-legend"),v.append("canvas").attr("id","plot-canvas").attr("class","plot"),Li(n.data).then((function(t){s=Math.min(t.length,1e4),console.log("shifting data");var e=t.map((function(t,e){return[parseFloat(t[n.axes.x]),parseFloat(t[n.axes.y]),t,e,!1]})),v=t.map((function(t,e){return[parseFloat(t.X_position),parseFloat(t.Y_position),t,e,!1]})),y=Yi(e),b=(Yi(v),_.sampleSize(e,s)),w=1.5,x=.5;e.length<=100?(w=5.5,x=1):e.length<=1e3?(w=4,x=.9):e.length<=1e4?(w=3,x=.75):e.length<=1e5?(w=2,x=.6):e.length<=1e6&&(w=1,x=.5);var C=Je("#plot-canvas").attr("width",g-1).attr("height",m-1).style("transform","translate("+(h.left+1)+"px,"+(h.top+1)+"px)"),A=Je("#axis-svg").attr("width",d).attr("height",p).append("g").attr("transform","translate("+h.left+","+h.top+")"),S=Je("#axis-svg-legend").attr("width",d).attr("height",100).append("g").attr("transform","translate("+h.left+","+h.top+")"),T=ht(e,(function(t){return t[0]})),M=ht(e,(function(t){return t[1]})),E=Da().domain([T[0],T[1]]).range([0,g]),k=E.copy(),U=Da().domain([M[0],M[1]]).range([m,0]),D=U.copy(),P=Dt().scale(E).tickSizeInner(-m).tickSizeOuter(0).tickPadding(10),I=Pt().scale(U).tickSizeInner(-g).tickSizeOuter(0),N=function(){var t,e,n=Tc,r=Mc,i=Dc,a=kc,o=Uc,s=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],u=250,f=bc,l=Lt("start","zoom","end"),h=0;function d(t){t.property("__zoom",Ec).on("wheel.zoom",w).on("mousedown.zoom",_).on("dblclick.zoom",x).filter(o).on("touchstart.zoom",C).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",S).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(t,e){return(e=Math.max(s[0],Math.min(s[1],e)))===t.k?t:new xc(e,t.x,t.y)}function g(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new xc(t.k,r,i)}function m(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function v(t,e,n){t.on("start.zoom",(function(){y(this,arguments).start()})).on("interrupt.zoom end.zoom",(function(){y(this,arguments).end()})).tween("zoom",(function(){var t=this,i=arguments,a=y(t,i),o=r.apply(t,i),s=null==n?m(o):"function"==typeof n?n.apply(t,i):n,c=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),u=t.__zoom,l="function"==typeof e?e.apply(t,i):e,h=f(u.invert(s).concat(c/u.k),l.invert(s).concat(c/l.k));return function(t){if(1===t)t=l;else{var e=h(t),n=c/e[2];t=new xc(n,s[0]-e[0]*n,s[1]-e[1]*n)}a.zoom(null,t)}}))}function y(t,e,n){return!n&&t.__zooming||new b(t,e)}function b(t,e){this.that=t,this.args=e,this.active=0,this.extent=r.apply(t,e),this.taps=0}function w(){if(n.apply(this,arguments)){var t=y(this,arguments),e=this.__zoom,r=Math.max(s[0],Math.min(s[1],e.k*Math.pow(2,a.apply(this,arguments)))),o=Qn(this);if(t.wheel)t.mouse[0][0]===o[0]&&t.mouse[0][1]===o[1]||(t.mouse[1]=e.invert(t.mouse[0]=o)),clearTimeout(t.wheel);else{if(e.k===r)return;t.mouse=[o,e.invert(o)],Tr(this),t.start()}Sc(),t.wheel=setTimeout(u,150),t.zoom("mouse",i(g(p(e,r),t.mouse[0],t.mouse[1]),t.extent,c))}function u(){t.wheel=null,t.end()}}function _(){if(!e&&n.apply(this,arguments)){var t=y(this,arguments,!0),r=Je(Fe.view).on("mousemove.zoom",u,!0).on("mouseup.zoom",f,!0),a=Qn(this),o=Fe.clientX,s=Fe.clientY;Qe(Fe.view),Ac(),t.mouse=[a,this.__zoom.invert(a)],Tr(this),t.start()}function u(){if(Sc(),!t.moved){var e=Fe.clientX-o,n=Fe.clientY-s;t.moved=e*e+n*n>h}t.zoom("mouse",i(g(t.that.__zoom,t.mouse[0]=Qn(t.that),t.mouse[1]),t.extent,c))}function f(){r.on("mousemove.zoom mouseup.zoom",null),tn(Fe.view,t.moved),Sc(),t.end()}}function x(){if(n.apply(this,arguments)){var t=this.__zoom,e=Qn(this),a=t.invert(e),o=t.k*(Fe.shiftKey?.5:2),s=i(g(p(t,o),e,a),r.apply(this,arguments),c);Sc(),u>0?Je(this).transition().duration(u).call(v,s,e):Je(this).call(d.transform,s)}}function C(){if(n.apply(this,arguments)){var e,r,i,a,o=Fe.touches,s=o.length,c=y(this,arguments,Fe.changedTouches.length===s);for(Ac(),r=0;r<s;++r)i=o[r],a=[a=Zn(this,o,i.identifier),this.__zoom.invert(a),i.identifier],c.touch0?c.touch1||c.touch0[2]===a[2]||(c.touch1=a,c.taps=0):(c.touch0=a,e=!0,c.taps=1+!!t);t&&(t=clearTimeout(t)),e&&(c.taps<2&&(t=setTimeout((function(){t=null}),500)),Tr(this),c.start())}}function A(){if(this.__zooming){var e,n,r,a,o=y(this,arguments),s=Fe.changedTouches,u=s.length;for(Sc(),t&&(t=clearTimeout(t)),o.taps=0,e=0;e<u;++e)n=s[e],r=Zn(this,s,n.identifier),o.touch0&&o.touch0[2]===n.identifier?o.touch0[0]=r:o.touch1&&o.touch1[2]===n.identifier&&(o.touch1[0]=r);if(n=o.that.__zoom,o.touch1){var f=o.touch0[0],l=o.touch0[1],h=o.touch1[0],d=o.touch1[1],m=(m=h[0]-f[0])*m+(m=h[1]-f[1])*m,v=(v=d[0]-l[0])*v+(v=d[1]-l[1])*v;n=p(n,Math.sqrt(m/v)),r=[(f[0]+h[0])/2,(f[1]+h[1])/2],a=[(l[0]+d[0])/2,(l[1]+d[1])/2]}else{if(!o.touch0)return;r=o.touch0[0],a=o.touch0[1]}o.zoom("touch",i(g(n,r,a),o.extent,c))}}function S(){if(this.__zooming){var t,n,r=y(this,arguments),i=Fe.changedTouches,a=i.length;for(Ac(),e&&clearTimeout(e),e=setTimeout((function(){e=null}),500),t=0;t<a;++t)n=i[t],r.touch0&&r.touch0[2]===n.identifier?delete r.touch0:r.touch1&&r.touch1[2]===n.identifier&&delete r.touch1;if(r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0)r.touch0[1]=this.__zoom.invert(r.touch0[0]);else if(r.end(),2===r.taps){var o=Je(this).on("dblclick.zoom");o&&o.apply(this,arguments)}}}return d.transform=function(t,e,n){var r=t.selection?t.selection():t;r.property("__zoom",Ec),t!==r?v(t,e,n):r.interrupt().each((function(){y(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},d.scaleBy=function(t,e,n){d.scaleTo(t,(function(){var t=this.__zoom.k,n="function"==typeof e?e.apply(this,arguments):e;return t*n}),n)},d.scaleTo=function(t,e,n){d.transform(t,(function(){var t=r.apply(this,arguments),a=this.__zoom,o=null==n?m(t):"function"==typeof n?n.apply(this,arguments):n,s=a.invert(o),u="function"==typeof e?e.apply(this,arguments):e;return i(g(p(a,u),o,s),t,c)}),n)},d.translateBy=function(t,e,n){d.transform(t,(function(){return i(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),c)}))},d.translateTo=function(t,e,n,a){d.transform(t,(function(){var t=r.apply(this,arguments),o=this.__zoom,s=null==a?m(t):"function"==typeof a?a.apply(this,arguments):a;return i(Cc.translate(s[0],s[1]).scale(o.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,c)}),a)},b.prototype={start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){$e(new _c(d,t,this.that.__zoom),l.apply,l,[t,this.that,this.args])}},d.wheelDelta=function(t){return arguments.length?(a="function"==typeof t?t:wc(+t),d):a},d.filter=function(t){return arguments.length?(n="function"==typeof t?t:wc(!!t),d):n},d.touchable=function(t){return arguments.length?(o="function"==typeof t?t:wc(!!t),d):o},d.extent=function(t){return arguments.length?(r="function"==typeof t?t:wc([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),d):r},d.scaleExtent=function(t){return arguments.length?(s[0]=+t[0],s[1]=+t[1],d):[s[0],s[1]]},d.translateExtent=function(t){return arguments.length?(c[0][0]=+t[0][0],c[1][0]=+t[1][0],c[0][1]=+t[0][1],c[1][1]=+t[1][1],d):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},d.constrain=function(t){return arguments.length?(i=t,d):i},d.duration=function(t){return arguments.length?(u=+t,d):u},d.interpolate=function(t){return arguments.length?(f=t,d):f},d.on=function(){var t=l.on.apply(l,arguments);return t===l?d:t},d.clickDistance=function(t){return arguments.length?(h=(t=+t)*t,d):Math.sqrt(h)},d}().scaleExtent([1,100]).on("zoom",(function(){E=Fe.transform.rescaleX(k),P.scale(E),R.call(P),U=Fe.transform.rescaleY(D),I.scale(U),B.call(I),c=Fe.transform.k,clearTimeout(a),c<5?L(b):L()})).on("end",(function(){a=setTimeout((function(){L()}),200)})),R=A.append("g").attr("class","x axis").attr("transform","translate(0,"+m+")").call(P),B=A.append("g").attr("class","y axis").call(I);C.on("click",(function(){var t=Qn(this),n=E.invert(t[0]),i=U.invert(t[1]),a=y.find(n,i),s=E(a[0]),c=U(a[1]);(function(t,e,n,r){return Math.sqrt((n-t)*(n-t)+(r-e)*(r-e))})(t[0],t[1],s,c)<10*w&&(o&&(e[o][4]=!1),a[4]=!0,o=a[3],L(),r.clickHandler(O(a[2])))})),C.call(N);var F=C.node().getContext("2d");L();var O=function(t){return[parseInt(t.X_position),parseInt(t.Y_position)]};function L(t){var n;F.clearRect(0,0,d,p),t?t.forEach((function(t){var r=e[t[3]];r[4]?n=r:V(!1,r,w)})):e.forEach((function(t){t[4]?n=t:V(!1,t,w)})),n&&V(!0,n,w)}function V(t,e,n){if(e[0]>=ht(E.domain())[0]&&e[0]<=ht(E.domain())[1]&&e[1]>=ht(U.domain())[0]&&e[1]<=ht(U.domain())[1]){var r=E(e[0]),i=U(e[1]);if(t){a=xn("#"+f[parseInt(e[2].clust_ID)-1]);F.strokeStyle="#FFA500",F.lineWidth=5,F.fillStyle=a+"",F.beginPath(),F.arc(r,i,n*(c/10),0,2*Math.PI),F.fill(),F.stroke()}else{var a;(a=xn("#"+f[parseInt(e[2].clust_ID)-1])).opacity=x,F.fillStyle=a+"",F.beginPath(),F.arc(r,i,n*(c/10),0,2*Math.PI),F.fill()}}}ma().domain(u).range(f);sortedColors=f.slice().sort((function(t,e){return l.indexOf(u[f.indexOf(t)])-l.indexOf(u[f.indexOf(e)])}));var H=ma().domain(l).range(sortedColors),z=u.length/2,$=S.selectAll(".legend").data(H.domain()).enter().append("g").attr("transform",(function(t,e){return"translate("+(e%z*80-.7*d)+","+18*Math.floor(e/z)*1.2+")"})).attr("class","legend");$.append("rect").attr("x",g-18).attr("width",18).attr("height",18).style("fill",H),$.append("text").attr("x",g-24).attr("y",9).attr("dy",".35em").style("text-anchor","end").text((function(t){return t})).attr("font-size","0.8em").attr("fill","white");i.bind(i.events.osdClickEvent,t=>{})}))}};var al=il;const ol=function(t){return Math.round(10*t)/10},sl=function(t){const e=Math.pow(10,4);return Math.round(t*e)/e},cl=function(t){return Object.keys(t).forEach(e=>{null==t[e]&&delete t[e]}),t},ul=function(t){return btoa(encodeURIComponent(t))},fl=function(t){try{return decodeURIComponent(atob(t))}catch(t){return""}},ll=function(t){return $(t).serializeArray().reduce((function(t,e){return t[e.name]=e.value,t}),{})},hl=function(t,e,n){return e?$(t).addClass(n):$(t).removeClass(n)},dl=function(t,e){hl(t,!e,"d-none")},pl=function(t,e){hl(t,e,"active")},gl=function(t,e){hl(t,e,"green"),hl(t,!e,"white")};const ml=function(t){ot.copy(t)},vl=function(t,e,n){const r=e.reduce((function(t,e){return e.TileSize=e.TileSize||[1024,1024],e.maxLevel=e.maxLevel||0,t[e.Name]=e,t}),{});return t[n].map((function(t){return t.map((function(t){return this.image_map[t]}),{image_map:r})}),{image_map:r})},yl=function(t){$(this).tooltip({title:"Copy to Clipboard"}),$(this).on("relabel",(function(t,e){$(this).attr("data-original-title",e).tooltip("show")})),$(this).click((function(){return $(this).trigger("relabel",["Copied"]),ml(t.hashstate.bufferYaml),setTimeout(function(){$(this).trigger("relabel",["Copy to Clipboard"])}.bind(this),1e3),!1}))},bl=function(){$(this).tooltip({title:"Copy to Clipboard"}),$(this).on("relabel",(function(t,e){$(this).attr("data-original-title",e).tooltip("show")})),$(this).on("click",(function(){const t=$(this).closest("form"),e=ll(t);return $(this).trigger("relabel",["Copied"]),ml(e.copy_content),setTimeout((function(){$(this).trigger("relabel",["Copy to Clipboard"])}),1e3),!1}))},wl=function(t,e,n){this.eventHandler=n,this.trackers=t.trackers,this.pollycache=t.pollycache,this.showdown=new showdown.Converter,this.osd=e,this.hashstate=t};wl.prototype={init:function(){const t=this.hashstate;window.onpopstate=function(e){t.popState(e),this.loadPolly(t.waypoint.Description),this.newView(!0)}.bind(this),window.onpopstate(),this.edit&&t.startEditing(),t.pushState(),window.onpopstate(),$("#exhibit-name").text(t.exhibit.Name),$(".modal_copy_button").each(bl),$("#zoom-in").tooltip({title:"Zoom in"}),$("#zoom-out").tooltip({title:"Zoom out"}),$("#arrow-switch").tooltip({title:"Share Arrow"}),$("#lasso-switch").tooltip({title:"Share Region"}),$("#draw-switch").tooltip({title:"Share Box"}),$("#duplicate-view").tooltip({title:"Clone linked view"}),$("#copy_link_modal").on("hidden.bs.modal",t.cancelDrawing.bind(t)),$("#edit_description_modal").on("hidden.bs.modal",t.cancelDrawing.bind(t)),$("#toggle-sidebar").click((function(t){t.preventDefault(),$("#sidebar-menu").toggleClass("toggled")})),$("#toggle-legend").click((function(t){t.preventDefault(),$("#legend").toggleClass("toggled")})),$("#leftArrow").click(this,(function(t){const e=t.data.hashstate;0==e.w?(e.s=e.s-1,e.w=e.waypoints.length-1):e.w=e.w-1,e.pushState(),window.onpopstate()})),$("#rightArrow").click(this,(function(t){const e=t.data.hashstate;e.w==e.waypoints.length-1?(e.s=e.s+1,e.w=0):e.w=e.w+1,e.pushState(),window.onpopstate()})),$("#edit-switch").click(this,(function(t){const e=t.data.hashstate;e.edit||(e.startEditing(),e.pushState(),window.onpopstate())})),$("#view-switch").click(this,(function(t){const e=t.data.hashstate;e.edit&&(e.finishEditing(),e.pushState(),window.onpopstate())})),$("#toc-button").click(this,(function(t){const e=t.data.hashstate;"outline"!=e.waypoint.Mode&&(e.s=0,e.pushState(),window.onpopstate())})),$(".clear-switch").click(this,(function(t){const e=t.data.hashstate;e.bufferWaypoint=void 0,e.startEditing(),e.pushState(),window.onpopstate()})),$(".arrow-switch").click(this,(function(t){const e=t.data.hashstate,n=t.data;e.drawType="arrow",e.drawing?e.cancelDrawing(e):e.startDrawing(e),e.pushState(),n.newView(!1)})),$(".lasso-switch").click(this,(function(t){const e=t.data.hashstate,n=t.data;e.drawType="lasso",e.drawing?e.cancelDrawing(e):e.startDrawing(e),e.pushState(),n.newView(!1)})),$(".draw-switch").click(this,(function(t){const e=t.data.hashstate,n=t.data;e.drawType="box",e.drawing?e.cancelDrawing(e):e.startDrawing(e),e.pushState(),n.newView(!1)}));var e=document.getElementById("depth-legend"),n=document.getElementById("z-slider");n.max=t.cgs.length-1,n.value=t.g,n.min=0,t.design.is3d&&t.design.z_scale?e.innerText=ol(t.g/t.design.z_scale)+" m":t.design.is3d&&(e.innerText=t.group.Name);const r=this;n.addEventListener("input",(function(){t.g=n.value,t.design.z_scale?e.innerText=ol(t.g/t.design.z_scale)+" m":e.innerText=t.group.Name,r.newView(!0)}),!1),$("#edit_description_modal form").submit(this,(function(t){const e=t.data.hashstate,n=ll(t.target);$(this).closest(".modal").modal("hide"),e.d=ul(n.d),$("#copy_link_modal").modal("show");const r=e.location("host")+e.location("pathname"),i=e.makeHash(["d","g","m","a","v","o","p"]);return document.getElementById("copy_link").value=r+i,!1}))},newView:function(t){const e=this.hashstate;if(this.osd.newView(t),t){this.addChannelLegends(),e.design.is3d?$("#channel-label").hide():this.addGroups(),this.addMasks(),this.newStories(),e.edit?this.fillWaypointEdit():this.fillWaypointView(),$(".step-back").click(this,(function(t){const e=t.data.hashstate;e.w-=1,e.pushState(),window.onpopstate()})),$(".step-next").click(this,(function(t){const e=t.data.hashstate;e.w+=1,e.pushState(),window.onpopstate()}));const t=this;$(".edit_copy_button").each((function(){yl.call(this,t)})),$("#edit_toggle_arrow").click(this,(function(t){const e=t.data.hashstate,n=t.data,r=e.waypoint.Arrows[0],i=r.HideArrow;r.HideArrow=!i,n.newView(!0)}))}if(e.edit){const t=this;$("#mask-picker").off("changed.bs.select"),$("#mask-picker").on("changed.bs.select",(function(n,r,i,a){const o=$(this).find("option").eq(r).text();e.waypoint.Masks=e.masks.map(t=>t.Name).filter((function(t){return i?a.includes(t)||t==o:a.includes(t)&&t!=o}));const s=e.active_masks.map(t=>t.Name).filter((function(t){return e.waypoint.Masks.includes(t)}));e.waypoint.ActiveMasks=s,e.m=s.map(t=>Ll(e.masks,t)),t.newView(!0)})),$("#group-picker").off("changed.bs.select"),$("#group-picker").on("changed.bs.select",(function(n,r,i,a){const o=$(this).find("option").eq(r).text();e.waypoint.Groups=e.cgs.map(t=>t.Name).filter((function(t){return i?a.includes(t)||t==o:a.includes(t)&&t!=o}));const s=e.waypoint.Groups,c=e.cgs[e.g].Name;s.length>0&&!s.includes(c)&&(e.g=Ll(e.cgs,s[0])),t.newView(!0)}))}const n=e.edit,r=e.drawing,i=e.drawType;var a;pl("#view-switch",!n),pl("#edit-switch",n),dl("#home-button",!n&&"outline"==e.waypoint.Mode),dl("#toc-button",!n&&"outline"!=e.waypoint.Mode),dl("#channel-groups-legend",!e.design.is3d),dl("#z-slider-legend",e.design.is3d),dl("#toggle-legend",!e.design.is3d),dl(".only-3d",e.design.is3d),dl(".editControls",n),dl("#waypointControls",!n),dl("#waypointName",!n),a="crosshair",r?$("#openseadragon1 *").css("cursor",a):$("#openseadragon1 *").css("cursor","default"),gl(".draw-switch *",r&&"box"==i),gl(".lasso-switch *",r&&"lasso"==i),gl(".arrow-switch *",r&&"arrow"==i)},loadPolly:function(t){const e=at()(t);if(speech_bucket){const t="https://s3.amazonaws.com/"+speech_bucket+"/speech/"+e+".mp3";document.getElementById("audioSource").src=t,document.getElementById("audioPlayback").load()}},drawLowerBounds:function(t){const e=this.hashstate,n=[t.x,t.y];e.o=n.concat([0,0]),this.newView(!1)},computeBounds:function(t,e,n){return t<e+n/2?{start:t,range:e+n-t}:{start:e,range:t-e}},drawUpperBounds:function(t){const e=this.hashstate,n=e.o.slice(0,2),r=e.o.slice(2),i=this.computeBounds(t.x,n[0],r[0]),a=this.computeBounds(t.y,n[1],r[1]),o=[i.start,a.start,i.range,a.range];e.o=o.map(sl),this.newView(!1)},addMasks:function(){const t=this.hashstate;$("#mask-layers").empty(),t.edit||"explore"==t.waypoint.Mode?($("#mask-layers").addClass("flex"),$("#mask-layers").removeClass("flex-column")):($("#mask-layers").addClass("flex-column"),$("#mask-layers").removeClass("flex"));const e=t.waypoint.Masks||[],n=t.masks.filter(t=>e.includes(t.Name));n.length||t.edit?$("#mask-label").show():$("#mask-label").hide(),n.forEach((function(e){const n=Ll(t.masks,e.Name);this.addMask(e,n)}),this)},addMask:function(t,e){const n=this.hashstate;var r=document.createElement("a");r=Object.assign(r,{className:n.m.includes(e)?"nav-link active":"nav-link",href:"javascript:;",innerText:t.Name,title:t.Path,id:t.Path});var i=!!n.m.includes(e);r.setAttribute("aria-selected",i),document.getElementById("mask-layers").appendChild(r),$(r).click(this,(function(t){const n=t.data.hashstate,r=n.design.default_group,i=Ll(n.cgs,r);-1!=i&&(n.g=i),n.m.includes(e)?n.m=n.m.filter(t=>t!=e):n.m.push(e),n.pushState(),window.onpopstate()}))},addGroups:function(){const t=this.hashstate;$("#channel-groups").empty(),$("#channel-groups-legend").empty();const e=t.waypoint.Groups||[],n=t.cgs.filter(t=>e.includes(t.Name));n.length||t.edit?$("#channel-label").show():$("#channel-label").hide(),n.forEach((function(e){const n=Ll(t.cgs,e.Name);this.addGroup(e,n,"channel-groups",!1)}),this);const r=t.cgs.filter(t=>t.Channels.length>1),i=t.cgs.filter(t=>1==t.Channels.length),a=document.getElementById("channel-groups-legend");var o;r.length>0&&((o=document.createElement("h6")).innerText="Channel Groups:",o.className="m-1",a.appendChild(o));(r.forEach((function(e){const n=Ll(t.cgs,e.Name);this.addGroup(e,n,"channel-groups-legend",!0)}),this),i.length>0)&&((o=document.createElement("h6")).innerText="Channels:",o.className="m-1",a.appendChild(o));i.forEach((function(e){const n=Ll(t.cgs,e.Name);this.addGroup(e,n,"channel-groups-legend",!0)}),this)},addGroup:function(t,e,n,r){const i=this.hashstate;var a=document.createElement("a"),o=i.g===e;(a=Object.assign(a,{className:o?"nav-link active":"nav-link",style:"padding-right: 40px; position: relative;",href:"javascript:;",innerText:t.Name,id:t.Path+"_"+n})).setAttribute("data-toggle","pill");var s=void 0;for(var c in i.stories)for(var u in i.stories[c].Waypoints){var f=i.stories[c].Waypoints[u];f.Group==t.Name&&(null==s||f.DefineGroup)&&(s=[c,u])}var l=document.createElement("a");if(o&&r&&s){l=Object.assign(l,{className:"text-white",style:"position: absolute; right: 5px;",href:"javascript:;",innerText:"MORE"}),a.appendChild(l),$(l).click(this,(function(t){i.s=s[0],i.w=s[1],i.pushState(),window.onpopstate()}))}document.getElementById(n).appendChild(a),$(a).click(this,(function(t){i.g=e,i.pushState(),window.onpopstate()}))},addChannelLegends:function(){const t=this.hashstate;$("#channel-legend").empty(),t.channels.forEach(this.addChannelLegend,this)},addChannelLegend:function(t,e){const n=this.indexColor(e,"#FFF");var r=document.createElement("span");r.className="legend-label pl-3",r.innerText=t;var i=document.createElement("span");$(i).css("background-color",n),i.className="badge legend-color",i.innerText="";var a=document.getElementById("channel-legend"),o=document.createElement("li");o.appendChild(i),o.appendChild(r),a.appendChild(o)},channelOrders:function(t){return t.reduce((function(t,e,n){return t[e]=n,t}),{})},indexColor:function(t,e){const n=this.hashstate.colors;return void 0===t?e:"#"+n[t%n.length]},newStories:function(){const t=this.hashstate,e=document.getElementById("story-container");if(function(t){for(;t.firstChild;)t.removeChild(t.firstChild)}(e),"outline"==t.waypoint.Mode){var n=document.createElement("p");n.innerText="Table of Contents",e.appendChild(n);var r=document.createElement("div"),i=document.createElement("ol");t.stories.forEach((function(t,e){null!=t.Mode&&"outline"!=t.Mode||this.addStory(t,e,i)}),this),r.appendChild(i),e.appendChild(r)}const a=document.createElement("p"),o=t.design.footer;a.innerHTML=this.showdown.makeHtml(o),e.appendChild(a)},addStory:function(t,e,n){t.Waypoints.forEach((function(t,r){this.addWaypoint(t,r,e,n)}),this)},addWaypoint:function(t,e,n,r){var i=document.createElement("li"),a=document.createElement("a");a=Object.assign(a,{className:"",href:"javascript:;",innerText:t.Name}),$(a).click(this,(function(t){const r=t.data.hashstate;r.s=n,r.w=e,r.pushState(),window.onpopstate()})),i.appendChild(a),r.appendChild(i)},fillWaypointView:function(){const t=this.hashstate,e=t.waypoint,n=document.getElementById("viewer-waypoint"),r=document.getElementById("waypointName");document.getElementById("waypointCount").innerText=t.currentCount+"/"+t.totalCount,"outline"!==e.Mode?r.innerText=e.Name:r.innerText="";const i=$(".waypoint-content").scrollTop();$(n).css("height",$(n).height());var a=e.Description;cell_type_links_map.forEach((function(t,e){var n=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),r=RegExp(n+"s?","gi");a=a.replace(r,(function(e){return"["+e+"]("+t+")"}))})),marker_links_map.forEach((function(t,e){var n=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),r=RegExp("(^|[^0-9A-Za-z`])("+n+")([^0-9A-Za-z`]|$)","gi");a=a.replace(r,(function(t,e,n,r){return t.replace(n,"`"+n+"`","gi")}))})),marker_links_map.forEach((function(t,e){var n=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),r=RegExp("`"+n+"`","gi");a=a.replace(r,(function(e){return"["+e+"]("+t+")"}))}));const o=new Set(["VisMatrix","VisBarChart","VisScatterplot","VisCanvasScatterplot"].filter(t=>e[t])),s=new Set,c=this,u=function(t){s.add(t),[...o].every(t=>s.has(t))&&($(".waypoint-content").scrollTop(i),$(n).css("height",""),c.colorMarkerText(n))},f=function(e){var n=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");const r=RegExp(n,"gi"),i=Vl(t.masks,r);i>=0&&(t.m=[i]),c.newView(!0)},l=function(e,n){var r=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");const i=RegExp(r,"gi"),a=Vl(t.masks,i);a>=0&&(t.m=[a]);const o=Ll(t.cgs,n);if(o>=0)t.g=o;else{var s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");const e=RegExp(s,"gi"),r=Vl(t.cgs,e);r>=0&&(t.g=r)}c.newView(!0)},h=function(e){var n=c.osd.viewer.viewport.imageToViewportCoordinates(e[0],e[1]);t.v=[10,n.x,n.y],c.osd.newView(!0),t.a=[n.x,n.y]},d=function(t,n,r){const i={VisMatrix:al.renderMatrix,VisBarChart:al.renderBarChart,VisScatterplot:al.renderScatterplot,VisCanvasScatterplot:al.renderCanvasScatterplot}[t],a={VisMatrix:l,VisBarChart:f,VisScatterplot:h,VisCanvasScatterplot:h}[t];i(n,r,e[t],{clickHandler:a},c.eventHandler).then(()=>u(t))};var p=document.createElement("div");if(Array.from(o).forEach((function(e){var r=e+"-"+t.s+"-"+t.w,i=n.getElementsByClassName(r);i[0]&&p.appendChild(i[0])})),n.innerHTML=this.showdown.makeHtml(a),e.Image){var g=document.createElement("img");g.src=e.Image,n.appendChild(g)}Array.from(o).forEach((function(e){const r=Array.from(n.getElementsByTagName("code")).filter(t=>t.innerText==e)[0],i=document.createElement("div");i.style.cssText="position:relative",i.className=e+"-"+t.s+"-"+t.w,i.id=e+"-"+t.s+"-"+t.w;const a=p.getElementsByClassName(i.className);a[0]&&r?($(r).replaceWith(a[0]),u(e)):r?($(r).replaceWith(i),d(e,n,i.id)):(n.appendChild(i),d(e,n,i.id))})),u("")},colorMarkerText:function(t){const e=this.hashstate,n=this.channelOrders(e.channels),r=t.getElementsByTagName("code");for(var i=0;i<r.length;i++){var a=r[i],o=n[a.innerText];o||Object.keys(n).forEach((function(t){const e=a.innerText,r=marker_alias_map.get(e)||e,i=marker_alias_map.get(t)||t;var s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");const c=RegExp("^"+s+"$","gi");null!=i&&i.match(c)&&(o=n[t])}));var s=this.indexColor(o),c=s?"2px solid "+s:"inherit";$(a).css("border-bottom",c)}},fillWaypointEdit:function(){const t=this.hashstate,e=document.getElementById("viewer-waypoint");$(e).empty();const n=document.getElementsByClassName("save_edits_form")[0].cloneNode(!0);e.appendChild(n);1==t.waypoint.Arrows[0].HideArrow?$("#edit_toggle_arrow").css("opacity","0.5"):$("#edit_toggle_arrow").css("opacity","1");const r=$(e).find(".edit_text")[0],i=$(e).find(".edit_name")[0],a=$(e).find(".edit_arrow_text")[0],o=fl(t.d),s=fl(t.n);$(a).on("input",this,(function(t){const e=t.data.hashstate,n=t.data;e.waypoint.Arrows[0].Text=this.value,n.newView(!1)})),a.value=t.waypoint.Arrows[0].Text||"",$(i).on("input",this,(function(t){const e=t.data.hashstate;e.n=ul(this.value),e.waypoint.Name=this.value})),i.value=s,$(r).on("input",this,(function(t){const e=t.data.hashstate;e.d=ul(this.value),e.waypoint.Description=this.value})),r.value=o}};var _l=n(15),xl=n.n(_l);const Cl=function(t,e){return e.then((function(e){const n=new nt({UserPoolId:"us-east-1_d3Wusx6qp",ClientId:"cvuuuuogh6nmqm8491iiu1lh5"});return function(t,e){return new Promise((function(n,r){t.authenticateUser(e,{onSuccess:t=>n(t),onFailure:t=>r(t),mfaRequired:t=>r(t),newPasswordRequired:(t,e)=>r({fields:t,required:e})})}))}(new Z({Username:t,Pool:n}),new o({Username:t,Password:e})).then(t=>t.getIdToken().getJwtToken())}))},Al=function(t,e){return(t%e+e)%e},Sl=function(t){return ul(t.Description)},Tl=function(t){return ul(t.Name)},Ml=function(t,e){const n=(t.ActiveMasks||[]).map(t=>Ll(e,t));return n.length<2?[-1].concat(n):n},El=function(t,e){const n=(t.Arrows||[{}])[0].Point;return n||[-100,-100]},kl=function(t,e){const n=t.Group;return Ll(e,n)},Ul=function(t){return[t.Zoom,t.Pan[0],t.Pan[1]]},Dl=function(t){const e=t.Polygon;return e||Il([])},Pl=function(t){return[t.Overlays[0].x,t.Overlays[0].y,t.Overlays[0].width,t.Overlays[0].height]};var Il=function(t){var e="";return t.forEach((function(t){e+=t.x.toFixed(5)+","+t.y.toFixed(5)+","})),e=e.slice(0,-1),xl.a.compressToEncodedURIComponent(e)};const Nl=function(t,e,n){return t.reduce((function(t,r){var i=e[r]||0;return i.constructor===Array&&(i=i.join("_")),t+n+r+"="+i}),"").slice(1)},Rl=function(t){return t.reduce((function(t,e){if(e){const n=e.split("="),r=n.slice(1).join("=")||"1",i=r.split("_");t[n[0]]=i.length>1?i:r}return t}),{})},Bl=function(t,e){this.trackers=[],this.pollycache={},this.embedded=e.embedded||!1,this.exhibit=t,this.state={buffer:{waypoint:void 0},drawType:"lasso",changed:!1,design:{},m:[-1],w:[0],g:0,s:0,a:[-100,-100],v:[.5,.5,.5],o:[-100,-100,1,1],p:[],name:"",description:"",edit:!1,drawing:0},this.newExhibit()};Bl.prototype={get bufferWaypoint(){if(void 0===this.state.buffer.waypoint){const t=this.viewport;return cl({Zoom:t.scale,Pan:[t.pan.x,t.pan.y],Arrows:[{Point:this.a,Text:"",HideArrow:!1}],ActiveMasks:void 0,Masks:void 0,Polygon:this.p,Group:this.group.Name,Groups:void 0,Description:"",Name:"Untitled",Overlays:[this.overlay]})}return this.state.buffer.waypoint},set bufferWaypoint(t){this.state.buffer.waypoint=t},location:function(t){return decodeURIComponent(location[t])},get search(){const t=this.location("search").slice(1).split("&");return Rl(t)},get hash(){const t=this.location("hash").slice(1).split("#");return Rl(t)},get url(){return this.location("pathname")+this.location("search")+this.location("hash")},get searchKeys(){const t=Object.keys(this.search);return["edit"].filter(e=>t.includes(e))},get hashKeys(){return"tag"==this.waypoint.Mode||this.isSharedLink?["d","s","w","g","m","a","v","o","p"]:["s","w","g","m","a","v","o","p"]},set edit(t){this.state.edit=!!t},get edit(){return!!this.state.edit},get omero_cookie(){return function(t,e){return e.then((function(e){return fetch("https://omero.hms.harvard.edu/api/v0/token/",{mode:"no-cors"}).then((function(n){return fetch("https://omero.hms.harvard.edu/api/v0/login/",{method:"POST",body:JSON.stringify({csrfmiddlewaretoken:n.data,username:t,password:e,server:1})}).then((function(t){return"csrftoken="+n.data+";sessionid="+t.eventContext.sessionUuid+";"}))}))}))}("jth30",new Promise((function(t,e){$("#password_modal").modal("show"),$("#password_modal").find("form").submit((function(e){$("#password_modal").find("form").off(),$(this).closest(".modal").modal("hide");const n=parseForm(e.target).p;return t(n),!1}))})))},get token(){const t=new Promise((function(t,e){t("MEETING@lsp2")}));return Cl("john_hoffer@hms.harvard.edu",t)},get drawType(){return this.state.drawType},set drawType(t){this.state.drawType=t},get drawing(){return this.state.drawing},set drawing(t){const e=parseInt(t,10);this.state.drawing=Al(e,3)},get v(){return this.state.v},set v(t){this.state.v=t.map(parseFloat)},get a(){return this.state.a},set a(t){this.state.a=t.map(parseFloat)},get m(){const t=this.state.m;return 0==this.masks.length?[-1]:t},set m(t){Array.isArray(t)?this.state.m=t.map(t=>parseInt(t,10)):this.state.m=[-1]},get g(){const t=this.state.g;return t<this.cgs.length?t:0},set g(t){const e=parseInt(t,10),n=this.cgs.length;this.state.g=Al(e,n)},get w(){const t=this.state.w[this.s]||0;return t<this.waypoints.length?t:0},set w(t){const e=parseInt(t,10),n=this.waypoints.length;this.state.w[this.s]=Al(e,n);const r=this.waypoint;this.m=Ml(r,this.masks),this.g=kl(r,this.cgs),this.v=Ul(r),"tag"==this.waypoint.Mode?(this.o=Pl(r),this.a=El(r)):(this.o=[-100,-100,1,1],this.a=[-100,-100]),this.p=Dl(r),this.d=Sl(r),this.n=Tl(r)},get s(){const t=this.state.s;return t<this.stories.length?t:0},set s(t){const e=parseInt(t,10),n=this.stories.length;this.state.s=Al(e,n),this.w=this.w},get o(){return this.state.o},set o(t){this.state.o=t.map(parseFloat)},get p(){return Il(this.state.p)},set p(t){this.state.p=function(t){var e=xl.a.decompressFromEncodedURIComponent(t);if(!e)return[];var n=[],r=[];e.split(",").forEach((function(t,e){e%2==0?n.push(parseFloat(t)):r.push(parseFloat(t))}));var i=[];return n.length==r.length&&n.forEach((function(t,e){i.push({x:t,y:r[e]})})),i}(t)},get d(){return this.state.description},set d(t){this.state.description=""+t},get n(){return this.state.name},set n(t){this.state.name=""+t},get changed(){return this.state.changed},set changed(t){this.state.changed=!!t},get design(){return this.state.design},set design(t){const e=t.stories;this.stories.length!=e.length&&(this.state.w=e.map((function(t,e){return this.state.w[e]||0}),this)),this.state.design=t},get masks(){return this.design.masks||[]},set masks(t){var e=this.design;e.masks=t,this.design=e,this.changed=!0},get cgs(){return this.design.cgs||[]},set cgs(t){var e=this.design;e.cgs=t,this.design=e,this.changed=!0},get chans(){return this.design.chans||[]},set chans(t){var e=this.design;e.chans=t,this.design=e,this.changed=!0},get stories(){return this.design.stories||[]},set stories(t){var e=this.design;e.stories=t,this.design=e,this.changed=!0},get layout(){return this.design.layout||{Grid:[]}},set layout(t){var e=this.design;e.layout=t,this.design=e,this.changed=!0},get images(){return this.design.images||[]},set images(t){var e=this.design;e.images=t,this.design=e,this.changed=!0},get grid(){return vl(this.layout,this.images,"Grid")},get target(){return vl(this.layout,this.images,"Target")},get currentCount(){const t=this.s,e=this.w;return this.stories.reduce((function(n,r,i){return t==i?n+e:t>i?n+r.Waypoints.length:n}),1)},get totalCount(){return this.stories.reduce((function(t,e){return t+e.Waypoints.length}),0)},get isSharedLink(){const t=this.hash.hasOwnProperty("d"),e=!this.hash.hasOwnProperty("s"),n=0==this.stories.filter(t=>"tag"==t.Mode).length;return t&&(e||n)},get isMissingHash(){const t=!this.hash.hasOwnProperty("s");return!this.isSharedLink&&t},get story(){return this.stories[this.s]},set story(t){const e=this.stories;e[this.s]=t,this.stories=e},get active_masks(){const t=this.masks;return this.m.map((function(e){return t[e]})).filter(t=>null!=t)},get group(){return this.cgs[this.g]},get colors(){return this.group.Colors.concat(this.active_masks.reduce((t,e)=>t.concat(e.Colors||[]),[]))},get channels(){return this.group.Channels.concat(this.active_masks.reduce((t,e)=>t.concat(e.Channels||[]),[]))},get waypoints(){return this.story.Waypoints},set waypoints(t){const e=this.story;e.Waypoints=t,this.story=e},get waypoint(){if(this.edit)return this.bufferWaypoint;var t=this.waypoints[this.w];return t.Overlays||(t.Overlays=[{x:-100,y:-100,width:1,height:1}]),t},set waypoint(t){if(this.edit)this.bufferWaypoint=t;else{const e=this.waypoints;e[this.w]=t,this.waypoints=e}},get viewport(){const t=this.v;return{scale:t[0],pan:new OpenSeadragon.Point(t[1],t[2])}},get overlay(){const t=this.o;return{x:t[0],y:t[1],width:t[2],height:t[3]}},newExhibit:function(){const t=this.exhibit,e=t.Groups||[],n=t.Masks||[];var r=t.Stories||[];r=r.map(t=>(t.Waypoints=t.Waypoints.map(t=>(null!=t.Overlay&&(t.Overlays=[t.Overlay]),t)),t)),this.design={chans:t.Channels||[],layout:t.Layout||{},images:t.Images||[],header:t.Header||"",footer:t.Footer||"",is3d:t["3D"]||!1,z_scale:t.ZPerMicron||0,default_group:t.DefaultGroup||"",stories:r,masks:n,cgs:e};const i=this.newTempStory("outline");this.stories=[i].concat(this.stories);const a=this.newTempStory("explore");this.stories=this.stories.concat([a])},newTempStory:function(t){this.exhibit;const e=this.group,n=this.a,r=this.o,i=this.p,a=this.v,o=this.design.header,s="outline"==t?ul(o):this.d,c={explore:"Free Explore",tag:"Shared Link",outline:"Introduction"}[t],u={}[t],f={explore:this.masks.filter(t=>t.Name).map(t=>t.Name)}[t],l={tag:this.active_masks.filter(t=>t.Name).map(t=>t.Name)}[t];return{Mode:t,Description:"",Name:c||"Story",Waypoints:[cl({Mode:t,Zoom:a[0],Arrows:[{Point:n}],Polygon:i,Pan:a.slice(1),ActiveMasks:l,Group:e.Name,Masks:f,Groups:u,Description:fl(s),Name:c||"Waypoint",Overlays:[{x:r[0],y:r[1],width:r[2],height:r[3]}]})]}},pushState:function(){const t=this.makeUrl(this.hashKeys,this.searchKeys);(this.url!=t||this.changed)&&(this.embedded?history.replaceState(this.design,document.title,t):history.pushState(this.design,document.title,t),this.changed=!1)},popState:function(t){t&&t.state&&(this.changed=!1,this.design=t.state);const e=this.hash,n=this.search;this.searchKeys;if(this.searchKeys.forEach((function(t){this[t]=n[t]}),this),this.hashKeys.forEach((function(t){e.hasOwnProperty(t)&&(this[t]=e[t])}),this),this.isSharedLink){this.d=e.d;const t=this.newTempStory("tag");this.stories=this.stories.concat([t]),this.s=this.stories.length-1,this.pushState(),window.onpopstate()}else if(this.isMissingHash){this.s=0;const t=$("#welcome_modal");t.find(".channel_count")[0].innerText=this.channels.length,t.modal("show"),this.pushState(),window.onpopstate()}},makeUrl:function(t,e){const n=this.location("pathname"),r=this.makeHash(t);return n+this.makeSearch(e)+r},makeHash:function(t){const e=Nl(t,this,"#");return e?"#"+e:""},makeSearch:function(t){const e=Nl(t,this,"&");return e?"?"+e:""},startEditing:function(t){const e=t||this.bufferWaypoint;this.bufferWaypoint=e,this.v=Ul(e),this.o=Pl(e),this.p=Dl(e),this.d=Sl(e),this.n=Tl(e),this.a=El(e),this.m=Ml(e,this.masks),this.g=kl(e,this.cgs)},finishEditing:function(){const t=this.bufferWaypoint;t.Group=this.group.Name,t.Name=fl(this.n),t.Description=fl(this.d),t.Zoom=this.viewport.scale,t.Overlays=[this.overlay],t.ActiveMasks=this.active_masks.map(t=>t.Name),t.Arrows[0].Point=this.a,t.Polygon=this.p,t.Pan=[this.viewport.pan.x,this.viewport.pan.y],this.bufferWaypoint=t,this.pushState(),window.onpopstate()},startDrawing:function(){this.drawing=1;this.waypoint;"lasso"==this.drawType?this.p=Il([]):"arrow"==this.drawType?this.a=[-100,-100]:this.o=[-100,-100,1,1]},cancelDrawing:function(){this.drawing=0},finishDrawing:function(){this.edit?(this.drawing=0,this.finishEditing(),this.startEditing(),this.pushState()):$("#edit_description_modal").modal("show")},get allArrows(){return this.stories.reduce((t,e,n)=>t.concat(e.Waypoints.reduce((t,e,r)=>{const i=(this.stories[n].Waypoints[r].Arrows||[]).map((t,e)=>["waypoint-arrow",n,r,e]).concat([["user-arrow",n,r,0]]);return t.concat(i)},[])),[])},get allOverlays(){return this.stories.reduce((t,e,n)=>t.concat(e.Waypoints.reduce((t,e,r)=>{const i=(this.stories[n].Waypoints[r].Overlays||[]).map((t,e)=>["waypoint-overlay",n,r,e]).concat([["user-overlay",n,r,0]]);return t.concat(i)},[])),[])},channelSettings:function(t){const e=this.chans;return null==t?{}:t.reduce((function(t,n){const r=Ll(e,n);return r>=0&&(t[n]=e[r]),t}),{})},get bufferYaml(){const t=this.viewport,e=this.waypoint;e.Overlays=[this.overlay],e.Name=fl(this.n),e.Description=fl(this.d);const n=this;e.ActiveMasks=this.m.filter((function(t){return t>=0})).map((function(t){return n.masks[t].Name})),e.Group=this.cgs[this.g].Name,e.Pan=[t.pan.x,t.pan.y],e.Zoom=t.scale;return jsyaml.safeDump([[[e]]],{lineWidth:40,noCompatMode:!0}).replace("- - - ","    - ")}};const Fl=function(t,e){return"minerva"==e.Provider?t.token.then((function(t){return{"Content-Type":"application/json",Authorization:t,Accept:"image/png"}})):"minerva-public"==e.Provider?Promise.resolve().then((function(){return{"Content-Type":"application/json",Authorization:"Anonymous",Accept:"image/png"}})):(e.Provider,Promise.resolve({}))},Ol=function(t,e,n){const r=e.Colors,i=e.Channels,a=function(n,r,i){const a="."+e.Format;return t.Path+"/"+e.Path+"/"+(t.MaxLevel-n)+"_"+r+"_"+i+a};if("minerva"==t.Provider||"minerva-public"==t.Provider){let a=i.reduce((function(e,i,a){const o=n[i];if(null==o)return e;if(o.Images.indexOf(t.Name)>=0){const t=[o.Index,r[a],o.Range[0],o.Range[1]];e.push(t.join(","))}return e}),[]).join("/"),o=t.Path+"/render-tile/";t.Path.includes("/prerendered-tile/")&&(a=e.Path,o=t.Path);return function(e,n,r){const i=t.MaxLevel-e+"/";return o+(n+"/"+r+"/0/0/")+i+a}}if("omero"==t.Provider){const e=i.reduce((function(e,i,a){const o=n[i];if(null==o)return e;if(o.Images.indexOf(t.Name)>=0){const t=o.Index,n=r[a],i=Math.round(65535*o.Range[0]),s=Math.round(65535*o.Range[1]);e.push(t+"|"+i+":"+s+"$"+n)}return e}),[]).join(",");return function(n,r,i){return t.Path+"?c="+e+"&m=c&z=1&t=1&format=jpeg&tile="+(t.MaxLevel-n+","+r+","+i+",")+t.TileSize.join(",")}}return a},Ll=function(t,e){if(!Array.isArray(t))return-1;const n=t.filter((function(t){return t.Name==e}))[0];return t.indexOf(n)},Vl=function(t,e){if(!Array.isArray(t))return-1;const n=t.filter((function(t){return!!t.Name.match(e)}))[0];return t.indexOf(n)};var Hl=0,zl=function(t){if(++Hl%5!=1)return;const e=this.viewer;var n=t.position,r=e.viewport.pointFromPixel(n);this.hashstate.state.p.push({x:r.x,y:r.y}),this.newView(!1)};const $l=function(t,e,n){["centerSpringX","centerSpringY","zoomSpring"].forEach((function(r){const i=t.viewport[r];i.animationTime=e,i.springStiffness=n,i.springTo(i.target.value)}))},Yl=function(t,e,n,r){this.svg_overlay=Je(e.svgOverlay().node()),this.tileSources=n,this.hashstate=t,this.viewer=e,this.mouseEvent={},this.trackers=[],this.eventHandler=r,this.init()};Yl.prototype={get mouseXY(){const t=this.mouseEvent,e=OpenSeadragon.getMousePosition(t);return this.normalize(e)},set mouseXY(t){this.mouseEvent=t},init:function(){const t=this.viewer,e=this.hashstate,n=this;new OpenSeadragon.MouseTracker({element:t.canvas,dragHandler:function(r){"lasso"==e.drawType&&e.drawing&&(t.setMouseNavEnabled(!1),zl.bind(n)(r))}}),new OpenSeadragon.MouseTracker({element:t.canvas,dragEndHandler:function(n){"lasso"==e.drawType&&e.drawing&&e.finishDrawing(),t.setMouseNavEnabled(!0)}});this.viewer.addHandler("canvas-drag",(function(t){const e=t.userData,n=e.hashstate;if("box"!=n.drawType)return;const r=e.normalize(t.position);1==n.drawing?(n.drawing=2,t.preventDefaultAction=!0,e.drawLowerBounds(r)):2==n.drawing&&(t.preventDefaultAction=!0,e.drawUpperBounds(r))}),this),this.viewer.addHandler("canvas-drag-end",(function(t){const e=t.userData,n=e.hashstate;if("box"!=n.drawType)return;const r=e.normalize(t.position);2==n.drawing&&(t.preventDefaultAction=!0,e.drawUpperBounds(r),n.finishDrawing(),n.pushState(),e.newView(!1))}),this),this.viewer.addHandler("canvas-click",(function(t){const e=t.userData,n=e.hashstate,r=e.normalize(t.position);var i=e.viewer.viewport.viewportToImageCoordinates(r.x,r.y);e.eventHandler.trigger(e.eventHandler.events.osdClickEvent,{x:i.x,y:i.y}),"lasso"!=n.drawType&&("arrow"!=n.drawType?1==n.drawing?(n.drawing=2,t.preventDefaultAction=!0,e.drawLowerBounds(r)):2==n.drawing&&(t.preventDefaultAction=!0,e.drawUpperBounds(r),n.finishDrawing(),e.viewer.setMouseNavEnabled(!0),n.pushState(),e.newView(!1)):1==n.drawing&&(n.a=[r.x,r.y],n.finishDrawing(),e.viewer.setMouseNavEnabled(!0),n.pushState(),e.newView(!1)))}),this),$(this.viewer.element).mousemove(this,(function(t){const e=t.data,n=e.hashstate;"lasso"!=n.drawType&&(e.mouseXY=t,2==n.drawing&&e.drawUpperBounds(e.mouseXY))})),this.viewer.addHandler("animation",(function(t){const e=t.userData,n=e.hashstate,r=e.viewer.viewport.getZoom(),i=e.viewer.viewport.getCenter();n.v=[sl(r),sl(i.x),sl(i.y)]}),this),this.viewer.addHandler("animation-finish",(function(t){const e=t.userData,n=e.hashstate,r=e.viewer.viewport.getZoom(),i=e.viewer.viewport.getCenter();n.v=[sl(r),sl(i.x),sl(i.y)],n.pushState(),e.newView(!1),e.faster()}),this),this.finishAnimation(),this.viewer.setVisible(!0)},finishAnimation:function(){const t=this.viewer.viewport.getBounds();this.viewer.viewport.fitBounds(t,!0)},faster:function(){$l(this.viewer,1.2,6.4)},slower:function(){$l(this.viewer,3.2,6.4)},normalize:function(t){const e=this.viewer.viewport;return e.viewerElementToViewportCoordinates.call(e,t)},drawLowerBounds:function(t){const e=this.hashstate,n=[t.x,t.y];e.o=n.concat([0,0]),this.newView(!1)},computeBounds:function(t,e,n){return t<e+n/2?{start:t,range:e+n-t}:{start:e,range:t-e}},drawUpperBounds:function(t){const e=this.hashstate,n=e.o.slice(0,2),r=e.o.slice(2),i=this.computeBounds(t.x,n[0],r[0]),a=this.computeBounds(t.y,n[1],r[1]),o=[i.start,a.start,i.range,a.range];e.o=o.map(sl),this.newView(!1)},newView:function(t){const e=this.hashstate;this.trackers.forEach(t=>t.destroy()),this.trackers=[],this.addPolygon("selection",e.state.p),e.allOverlays.forEach((function(t){const[n,r,i,a]=t;var o=e.overlay;"waypoint-overlay"==n&&(o=e.stories[r].Waypoints[i].Overlays[a]);var s=t.join("-");this.addOverlay(o,s,r,i)}),this);const n=this;$.each($(".arrow-overlay"),(function(t,e){const r=n.viewer.getOverlayById(e.id),i=new OpenSeadragon.Point(-100,-100);r&&r.update({location:i})})),e.allArrows.forEach((function(t){this.addArrow(t)}),this),t&&(this.activateViewport(),function(t,e,n){const r=n.map(t=>t.Path);Object.keys(t).forEach(n=>{n===e.Path||r.includes(n)?t[n].forEach(t=>t.setOpacity(1)):t[n].forEach(t=>t.setOpacity(0))})}(this.tileSources,e.group,e.active_masks)),this.viewer.forceRedraw()},addPolygon:function(t,e){var n=this.svg_overlay;Je("#"+t).remove(),n.selectAll(t).data([e]).enter().append("polygon").attr("id",t).attr("points",(function(t){return t.map((function(t){return[t.x,t.y].join(",")})).join(" ")}))},addArrow:function(t){const[e,n,r,i]=t,a=this.hashstate;var o={Point:a.a,Text:""};"waypoint-arrow"==e&&(o=Object.assign({},a.stories[n].Waypoints[r].Arrows[i])),null==o.Angle&&(o.Angle=60);const s=o.Arrowhead?"arrowhead-image":"arrow-image",c="arrow-text-"+t.join("-"),u="arrow-image-"+t.join("-");n==a.s&&r==a.w||(o.Point=[-100,-100]);const f=this.viewer.getOverlayById(u),l=new OpenSeadragon.Point(o.Point[0],o.Point[1]);if(f)f.update({location:l});else{if(u!=s){const t=document.getElementById(s).cloneNode(!0);t.id=u,document.body.appendChild(t)}this.viewer.addOverlay({x:o.Point[0],y:o.Point[1],element:u,placement:OpenSeadragon.Placement.CENTER})}const h=this.viewer.getOverlayById(c),d=new OpenSeadragon.Point(o.Point[0],o.Point[1]);if(h)h.update({location:d});else{if("arrow-text"!=c){const t=document.getElementById("arrow-text").cloneNode(!0);t.id=c,document.body.appendChild(t)}this.viewer.addOverlay({x:o.Point[0],y:o.Point[1],element:c,placement:OpenSeadragon.Placement.CENTER})}const p=$("#"+u),g=$("#"+u+" svg"),m=$("#"+c),v=$("#"+c+" .arrow-label"),y=g[0].getAttribute("width")/2,b=y*Math.sin(o.Angle*Math.PI/180),w=y*Math.cos(o.Angle*Math.PI/180);1==o.HideArrow?p.css("display","none"):(p.css("display","block"),g[0].setAttribute("transform","translate("+w+","+b+")rotate("+o.Angle+")"),v.css("top","100px"));const _=o.Text;if(_){const t=m.width(),e=m.height();var x=2*w+t*Math.sign(Math.round(w))/2,C=2*b+e*Math.sign(Math.round(b))/2;1==o.HideArrow&&(x=0,C=0),v.css("transform","translate("+x+"px, "+C+"px)"),v.addClass("p-3"),v.text(_)}else v.removeClass("p-3"),v.text("")},addOverlay:function(t,e,n,r){const i=this.viewer.getOverlayById(e),a=this.hashstate,o="outline"!=a.waypoint.Mode,s=a.s!=n||a.w!=r;if(o&&s){if(i){const t=new OpenSeadragon.Point(-100,-100);i.update({location:t,width:1,height:1})}return}var c=document.getElementById(e);c||((c=document.createElement("div")).className="white overlay",c.id=e,document.getElementById("all-overlays").appendChild(c));const u=new OpenSeadragon.Point(t.x,t.y),f=a.drawing&&"box"==a.drawType;gl("#"+e,f),i?i.update({location:u,width:t.width,height:t.height}):this.viewer.addOverlay({x:t.x,y:t.y,width:t.width,height:t.height,element:e});if("outline"==a.waypoint.Mode){const t=new OpenSeadragon.MouseTracker({element:document.getElementById(e),moveHandler:function(t){$(c).css("cursor","pointer")},clickHandler:function(t){const[n,r]=e.split("-").slice(2);t.preventDefaultAction=!1,a.s=n,a.w=r,a.pushState(),window.onpopstate()}.bind(this)});this.trackers.push(t)}},activateViewport:function(){const t=this.hashstate,e=this.viewer.viewport;e.panTo(t.viewport.pan),e.zoomTo(t.viewport.scale)}};const jl=function(t){return t.reduce((function(t,e){return t.concat(e)}))},ql=function(t,e,n,r){const i=n.cgs,a=n.masks;i.forEach(t=>{t.Format=t.Format||"jpg"}),a.forEach(t=>{t.Format=t.Format||"png"});const o=i.concat(a),s=n.grid,c=n.images;document.getElementById("imageName").innerText=1==c.length?c[0].Description:exhibit.Name;const u=s.length,f=s[0].length,l=u*f*o.length;var h=0;const d=jl(s).reduce((function(t,e){return Math.max(t,e.Width)}),0),p=jl(s).reduce((function(t,e){return Math.max(t,e.Height)}),0),g=1.05/u-.05,m=g*d/p;for(var v=0;v<u;v++){const i=v*(g+.05);for(var y=0;y<f;y++){const a=s[v][y],c=(1-.05*(u-1))/u*a.Height/p*a.Width/a.Height,f=y*(m+.05)+(m-c)/2;for(var b=0;b<o.length;b++){const s=o[b],u=n.channelSettings(s.Channels);Fl(n,a).then((function(o){const d="minerva"==a.Provider||"minerva-public"==a.Provider;t.addTiledImage({loadTilesWithAjax:d,crossOriginPolicy:d?"Anonymous":void 0,ajaxHeaders:o,tileSource:{height:a.Height,width:a.Width,maxLevel:a.MaxLevel,tileWidth:a.TileSize.slice(0,1).pop(),tileHeight:a.TileSize.slice(0,2).pop(),getTileUrl:Ol(a,s,u)},x:f,y:i,opacity:0,width:c,success:function(i){const a=i.item;if(e.hasOwnProperty(s.Path)||(e[s.Path]=[]),e[s.Path].push(a),n.design.is3d){const e=t.world.getIndexOfItem(a);a.addHandler("fully-loaded-change",(function(n){const r=t.world.getItemAt(e+1),i=t.world.getItemAt(e-1);r&&r.setPreload(n.fullyLoaded),i&&i.setPreload(n.fullyLoaded)}))}(h+=1)==l&&r()}})}))}const d=$("<p>"),g=a.Description;d.addClass("overlay-title").text(g),t.addOverlay({element:d[0],x:f+c/2,y:i,placement:"BOTTOM",checkResize:!1}),t.addOverlay({x:f,y:i,width:c,height:a.Height/a.Width*c,className:"slide-border"})}}};var Wl={build_page:function(t,e){const n=OpenSeadragon({id:"openseadragon1",prefixUrl:"https://cdnjs.cloudflare.com/ajax/libs/openseadragon/2.3.1/images/",navigatorPosition:"BOTTOM_RIGHT",zoomOutButton:"zoom-out",zoomInButton:"zoom-in",immediateRender:!0,maxZoomPixelRatio:10,visibilityRatio:.9,degrees:t.Rotation||0});function r(){n.currentOverlays.forEach(t=>{"arrow"==t.element.id.slice(0,5)&&(t.element.style.transform="")})}n.addHandler("update-viewport",(function(){setTimeout(r,1)})),n.addHandler("animation",r),n.world.addHandler("add-item",(function(t){const e=t.item;e.addHandler("fully-loaded-change",(function(t){t.fullyLoaded&&(e.immediateRender=!1)})),e.addHandler("opacity-change",(function(t){0==t.opacity&&(e.immediateRender=!0)}))})),n.scalebar({location:3,minWidth:"100px",type:"Microscopy",stayInsideImage:!1,pixelsPerMeter:1e6*t.PixelsPerMicron||0,backgroundColor:"rgba(0, 0, 0, 0.8)",fontColor:"rgb(255, 255, 255)",color:"rgb(255, 255, 255)"});const a=new i(Je("body").node()),o=new Bl(t,e),s={},c=new Yl(o,n,s,a),u=new wl(o,c,a),f=u.init.bind(u);ql(n,s,o,f)},get_links_alias:function(t){t=t.map((function(t){return t["\ufeffString"]&&(t.String=t["\ufeffString"]),t}));const e=new Map;t.filter(t=>t.Alias).forEach((function(t){t.Alias.split(",").forEach((function(n){e.set(r(n),r(t.String))}))}));const n=new Map;return t.filter(t=>t.Link).forEach((function(t){if(t.Alias){const e=t.Alias.split(",").map(r),i=e.reduce((n,i)=>{const a=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),o=RegExp("^"+a+"$","gi");if(r(t.String).match(o))return n.concat([i]);for(var s in e){var c=e[s];if(c.match(o)&&c!=i&&!n.includes(c))return n.concat([i])}return n},[]);e.filter(t=>!i.includes(t)).forEach((function(e){n.set(e,r(t.Link))}))}n.set(r(t.String),r(t.Link))})),[n,e]}};e.default={build_page:Wl.build_page,get_links_alias:Wl.get_links_alias}}]);